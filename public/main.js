var hF=Object.defineProperty,fF=Object.defineProperties;var pF=Object.getOwnPropertyDescriptors;var Ad=Object.getOwnPropertySymbols,gF=Object.getPrototypeOf,hD=Object.prototype.hasOwnProperty,fD=Object.prototype.propertyIsEnumerable,mF=Reflect.get;var dD=(n,e,t)=>e in n?hF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})hD.call(e,t)&&dD(n,t,e[t]);if(Ad)for(var t of Ad(e))fD.call(e,t)&&dD(n,t,e[t]);return n},oe=(n,e)=>fF(n,pF(e));var Qm=(n,e)=>{var t={};for(var r in n)hD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Ad)for(var r of Ad(n))e.indexOf(r)<0&&fD.call(n,r)&&(t[r]=n[r]);return t};var Ti=(n,e,t)=>mF(gF(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var Ym;function Rd(){return Ym}function sr(n){let e=Ym;return Ym=n,e}var pD=Symbol("NotFound");function Gs(n){return n===pD||n?.name==="\u0275NotFound"}function xd(n,e){return Object.is(n,e)}var Pt=null,Nd=!1,Zm=1,yF=null,kt=Symbol("SIGNAL");function pe(n){let e=Pt;return Pt=n,e}function Od(){return Pt}var Ro={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ws(n){if(Nd)throw new Error("");if(Pt===null)return;Pt.consumerOnSignalRead(n);let e=Pt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Pt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Pt.producers,t!==void 0&&t.producer===n)){Pt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Pt&&(!r||_F(i,Pt)))return;let o=Qs(Pt),s={producer:n,consumer:Pt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Pt.producersTail=s,e!==void 0?e.nextProducer=s:Pt.producers=s,o&&mD(n,s)}function gD(){Zm++}function Fd(n){if(!(Qs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Zm)){if(!n.producerMustRecompute(n)&&!Gc(n)){kd(n);return}n.producerRecomputeValue(n),kd(n)}}function Jm(n){if(n.consumers===void 0)return;let e=Nd;Nd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||vF(r)}}finally{Nd=e}}function Xm(){return Pt?.consumerAllowSignalWrites!==!1}function vF(n){n.dirty=!0,Jm(n),n.consumerMarkedDirty?.(n)}function kd(n){n.dirty=!1,n.lastCleanEpoch=Zm}function No(n){return n&&(n.producersTail=void 0,n.recomputing=!0),pe(n)}function Ks(n,e){if(pe(e),!n)return;n.recomputing=!1;let t=n.producersTail,r=t!==void 0?t.nextProducer:n.producers;if(r!==void 0){if(Qs(n))do r=ey(r);while(r!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function Gc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Fd(t),r!==t.version))return!0}return!1}function Wc(n){if(Qs(n)){let e=n.producers;for(;e!==void 0;)e=ey(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function mD(n,e){let t=n.consumersTail,r=Qs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)mD(i.producer,i)}function ey(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Qs(e)){let o=e.producers;for(;o!==void 0;)o=ey(o)}return t}function Qs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ld(n){yF?.(n)}function _F(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Vd(n,e){let t=Object.create(EF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Fd(t),Ws(t),t.value===qc)throw t.error;return t.value};return r[kt]=t,Ld(t),r}var Md=Symbol("UNSET"),Pd=Symbol("COMPUTING"),qc=Symbol("ERRORED"),EF=oe(F({},Ro),{value:Md,dirty:!0,error:null,equal:xd,kind:"computed",producerMustRecompute(n){return n.value===Md||n.value===Pd},producerRecomputeValue(n){if(n.value===Pd)throw new Error("");let e=n.value;n.value=Pd;let t=No(n),r,i=!1;try{r=n.computation(),pe(null),i=e!==Md&&e!==qc&&r!==qc&&n.equal(e,r)}catch(o){r=qc,n.error=o}finally{Ks(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function wF(){throw new Error}var yD=wF;function vD(n){yD(n)}function ty(n){yD=n}var IF=null;function ny(n,e){let t=Object.create(jd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>_D(t);return r[kt]=t,Ld(t),[r,s=>Ys(t,s),s=>ry(t,s)]}function _D(n){return Ws(n),n.value}function Ys(n,e){Xm()||vD(n),n.equal(n.value,e)||(n.value=e,bF(n))}function ry(n,e){Xm()||vD(n),Ys(n,e(n.value))}var jd=oe(F({},Ro),{equal:xd,value:void 0,kind:"signal"});function bF(n){n.version++,gD(),Jm(n),IF?.(n)}function ue(n){return typeof n=="function"}function Zs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Bd=Zs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Mo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(o){e=o instanceof Bd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ED(o)}catch(s){e=e??[],s instanceof Bd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Bd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ED(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Mo(t,e)}remove(e){let{_finalizers:t}=this;t&&Mo(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var iy=Ze.EMPTY;function Ud(n){return n instanceof Ze||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function ED(n){ue(n)?n():n.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Js={setTimeout(n,e,...t){let{delegate:r}=Js;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Js;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $d(n){Js.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(n);else throw n})}function Kc(){}var wD=oy("C",void 0,void 0);function ID(n){return oy("E",void 0,n)}function bD(n){return oy("N",n,void 0)}function oy(n,e,t){return{kind:n,value:e,error:t}}var Po=null;function Xs(n){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Po;if(e&&(Po={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Po;if(Po=null,t)throw r}}else n()}function TD(n){xn.useDeprecatedSynchronousErrorHandling&&Po&&(Po.errorThrown=!0,Po.error=n)}var ko=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ud(e)&&e.add(this)):this.destination=CF}static create(e,t,r){return new Di(e,t,r)}next(e){this.isStopped?ay(bD(e),this):this._next(e)}error(e){this.isStopped?ay(ID(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ay(wD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TF=Function.prototype.bind;function sy(n,e){return TF.call(n,e)}var cy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hd(r)}else Hd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hd(t)}}},Di=class extends ko{constructor(e,t,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sy(e.next,o),error:e.error&&sy(e.error,o),complete:e.complete&&sy(e.complete,o)}):i=e}this.destination=new cy(i)}};function Hd(n){xn.useDeprecatedSynchronousErrorHandling?TD(n):$d(n)}function DF(n){throw n}function ay(n,e){let{onStoppedNotification:t}=xn;t&&Js.setTimeout(()=>t(n,e))}var CF={closed:!0,next:Kc,error:DF,complete:Kc};var ea=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(n){return n}function zd(...n){return uy(n)}function uy(n){return n.length===0?Ut:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=AF(t)?t:new Di(t,r,i);return Xs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=DD(r),new r((i,o)=>{let s=new Di({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ea](){return this}pipe(...t){return uy(t)(this)}toPromise(t){return t=DD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function DD(n){var e;return(e=n??xn.Promise)!==null&&e!==void 0?e:Promise}function SF(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}function AF(n){return n&&n instanceof ko||SF(n)&&Ud(n)}function ly(n){return ue(n?.lift)}function _e(n){return e=>{if(ly(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new dy(n,e,t,r,i)}var dy=class extends ko{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ta(){return _e((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var na=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ly(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return ta()(this)}};var CD=Zs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new qd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new CD}next(t){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?iy:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,Mo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new qd(e,t),n})(),qd=class extends ot{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:iy}};var st=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hy={now(){return(hy.delegate||Date).now()},delegate:void 0};var Gd=class extends Ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Qc={setInterval(n,e,...t){let{delegate:r}=Qc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Qc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ra=class extends Gd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Qc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Mo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ia=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ia.now=hy.now;var oa=class extends ia{constructor(e,t=ia.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yc=new oa(ra);var Wd=class extends ra{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kd=class extends oa{};var fy=new Kd(Wd);var Qt=new re(n=>n.complete());function SD(n){return n&&ue(n.schedule)}function AD(n){return n[n.length-1]}function Qd(n){return ue(AD(n))?n.pop():void 0}function Ci(n){return SD(AD(n))?n.pop():void 0}function py(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ND(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function RD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xo(n){return this instanceof xo?(this.v=n,this):new xo(n)}function MD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(R){return new Promise(function(S,P){o.push([y,R,S,P])>1||c(y,R)})},I&&(i[y]=I(i[y])))}function c(y,I){try{l(r[y](I))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof xo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,I){y(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function PD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RD=="function"?RD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Yd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Zd(n){return ue(n?.then)}function Jd(n){return ue(n[ea])}function Xd(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function eh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var th=RF();function nh(n){return ue(n?.[th])}function rh(n){return MD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xo(t.read());if(i)return yield xo(void 0);yield yield xo(r)}}finally{t.releaseLock()}})}function ih(n){return ue(n?.getReader)}function at(n){if(n instanceof re)return n;if(n!=null){if(Jd(n))return NF(n);if(Yd(n))return MF(n);if(Zd(n))return PF(n);if(Xd(n))return kD(n);if(nh(n))return kF(n);if(ih(n))return xF(n)}throw eh(n)}function NF(n){return new re(e=>{let t=n[ea]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MF(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function PF(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$d)})}function kF(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kD(n){return new re(e=>{OF(n,e).catch(t=>e.error(t))})}function xF(n){return kD(rh(n))}function OF(n,e){var t,r,i,o;return ND(this,void 0,void 0,function*(){try{for(t=PD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Si(n,e=0){return _e((t,r)=>{t.subscribe(me(r,i=>Yt(r,n,()=>r.next(i),e),()=>Yt(r,n,()=>r.complete(),e),i=>Yt(r,n,()=>r.error(i),e)))})}function Ai(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xD(n,e){return at(n).pipe(Ai(e),Si(e))}function OD(n,e){return at(n).pipe(Ai(e),Si(e))}function FD(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function LD(n,e){return new re(t=>{let r;return Yt(t,e,()=>{r=n[th](),Yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function oh(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{Yt(t,e,()=>{let r=n[Symbol.asyncIterator]();Yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VD(n,e){return oh(rh(n),e)}function jD(n,e){if(n!=null){if(Jd(n))return xD(n,e);if(Yd(n))return FD(n,e);if(Zd(n))return OD(n,e);if(Xd(n))return oh(n,e);if(nh(n))return LD(n,e);if(ih(n))return VD(n,e)}throw eh(n)}function ke(n,e){return e?jD(n,e):at(n)}function Z(...n){let e=Ci(n);return ke(n,e)}function sa(n,e){let t=ue(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function gy(n){return!!n&&(n instanceof re||ue(n.lift)&&ue(n.subscribe))}var On=Zs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function aa(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Di({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new On)}});n.subscribe(o)})}function X(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:FF}=Array;function LF(n,e){return FF(e)?n(...e):n(e)}function sh(n){return X(e=>LF(n,e))}var{isArray:VF}=Array,{getPrototypeOf:jF,prototype:BF,keys:UF}=Object;function ah(n){if(n.length===1){let e=n[0];if(VF(e))return{args:e,keys:null};if($F(e)){let t=UF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function $F(n){return n&&typeof n=="object"&&jF(n)===BF}function ch(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Oo(...n){let e=Ci(n),t=Qd(n),{args:r,keys:i}=ah(n);if(r.length===0)return ke([],e);let o=new re(HF(r,e,i?s=>ch(i,s):Ut));return t?o.pipe(sh(t)):o}function HF(n,e,t=Ut){return r=>{BD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)BD(e,()=>{let l=ke(n[c],e),h=!1;l.subscribe(me(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function BD(n,e,t){n?Yt(t,n,e):e()}function UD(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=R=>l<r?I(R):c.push(R),I=R=>{o&&e.next(R),l++;let S=!1;at(t(R,h++)).subscribe(me(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();s?Yt(e,s,()=>I(P)):I(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(me(e,y,()=>{p=!0,g()})),()=>{a?.()}}function nt(n,e,t=1/0){return ue(e)?nt((r,i)=>X((o,s)=>e(r,o,i,s))(at(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>UD(r,i,n,t)))}function ca(n=1/0){return nt(Ut,n)}function $D(){return ca(1)}function ua(...n){return $D()(ke(n,Ci(n)))}function Zc(n){return new re(e=>{at(n()).subscribe(e)})}function my(...n){let e=Qd(n),{args:t,keys:r}=ah(n),i=new re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;at(t[h]).subscribe(me(o,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?ch(r,a):a),o.complete())}))}});return e?i.pipe(sh(e)):i}function bt(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Zt(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=at(n(s,Zt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function HD(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(me(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ar(n,e){return ue(e)?nt(n,e,1):nt(n,1)}function yy(n,e=Yc){return _e((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(me(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Ri(n){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jr(n){return n<=0?()=>Qt:_e((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function uh(n,e=Ut){return n=n??zF,_e((t,r)=>{let i,o=!0;t.subscribe(me(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function zF(n,e){return n===e}function lh(n=qF){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qF(){return new On}function Fo(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Br(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,o)=>n(i,o,r)):Ut,jr(1),t?Ri(e):lh(()=>new On))}function la(n){return n<=0?()=>Qt:_e((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,o)=>n(i,o,r)):Ut,la(1),t?Ri(e):lh(()=>new On))}function dh(n,e){return _e(HD(n,e,arguments.length>=2,!0))}function hh(...n){let e=Ci(n);return _e((t,r)=>{(e?ua(n,t,e):ua(n,t)).subscribe(r)})}function rt(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,c=>{i?.unsubscribe();let l=0,h=o++;at(n(c,h)).subscribe(i=me(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function fh(n){return _e((e,t)=>{at(n).subscribe(me(t,()=>t.complete(),Kc)),!t.closed&&e.subscribe(t)})}function yt(n,e,t){let r=ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ut}function zD(n){let e=pe(null);try{return n()}finally{pe(e)}}var vh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",x=class extends Error{code;constructor(e,t){super(Pi(e,t)),this.code=e}};function GF(n){return`NG0${Math.abs(n)}`}function Pi(n,e){return`${GF(n)}${e?": "+e:""}`}var nu=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("")}function WD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $r(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map($r).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function My(n,e){return n?e?`${n} ${e}`:n:e||""}var WF=Ne({__forward_ref__:Ne});function Ln(n){return n.__forward_ref__=Ln,n.toString=function(){return $r(this())},n}function Tt(n){return Py(n)?n():n}function Py(n){return typeof n=="function"&&n.hasOwnProperty(WF)&&n.__forward_ref__===Ln}function KD(n,e){n==null&&ky(e,n,null,"!=")}function ky(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function ru(n){return KF(n,_h)}function xy(n){return ru(n)!==null}function KF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function QF(n){let e=n?.[_h]??null;return e||null}function Ey(n){return n&&n.hasOwnProperty(gh)?n[gh]:null}var _h=Ne({\u0275prov:Ne}),gh=Ne({\u0275inj:Ne}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Oy(n){return n&&!!n.\u0275providers}var Fy=Ne({\u0275cmp:Ne}),Ly=Ne({\u0275dir:Ne}),Vy=Ne({\u0275pipe:Ne}),jy=Ne({\u0275mod:Ne}),eu=Ne({\u0275fac:Ne}),Uo=Ne({__NG_ELEMENT_ID__:Ne}),qD=Ne({__NG_ENV_ID__:Ne});function iu(n){return typeof n=="string"?n:n==null?"":String(n)}function mh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():iu(n)}var By=Ne({ngErrorCode:Ne}),QD=Ne({ngErrorMessage:Ne}),Xc=Ne({ngTokenPath:Ne});function Uy(n,e){return YD("",-200,e)}function Eh(n,e){throw new x(-201,!1)}function YF(n,e){n[Xc]??=[];let t=n[Xc],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(KD(e.provide,"Token with multi: true should have a provide property"),r=mh(e.provide)):r=mh(e),t[0]!==r&&n[Xc].unshift(r)}function ZF(n,e){let t=n[Xc],r=n[By],i=n[QD]||n.message;return n.message=XF(i,r,t,e),n}function YD(n,e,t){let r=new x(e,n);return r[By]=e,r[QD]=n,t&&(r[Xc]=t),r}function JF(n){return n[By]}function XF(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Pi(e,`${n}${o}${i}`)}var wy;function ZD(){return wy}function $t(n){let e=wy;return wy=n,e}function $y(n,e,t){let r=ru(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Eh(n,"Injector")}var eL={},Lo=eL,Iy="__NG_DI_FLAG__",by=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Vo(t)||0;try{return this.injector.get(e,r&8?null:Lo,r)}catch(i){if(Gs(i))return i;throw i}}};function tL(n,e=0){let t=Rd();if(t===void 0)throw new x(-203,!1);if(t===null)return $y(n,void 0,e);{let r=nL(e),i=t.retrieve(n,r);if(Gs(i)){if(r.optional)return null;throw i}return i}}function Y(n,e=0){return(ZD()||tL)(Tt(n),e)}function N(n,e){return Y(n,Vo(e))}function Vo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function nL(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ty(n){let e=[];for(let t=0;t<n.length;t++){let r=Tt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=rL(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function Hy(n,e){return n[Iy]=e,n.prototype[Iy]=e,n}function rL(n){return n[Iy]}function Ni(n,e){let t=n.hasOwnProperty(eu);return t?n[eu]:null}function wh(n,e){n.forEach(t=>Array.isArray(t)?wh(t,e):e(t))}function zy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ou(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function JD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function XD(n,e,t){let r=ha(n,e);return r>=0?n[r|1]=t:(r=~r,JD(n,r,e,t)),r}function Ih(n,e){let t=ha(n,e);if(t>=0)return n[t|1]}function ha(n,e){return iL(n,e,1)}function iL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ki={},un=[],xi=new U(""),qy=new U("",-1),Gy=new U(""),tu=class{get(e,t=Lo){if(t===Lo){let i=YD("",-201);throw i.name="\u0275NotFound",i}return t}};function Wy(n){return n[jy]||null}function zr(n){return n[Fy]||null}function Ky(n){return n[Ly]||null}function eC(n){return n[Vy]||null}function dn(n){return{\u0275providers:n}}function tC(...n){return{\u0275providers:Qy(!0,n),\u0275fromNgModule:!0}}function Qy(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wh(e,s=>{let a=s;yh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nC(i,o),t}function nC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Yy(i,o=>{e(o,r)})}}function yh(n,e,t,r){if(n=Tt(n),!n)return!1;let i=null,o=Ey(n),s=!o&&zr(n);if(!o&&!s){let c=n.ngModule;if(o=Ey(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)yh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{wh(o.imports,h=>{yh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&nC(l,e)}if(!a){let l=Ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:un},i),e({provide:Gy,useValue:i,multi:!0},i),e({provide:xi,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Yy(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Yy(n,e){for(let t of n)Oy(t)&&(t=t.\u0275providers),Array.isArray(t)?Yy(t,e):e(t)}var oL=Ne({provide:String,useValue:Ne});function rC(n){return n!==null&&typeof n=="object"&&oL in n}function sL(n){return!!(n&&n.useExisting)}function aL(n){return!!(n&&n.useFactory)}function jo(n){return typeof n=="function"}function iC(n){return!!n.useClass}var su=new U(""),ph={},GD={},_y;function au(){return _y===void 0&&(_y=new tu),_y}var Be=class{},Bo=class extends Be{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Cy(e,s=>this.processProvider(s)),this.records.set(qy,da(void 0,this)),i.has("environment")&&this.records.set(Be,da(void 0,this));let o=this.records.get(su);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Gy,un,{self:!0}))}retrieve(e,t){let r=Vo(t)||0;try{return this.get(e,Lo,r)}catch(i){if(Gs(i))return i;throw i}}destroy(){Jc(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return Jc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Jc(this);let t=sr(this),r=$t(void 0),i;try{return e()}finally{sr(t),$t(r)}}get(e,t=Lo,r){if(Jc(this),e.hasOwnProperty(qD))return e[qD](this);let i=Vo(r),o,s=sr(this),a=$t(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=hL(e)&&ru(e);h&&this.injectableDefInScope(h)?l=da(Dy(e),ph):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?au():this.parent;return t=i&8&&t===Lo?null:t,c.get(e,t)}catch(c){let l=JF(c);throw l===-200||l===-201?new x(l,null):c}finally{$t(a),sr(s)}}resolveInjectorInitializers(){let e=pe(null),t=sr(this),r=$t(void 0),i;try{let o=this.get(xi,un,{self:!0});for(let s of o)s()}finally{sr(t),$t(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($r(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Tt(e);let t=jo(e)?e:Tt(e&&e.provide),r=uL(e);if(!jo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=da(void 0,ph,!0),i.factory=()=>Ty(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pe(null);try{if(t.value===GD)throw Uy($r(e));return t.value===ph&&(t.value=GD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&dL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dy(n){let e=ru(n),t=e!==null?e.factory:Ni(n);if(t!==null)return t;if(n instanceof U)throw new x(204,!1);if(n instanceof Function)return cL(n);throw new x(204,!1)}function cL(n){if(n.length>0)throw new x(204,!1);let t=QF(n);return t!==null?()=>t.factory(n):()=>new n}function uL(n){if(rC(n))return da(void 0,n.useValue);{let e=Zy(n);return da(e,ph)}}function Zy(n,e,t){let r;if(jo(n)){let i=Tt(n);return Ni(i)||Dy(i)}else if(rC(n))r=()=>Tt(n.useValue);else if(aL(n))r=()=>n.useFactory(...Ty(n.deps||[]));else if(sL(n))r=(i,o)=>Y(Tt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Tt(n&&(n.useClass||n.provide));if(lL(n))r=()=>new i(...Ty(n.deps));else return Ni(i)||Dy(i)}return r}function Jc(n){if(n.destroyed)throw new x(205,!1)}function da(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function lL(n){return!!n.deps}function dL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Cy(n,e){for(let t of n)Array.isArray(t)?Cy(t,e):t&&Oy(t)?Cy(t.\u0275providers,e):e(t)}function Ue(n,e){let t;n instanceof Bo?(Jc(n),t=n):t=new by(n);let r,i=sr(t),o=$t(void 0);try{return e()}finally{sr(i),$t(o)}}function oC(){return ZD()!==void 0||Rd()!=null}var Vn=0,ae=1,se=2,Dt=3,wn=4,In=5,cu=6,fa=7,xt=8,$o=9,cr=10,qe=11,pa=12,Jy=13,Ho=14,bn=15,zo=16,qo=17,Go=18,uu=19,Xy=20,Ur=21,bh=22,lu=23,hn=24,Wo=25,Ct=26,sC=1;var Oi=7,du=8,hu=9,Jt=10;function ur(n){return Array.isArray(n)&&typeof n[sC]=="object"}function jn(n){return Array.isArray(n)&&n[sC]===!0}function ev(n){return(n.flags&4)!==0}function Fi(n){return n.componentOffset>-1}function ga(n){return(n.flags&1)===1}function lr(n){return!!n.template}function ma(n){return(n[se]&512)!==0}function Ko(n){return(n[se]&256)===256}var aC="svg",cC="math";function Tn(n){for(;Array.isArray(n);)n=n[Vn];return n}function tv(n,e){return Tn(e[n])}function Bn(n,e){return Tn(e[n.index])}function Th(n,e){return n.data[e]}function nv(n,e){return n[e]}function rv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Dn(n,e){let t=e[n];return ur(t)?t:t[Vn]}function Dh(n){return(n[se]&128)===128}function uC(n){return jn(n[Dt])}function fu(n,e){return e==null?null:n[e]}function iv(n){n[qo]=0}function ov(n){n[se]&1024||(n[se]|=1024,Dh(n)&&ya(n))}function lC(n,e){for(;n>0;)e=e[Ho],n--;return e}function pu(n){return!!(n[se]&9216||n[hn]?.dirty)}function Ch(n){n[cr].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),pu(n)&&ya(n)}function ya(n){n[cr].changeDetectionScheduler?.notify(0);let e=Mi(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Dh(e)));)e=Mi(e)}function sv(n,e){if(Ko(n))throw new x(911,!1);n[Ur]===null&&(n[Ur]=[]),n[Ur].push(e)}function dC(n,e){if(n[Ur]===null)return;let t=n[Ur].indexOf(e);t!==-1&&n[Ur].splice(t,1)}function Mi(n){let e=n[Dt];return jn(e)?e[Dt]:e}function hC(n){return n[fa]??=[]}function fC(n){return n.cleanup??=[]}var Ee={lFrame:MC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},gu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(gu||{}),fL=0,Sy=!1;function pC(){return Ee.lFrame.elementDepthCount}function gC(){Ee.lFrame.elementDepthCount++}function mC(){Ee.lFrame.elementDepthCount--}function Sh(){return Ee.bindingsEnabled}function yC(){return Ee.skipHydrationRootTNode!==null}function vC(n){return Ee.skipHydrationRootTNode===n}function _C(){Ee.skipHydrationRootTNode=null}function Me(){return Ee.lFrame.lView}function Ht(){return Ee.lFrame.tView}function Ie(n){return Ee.lFrame.contextLView=n,n[xt]}function be(n){return Ee.lFrame.contextLView=null,n}function St(){let n=av();for(;n!==null&&n.type===64;)n=n.parent;return n}function av(){return Ee.lFrame.currentTNode}function EC(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function va(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function cv(){return Ee.lFrame.isParent}function wC(){Ee.lFrame.isParent=!1}function IC(){return Ee.lFrame.contextLView}function uv(n){ky("Must never be called in production mode"),fL=n}function lv(){return Sy}function dv(n){let e=Sy;return Sy=n,e}function bC(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function TC(n){return Ee.lFrame.bindingIndex=n}function mu(){return Ee.lFrame.bindingIndex++}function DC(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CC(){return Ee.lFrame.inI18n}function SC(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ah(e)}function AC(){return Ee.lFrame.currentDirectiveIndex}function Ah(n){Ee.lFrame.currentDirectiveIndex=n}function RC(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function hv(n){Ee.lFrame.currentQueryIndex=n}function pL(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[In]:null}function fv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=pL(o),i===null||(o=o[Ho],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ee.lFrame=NC();return r.currentTNode=e,r.lView=n,!0}function Rh(n){let e=NC(),t=n[ae];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NC(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?MC(n):e}function MC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function PC(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var pv=PC;function Nh(){let n=PC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kC(n){return(Ee.lFrame.contextLView=lC(n,Ee.lFrame.contextLView))[xt]}function Qo(){return Ee.lFrame.selectedIndex}function Li(n){Ee.lFrame.selectedIndex=n}function Mh(){let n=Ee.lFrame;return Th(n.tView,n.selectedIndex)}function xC(){return Ee.lFrame.currentNamespace}var OC=!0;function Ph(){return OC}function yu(n){OC=n}function Ay(n,e=null,t=null,r){let i=gv(n,e,t,r);return i.resolveInjectorInitializers(),i}function gv(n,e=null,t=null,r,i=new Set){let o=[t||un,tC(n)];return r=r||(typeof n=="object"?void 0:$r(n)),new Bo(o,e||au(),r||null,i)}var Je=class n{static THROW_IF_NOT_FOUND=Lo;static NULL=new tu;static create(e,t){if(Array.isArray(e))return Ay({name:""},t,e,"");{let r=e.name??"";return Ay({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:n,providedIn:"any",factory:()=>Y(qy)});static __NG_ELEMENT_ID__=-1},$e=new U(""),Un=(()=>{class n{static __NG_ELEMENT_ID__=gL;static __NG_ENV_ID__=t=>t}return n})(),Ry=class extends Un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ko(this._lView)}onDestroy(e){let t=this._lView;return sv(t,e),()=>dC(t,e)}};function gL(){return new Ry(Me())}var Fn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zt=new U("",{providedIn:"root",factory:()=>{let n=N(Be),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Fn),e.handleError(t))}}}),FC={provide:xi,useValue:()=>void N(Fn),multi:!0};function mv(n){return typeof n=="function"&&n[kt]!==void 0}function dr(n,e){let[t,r,i]=ny(n,e?.equal),o=t,s=o[kt];return o.set=r,o.update=i,o.asReadonly=LC.bind(o),o}function LC(){let n=this[kt];if(n.readonlyFn===void 0){let e=()=>this();e[kt]=n,n.readonlyFn=e}return n.readonlyFn}function yv(n){return mv(n)&&typeof n.set=="function"}var Hr=class{},kh=new U("",{providedIn:"root",factory:()=>!1});var vv=new U(""),_v=new U("");var xh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=mL}return n})();function mL(){return new xh(Me(),St())}var hr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new st(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new re(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vi=(()=>{class n{internalPendingTasks=N(hr);scheduler=N(Hr);errorHandler=N(zt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})();function vu(...n){}var Ev=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new Ny})}return n})(),Ny=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ba(n){return{toString:n}.toString()}var Oh="__parameters__";function TL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function pS(n,e,t){return ba(()=>{let r=TL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Oh)?c[Oh]:Object.defineProperty(c,Oh,{value:[]})[Oh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xt=Hy(pS("Optional"),8);var gS=Hy(pS("SkipSelf"),4);function DL(n){return typeof n=="function"}var Uh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function mS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Wr=(()=>{let n=()=>yS;return n.ngInherit=!0,n})();function yS(n){return n.type.prototype.ngOnChanges&&(n.setInput=SL),CL}function CL(){let n=_S(this),e=n?.current;if(e){let t=n.previous;if(t===ki)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function SL(n,e,t,r,i){let o=this.declaredInputs[r],s=_S(n)||AL(n,{previous:ki,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Uh(l&&l.currentValue,t,c===ki),mS(n,e,i,t)}var vS="__ngSimpleChanges__";function _S(n){return n[vS]||null}function AL(n,e){return n[vS]=e}var VC=[];var xe=function(n,e=null,t){for(let r=0;r<VC.length;r++){let i=VC[r];i(n,e,t)}};function RL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=yS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ES(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vh(n,e,t){wS(n,e,3,t)}function jh(n,e,t,r){(n[se]&3)===t&&wS(n,e,t,r)}function wv(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function wS(n,e,t,r){let i=r!==void 0?n[qo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[qo]+=65536),(a<o||o==-1)&&(NL(n,t,e,c),n[qo]=(n[qo]&4294901760)+c+2),c++}function jC(n,e){xe(4,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),xe(5,n,e)}}function NL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[qo]>>16&&(n[se]&3)===e&&(n[se]+=16384,jC(a,o)):jC(a,o)}var Ea=-1,Zo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function ML(n){return(n.flags&8)!==0}function PL(n){return(n.flags&16)!==0}function kL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];xL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function IS(n){return n===3||n===4||n===6}function xL(n){return n.charCodeAt(0)===64}function wu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BC(n,t,i,null,e[++r]):BC(n,t,i,null,null))}}return n}function BC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function bS(n){return n!==Ea}function $h(n){return n&32767}function OL(n){return n>>16}function Hh(n,e){let t=OL(n),r=e;for(;t>0;)r=r[Ho],t--;return r}var Mv=!0;function zh(n){let e=Mv;return Mv=n,e}var FL=256,TS=FL-1,DS=5,LL=0,fr={};function VL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Uo)&&(r=t[Uo]),r==null&&(r=t[Uo]=LL++);let i=r&TS,o=1<<i;e.data[n+(i>>DS)]|=o}function qh(n,e){let t=CS(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,Iv(r.data,n),Iv(e,null),Iv(r.blueprint,null));let i=Yv(n,e),o=n.injectorIndex;if(bS(i)){let s=$h(i),a=Hh(i,e),c=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Iv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function CS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=MS(i),r===null)return Ea;if(t++,i=i[Ho],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ea}function Pv(n,e,t){VL(n,e,t)}function jL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(IS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function SS(n,e,t){if(t&8||n!==void 0)return n;Eh(e,"NodeInjector")}function AS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[$o],o=$t(void 0);try{return i?i.get(e,r,t&8):$y(e,r,t&8)}finally{$t(o)}}return SS(r,e,t)}function RS(n,e,t,r=0,i){if(n!==null){if(e[se]&2048&&!(r&2)){let s=zL(n,e,t,r,fr);if(s!==fr)return s}let o=NS(n,e,t,r,fr);if(o!==fr)return o}return AS(e,t,r,i)}function NS(n,e,t,r,i){let o=$L(t);if(typeof o=="function"){if(!fv(e,n,r))return r&1?SS(i,t,r):AS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Eh(t);else return s}finally{pv()}}else if(typeof o=="number"){let s=null,a=CS(n,e),c=Ea,l=r&1?e[bn][In]:null;for((a===-1||r&4)&&(c=a===-1?Yv(n,e):e[a+8],c===Ea||!$C(r,!1)?a=-1:(s=e[ae],a=$h(c),e=Hh(c,e)));a!==-1;){let h=e[ae];if(UC(o,a,h.data)){let p=BL(a,e,t,s,r,l);if(p!==fr)return p}c=e[a+8],c!==Ea&&$C(r,e[ae].data[a+8]===l)&&UC(o,a,e)?(s=h,a=$h(c),e=Hh(c,e)):a=-1}}return i}function BL(n,e,t,r,i,o){let s=e[ae],a=s.data[n+8],c=r==null?Fi(a)&&Mv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=UL(a,s,t,c,l);return h!==null?Gh(e,s,h,a,i):fr}function UL(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let I=s[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){let y=s[c];if(y&&lr(y)&&y.type===t)return c}return null}function Gh(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Zo){let a=o;if(a.resolving){let y=mh(s[t]);throw Uy(y)}let c=zh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?$t(a.injectImpl):null,g=fv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&RL(t,s[t],e)}finally{p!==null&&$t(p),zh(c),a.resolving=!1,pv()}}return o}function $L(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Uo)?n[Uo]:void 0;return typeof e=="number"?e>=0?e&TS:HL:e}function UC(n,e,t){let r=1<<n;return!!(t[e+(n>>DS)]&r)}function $C(n,e){return!(n&2)&&!(n&1&&e)}var Yo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return RS(this._tNode,this._lView,e,Vo(r),t)}};function HL(){return new Yo(St(),Me())}function Kr(n){return ba(()=>{let e=n.prototype.constructor,t=e[eu]||kv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[eu]||kv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function kv(n){return Py(n)?()=>{let e=kv(Tt(n));return e&&e()}:Ni(n)}function zL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!ma(s);){let a=NS(o,s,t,r|2,fr);if(a!==fr)return a;let c=o.parent;if(!c){let l=s[Xy];if(l){let h=l.get(t,fr,r);if(h!==fr)return h}c=MS(s),s=s[Ho]}o=c}return i}function MS(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[In]:null}function Du(n){return jL(St(),n)}function qL(){return of(St(),Me())}function of(n,e){return new Hn(Bn(n,e))}var Hn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=qL}return n})();function PS(n){return(n.flags&128)===128}var Zv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Zv||{}),kS=new Map,GL=0;function WL(){return GL++}function KL(n){kS.set(n[uu],n)}function xv(n){kS.delete(n[uu])}var HC="__ngContext__";function wa(n,e){ur(e)?(n[HC]=e[uu],KL(e)):n[HC]=e}function xS(n){return FS(n[pa])}function OS(n){return FS(n[wn])}function FS(n){for(;n!==null&&!jn(n);)n=n[wn];return n}var Ov;function Jv(n){Ov=n}function LS(){if(Ov!==void 0)return Ov;if(typeof document<"u")return document;throw new x(210,!1)}var sf=new U("",{providedIn:"root",factory:()=>QL}),QL="ng",af=new U(""),Bi=new U("",{providedIn:"platform",factory:()=>"unknown"});var cf=new U(""),uf=new U("",{providedIn:"root",factory:()=>LS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var YL="h",ZL="b";var VS=!1,jS=new U("",{providedIn:"root",factory:()=>VS});var JL=(n,e,t,r)=>{};function XL(n,e,t,r){JL(n,e,t,r)}function Xv(n){return(n.flags&32)===32}var eV=()=>null;function BS(n,e,t=!1){return eV(n,e,t)}function US(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];hv(o),a.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function Fv(n,e,t){hv(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function e_(n,e,t){if(ev(e)){let r=pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{pe(r)}}}var qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qr||{});var Fh;function tV(){if(Fh===void 0&&(Fh=null,nu.trustedTypes))try{Fh=nu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fh}function zC(n){return tV()?.createScriptURL(n)||n}var Wh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vh})`}};function Cu(n){return n instanceof Wh?n.changingThisBreaksApplicationSecurity:n}function t_(n,e){let t=$S(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vh})`)}return t===e}function $S(n){return n instanceof Wh&&n.getTypeName()||null}var nV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HS(n){return n=String(n),n.match(nV)?n:"unsafe:"+n}var lf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(lf||{});function zS(n){let e=GS();return e?e.sanitize(lf.URL,n)||"":t_(n,"URL")?Cu(n):HS(iu(n))}function qS(n){let e=GS();if(e)return zC(e.sanitize(lf.RESOURCE_URL,n)||"");if(t_(n,"ResourceURL"))return zC(Cu(n));throw new x(904,!1)}function rV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qS:zS}function n_(n,e,t){return rV(e,t)(n)}function GS(){let n=Me();return n&&n[cr].sanitizer}var iV=/^>|^->|<!--|-->|--!>|<!-$/g,oV=/(<|>)/g,sV="\u200B$1\u200B";function aV(n){return n.replace(iV,e=>e.replace(oV,sV))}function WS(n){return n instanceof Function?n():n}function cV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var KS="ng-template";function uV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(r_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function r_(n){return n.type===4&&n.value!==KS}function lV(n,e,t){let r=n.type===4&&!t?KS:n.value;return e===r}function dV(n,e,t){let r=4,i=n.attrs,o=i!==null?pV(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!$n(r)&&!$n(c))return!1;if(s&&$n(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!lV(n,c,t)||c===""&&e.length===1){if($n(r))return!1;s=!0}}else if(r&8){if(i===null||!uV(n,i,c,t)){if($n(r))return!1;s=!0}}else{let l=e[++a],h=hV(c,i,r_(n),t);if(h===-1){if($n(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if($n(r))return!1;s=!0}}}}return $n(r)||s}function $n(n){return(n&1)===0}function hV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gV(e,n)}function fV(n,e,t=!1){for(let r=0;r<e.length;r++)if(dV(n,e[r],t))return!0;return!1}function pV(n){for(let e=0;e<n.length;e++){let t=n[e];if(IS(t))return e}return n.length}function gV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function qC(n,e){return n?":not("+e.trim()+")":e}function mV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$n(s)&&(e+=qC(o,i),i=""),r=s,o=o||!$n(r);t++}return i!==""&&(e+=qC(o,i)),e}function yV(n){return n.map(mV).join(",")}function vV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!$n(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Qr={};function _V(n,e){return n.createText(e)}function EV(n,e,t){n.setValue(e,t)}function wV(n,e){return n.createComment(aV(e))}function QS(n,e,t){return n.createElement(e,t)}function Kh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function YS(n,e,t){n.appendChild(e,t)}function GC(n,e,t,r,i){r!==null?Kh(n,e,t,r,i):YS(n,e,t)}function IV(n,e,t){n.removeChild(null,e,t)}function bV(n,e,t){n.setAttribute(e,"style",t)}function TV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&kL(n,e,r),i!==null&&TV(n,e,i),o!==null&&bV(n,e,o)}function i_(n,e,t,r,i,o,s,a,c,l,h){let p=Ct+r,g=p+i,y=DV(p,g),I=typeof l=="function"?l():l;return y[ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function DV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qr);return t}function CV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=i_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function o_(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Vn]=i,p[se]=r|4|128|8|64|1024,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),iv(p),p[Dt]=p[Ho]=n,p[xt]=t,p[cr]=s||n&&n[cr],p[qe]=a||n&&n[qe],p[$o]=c||n&&n[$o]||null,p[In]=o,p[uu]=WL(),p[cu]=h,p[Xy]=l,p[bn]=e.type==2?n[bn]:p,p}function SV(n,e,t){let r=Bn(e,n),i=CV(t),o=n[cr].rendererFactory,s=s_(n,o_(n,i,null,JS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function JS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function s_(n,e){return n[pa]?n[Jy][wn]=e:n[pa]=e,n[Jy]=e,e}function le(n=1){eA(Ht(),Me(),Qo()+n,!1)}function eA(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&jh(e,o,0,t)}Li(t)}var df=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(df||{});function Lv(n,e,t,r){let i=pe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&df.SignalBased)!==0&&(c=e[o][kt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):mS(e,c,o,r)}finally{pe(i)}}var pr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pr||{}),AV;function a_(n,e){return AV(n,e)}function _a(n,e,t,r,i){if(r!=null){let o,s=!1;jn(r)?o=r:ur(r)&&(s=!0,r=r[Vn]);let a=Tn(r);n===0&&t!==null?i==null?YS(e,t,a):Kh(e,t,a,i||null,!0):n===1&&t!==null?Kh(e,t,a,i||null,!0):n===2?IV(e,a,s):n===3&&e.destroyNode(a),o!=null&&BV(e,n,o,t,i)}}function RV(n,e){tA(n,e),e[Vn]=null,e[In]=null}function NV(n,e,t,r,i,o){r[Vn]=i,r[In]=e,hf(n,r,t,1,i,o)}function tA(n,e){e[cr].changeDetectionScheduler?.notify(9),hf(n,e,e[qe],2,null,null)}function MV(n){let e=n[pa];if(!e)return bv(n[ae],n);for(;e;){let t=null;if(ur(e))t=e[pa];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[wn]&&e!==n;)ur(e)&&bv(e[ae],e),e=e[Dt];e===null&&(e=n),ur(e)&&bv(e[ae],e),t=e&&e[wn]}e=t}}function c_(n,e){let t=n[hu],r=t.indexOf(e);t.splice(r,1)}function nA(n,e){if(Ko(e))return;let t=e[qe];t.destroyNode&&hf(n,e,t,3,null,null),MV(e)}function bv(n,e){if(Ko(e))return;let t=pe(null);try{e[se]&=-129,e[se]|=256,e[hn]&&Wc(e[hn]),kV(n,e),PV(n,e),e[ae].type===1&&e[qe].destroy();let r=e[zo];if(r!==null&&jn(e[Dt])){r!==e[Dt]&&c_(r,e);let i=e[Go];i!==null&&i.detachView(n)}xv(e)}finally{pe(t)}}function PV(n,e){let t=n.cleanup,r=e[fa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[fa]=null);let i=e[Ur];if(i!==null){e[Ur]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[lu];if(o!==null){e[lu]=null;for(let s of o)s.destroy()}}function kV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Zo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];xe(4,a,c);try{c.call(a)}finally{xe(5,a,c)}}else{xe(4,i,o);try{o.call(i)}finally{xe(5,i,o)}}}}}function xV(n,e,t){return OV(n,e.parent,t)}function OV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Vn];if(Fi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qr.None||i===qr.Emulated)return null}return Bn(r,t)}function FV(n,e,t){return VV(n,e,t)}function LV(n,e,t){return n.type&40?Bn(n,t):null}var VV=LV,WC;function u_(n,e,t,r){let i=xV(n,r,e),o=e[qe],s=r.parent||e[In],a=FV(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)GC(o,i,t[c],a,!1);else GC(o,i,t,a,!1);WC!==void 0&&WC(o,r,e,t,i)}function _u(n,e){if(e!==null){let t=e.type;if(t&3)return Bn(e,n);if(t&4)return Vv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _u(n,r);{let i=n[e.index];return jn(i)?Vv(-1,i):Tn(i)}}else{if(t&128)return _u(n,e.next);if(t&32)return a_(e,n)()||Tn(n[e.index]);{let r=rA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mi(n[bn]);return _u(i,r)}else return _u(n,e.next)}}}return null}function rA(n,e){if(e!==null){let r=n[bn][In],i=e.projection;return r.projection[i]}return null}function Vv(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return _u(r,i)}return e[Oi]}function l_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&wa(Tn(a),r),t.flags|=2),!Xv(t))if(c&8)l_(n,e,t.child,r,i,o,!1),_a(e,n,i,a,o);else if(c&32){let l=a_(t,r),h;for(;h=l();)_a(e,n,i,h,o);_a(e,n,i,a,o)}else c&16?jV(n,e,r,t,i,o):_a(e,n,i,a,o);t=s?t.projectionNext:t.next}}function hf(n,e,t,r,i,o){l_(t,r,n.firstChild,e,i,o,!1)}function jV(n,e,t,r,i,o){let s=t[bn],c=s[In].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];_a(e,n,i,h,o)}else{let l=c,h=s[Dt];PS(r)&&(l.flags|=128),l_(n,e,l,h,i,o,!0)}}function BV(n,e,t,r,i){let o=t[Oi],s=Tn(t);o!==s&&_a(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let c=t[a];hf(c[ae],c,n,e,r,o)}}function UV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:pr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pr.Important),n.setStyle(t,r,i,o))}}function iA(n,e,t,r,i){let o=Qo(),s=r&2;try{Li(-1),s&&e.length>Ct&&eA(n,e,Ct,!1),xe(s?2:0,i,t),t(r,i)}finally{Li(o),xe(s?3:1,i,t)}}function ff(n,e,t){KV(n,e,t),(t.flags&64)===64&&QV(n,e,t)}function d_(n,e,t=Bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function $V(n,e,t,r){let o=r.get(jS,VS)||t===qr.ShadowDom,s=n.selectRootElement(e,o);return HV(s),s}function HV(n){zV(n)}var zV=()=>null;function qV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oA(n,e,t,r,i,o){let s=e[ae];if(f_(n,s,e,t,r)){Fi(n)&&WV(e,n.index);return}n.type&3&&(t=qV(t)),GV(n,e,t,r,i,o)}function GV(n,e,t,r,i,o){if(n.type&3){let s=Bn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function WV(n,e){let t=Dn(e,n);t[se]&16||(t[se]|=64)}function KV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Fi(t)&&SV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||qh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Gh(e,n,s,t);if(wa(c,e),o!==null&&XV(e,s-r,c,a,t,o),lr(a)){let l=Dn(t.index,e);l[xt]=Gh(e,n,s,t)}}}function QV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=AC();try{Li(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Ah(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&YV(c,l)}}finally{Li(-1),Ah(s)}}function YV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function h_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];fV(e,o.selectors,!1)&&(r??=[],lr(o)?r.unshift(o):r.push(o))}return r}function ZV(n,e,t,r,i,o){let s=Bn(n,e);JV(e[qe],s,o,n.value,t,r,i)}function JV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?iu(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function XV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Lv(r,t,c,l)}}function sA(n,e,t,r,i){let o=Ct+t,s=e[ae],a=i(s,e,n,r,t);e[o]=a,va(n,!0);let c=n.type===2;return c?(ZS(e[qe],a,n),(pC()===0||ga(n))&&wa(a,e),gC()):wa(a,e),Ph()&&(!c||!Xv(n))&&u_(s,e,a,n),n}function aA(n){let e=n;return cv()?wC():(e=e.parent,va(e,!1)),e}function e2(n,e){let t=n[$o];if(!t)return;t.get(zt,null)?.(e)}function f_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],h=s[c+1],p=e.data[l];Lv(p,t[l],h,i),a=!0}if(o)for(let c of o){let l=t[c],h=e.data[c];Lv(h,l,r,i),a=!0}return a}function t2(n,e){let t=Dn(e,n),r=t[ae];n2(r,t);let i=t[Vn];i!==null&&t[cu]===null&&(t[cu]=BS(i,t[$o])),xe(18),p_(r,t,t[xt]),xe(19,t[xt])}function n2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function p_(n,e,t){Rh(e);try{let r=n.viewQuery;r!==null&&Fv(1,r,t);let i=n.template;i!==null&&iA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Go]?.finishViewCreation(n),n.staticContentQueries&&US(n,e),n.staticViewQueries&&Fv(2,n.viewQuery,t);let o=n.components;o!==null&&r2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Nh()}}function r2(n,e){for(let t=0;t<e.length;t++)t2(n,e[t])}function i2(n,e,t,r){let i=pe(null);try{let o=e.tView,a=n[se]&4096?4096:16,c=o_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[zo]=l;let h=n[Go];return h!==null&&(c[Go]=h.createEmbeddedView(o)),p_(o,c,t),c}finally{pe(i)}}function KC(n,e){return!e||e.firstChild===null||PS(n)}var QC=!1,o2=new U("");function Iu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Tn(o)),jn(o)&&cA(o,r);let s=t.type;if(s&8)Iu(n,e,t.child,r);else if(s&32){let a=a_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=rA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Mi(e[bn]);Iu(c[ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function cA(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&Iu(r[ae],r,i,e)}n[Oi]!==n[Vn]&&e.push(n[Oi])}function uA(n){if(n[Wo]!==null){for(let e of n[Wo])e.impl.addSequence(e);n[Wo].length=0}}var lA=[];function s2(n){return n[hn]??a2(n)}function a2(n){let e=lA.pop()??Object.create(u2);return e.lView=n,e}function c2(n){n.lView[hn]!==n&&(n.lView=null,lA.push(n))}var u2=oe(F({},Ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ya(n.lView)},consumerOnSignalRead(){this.lView[hn]=this}});function l2(n){let e=n[hn]??Object.create(d2);return e.lView=n,e}var d2=oe(F({},Ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Mi(n.lView);for(;e&&!dA(e[ae]);)e=Mi(e);e&&ov(e)},consumerOnSignalRead(){this.lView[hn]=this}});function dA(n){return n.type!==2}function hA(n){if(n[lu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[lu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[se]&8192)}}var h2=100;function g_(n,e=0){let r=n[cr].rendererFactory,i=!1;i||r.begin?.();try{f2(n,e)}finally{i||r.end?.()}}function f2(n,e){let t=lv();try{dv(!0),jv(n,e);let r=0;for(;pu(n);){if(r===h2)throw new x(103,!1);r++,jv(n,1)}}finally{dv(t)}}function fA(n,e){uv(e?gu.Exhaustive:gu.OnlyDirtyViews);try{g_(n)}finally{uv(gu.Off)}}function p2(n,e,t,r){if(Ko(e))return;let i=e[se],o=!1,s=!1;Rh(e);let a=!0,c=null,l=null;o||(dA(n)?(l=s2(e),c=No(l)):Od()===null?(a=!1,l=l2(e),c=No(l)):e[hn]&&(Wc(e[hn]),e[hn]=null));try{iv(e),TC(n.bindingStartIndex),t!==null&&iA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Vh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&jh(e,y,0,null),wv(e,0)}if(s||g2(e),hA(e),pA(e,0),n.contentQueries!==null&&US(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Vh(e,y)}else{let y=n.contentHooks;y!==null&&jh(e,y,1),wv(e,1)}y2(n,e);let p=n.components;p!==null&&mA(e,p,0);let g=n.viewQuery;if(g!==null&&Fv(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Vh(e,y)}else{let y=n.viewHooks;y!==null&&jh(e,y,2),wv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[bh]){for(let y of e[bh])y();e[bh]=null}o||(uA(e),e[se]&=-73)}catch(h){throw o||ya(e),h}finally{l!==null&&(Ks(l,c),a&&c2(l)),Nh()}}function pA(n,e){for(let t=xS(n);t!==null;t=OS(t))for(let r=Jt;r<t.length;r++){let i=t[r];gA(i,e)}}function g2(n){for(let e=xS(n);e!==null;e=OS(e)){if(!(e[se]&2))continue;let t=e[hu];for(let r=0;r<t.length;r++){let i=t[r];ov(i)}}}function m2(n,e,t){xe(18);let r=Dn(e,n);gA(r,t),xe(19,r[xt])}function gA(n,e){Dh(n)&&jv(n,e)}function jv(n,e){let r=n[ae],i=n[se],o=n[hn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gc(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)p2(r,n,r.template,n[xt]);else if(i&8192){let a=pe(null);try{hA(n),pA(n,1);let c=r.components;c!==null&&mA(n,c,1),uA(n)}finally{pe(a)}}}function mA(n,e,t){for(let r=0;r<e.length;r++)m2(n,e[r],t)}function y2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Li(~i);else{let o=i,s=t[++r],a=t[++r];SC(s,o);let c=e[o];xe(24,c),a(2,c),xe(25,c)}}}finally{Li(-1)}}function m_(n,e){let t=lv()?64:1088;for(n[cr].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=Mi(n);if(ma(n)&&!r)return n;n=r}return null}function yA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function v2(n,e,t,r=!0){let i=e[ae];if(_2(i,e,n,t),r){let s=Vv(t,n),a=e[qe],c=a.parentNode(n[Oi]);c!==null&&NV(i,n[In],a,e,c,s)}let o=e[cu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Bv(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[zo];i!==null&&i!==n&&c_(i,r),e>0&&(n[t-1][wn]=r[wn]);let o=ou(n,Jt+e);RV(r[ae],r);let s=o[Go];s!==null&&s.detachView(o[ae]),r[Dt]=null,r[wn]=null,r[se]&=-129}return r}function _2(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][wn]=e),r<o-Jt?(e[wn]=t[i],zy(t,Jt+r,e)):(t.push(e),e[wn]=null),e[Dt]=t;let s=e[zo];s!==null&&t!==s&&vA(s,e);let a=e[Go];a!==null&&a.insertView(n),Ch(e),e[se]|=128}function vA(n,e){let t=n[hu],r=e[Dt];if(ur(r))n[se]|=2;else{let i=r[Dt][bn];e[bn]!==i&&(n[se]|=2)}t===null?n[hu]=[e]:t.push(e)}var ji=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ae];return Iu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[xt]}set context(e){this._lView[xt]=e}get destroyed(){return Ko(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(jn(e)){let t=e[du],r=t?t.indexOf(this):-1;r>-1&&(Bv(e,r),ou(t,r))}this._attachedToViewContainer=!1}nA(this._lView[ae],this._lView)}onDestroy(e){sv(this._lView,e)}markForCheck(){m_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Ch(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,g_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[$o].get(o2,QC)}catch{this.exhaustive=QC}}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ma(this._lView),t=this._lView[zo];t!==null&&!e&&c_(t,this._lView),tA(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e;let t=ma(this._lView),r=this._lView[zo];r!==null&&!t&&vA(r,this._lView),Ch(this._lView)}};var Su=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=E2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=i2(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ji(o)}}return n})();function E2(){return _A(St(),Me())}function _A(n,e){return n.type&4?new Su(e,n,of(n,e)):null}function y_(n,e,t,r,i){let o=n.data[e];if(o===null)o=w2(n,e,t,r,i),CC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=EC();o.injectorIndex=s===null?-1:s.injectorIndex}return va(o,!0),o}function w2(n,e,t,r,i){let o=av(),s=cv(),a=s?o:o&&o.parent,c=n.data[e]=b2(n,a,t,e,r,i);return I2(n,c,o,s),c}function I2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function b2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HJ=new RegExp(`^(\\d+)*(${ZL}|${YL})*(.*)`);var T2=()=>null;function YC(n,e){return T2(n,e)}var EA=class{},pf=class{},Uv=class{resolveComponentFactory(e){throw new x(917,!1)}},Au=class{static NULL=new Uv},Gr=class{},gr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>D2()}return n})();function D2(){let n=Me(),e=St(),t=Dn(e.index,n);return(ur(t)?t:n)[qe]}var wA=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>null})}return n})();var Bh={},$v=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Bh,r);return i!==Bh||t===Bh?i:this.parentInjector.get(e,t,r)}};function ZC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=My(i,a);else if(o==2){let c=a,l=e[++s];r=My(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ge(n,e=0){let t=Me();if(t===null)return Y(n,e);let r=St();return RS(r,t,Tt(n),e)}function v_(){let n="invalid";throw new Error(n)}function IA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(s);break}A2(n,e,t,a,o,c,l)}o!==null&&r!==null&&C2(t,r,o)}function C2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new x(-301,!1);r.push(e[i],o)}}function S2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function A2(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let y=r[g];!c&&lr(y)&&(c=!0,S2(n,t,g)),Pv(qh(t,e),n,y.type)}x2(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=XS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=wu(t.mergedAttrs,y.hostAttrs),N2(n,t,e,p,y),k2(p,y,i),s!==null&&s.has(y)){let[R,S]=s.get(y);t.directiveToIndex.set(y.type,[p,R+t.directiveStart,S+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let I=y.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}R2(n,t,o)}function R2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))JC(0,e,i,r),JC(1,e,i,r),eS(e,r,!1);else{let o=t.get(i);XC(0,e,o,r),XC(1,e,o,r),eS(e,r,!0)}}}function JC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),bA(e,o)}}function XC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),bA(e,s)}}function bA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function eS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||r_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function N2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ni(i.type,!0)),s=new Zo(o,lr(i),ge,null);n.blueprint[r]=s,t[r]=s,M2(n,e,r,XS(n,t,i.hostVars,Qr),i)}function M2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;P2(s)!=a&&s.push(a),s.push(t,r,o)}}function P2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function k2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;lr(e)&&(t[""]=n)}}function x2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function __(n,e,t,r,i,o,s,a){let c=e[ae],l=c.consts,h=fu(l,s),p=y_(c,n,t,r,h);return o&&IA(c,e,p,fu(l,a),i),p.mergedAttrs=wu(p.mergedAttrs,p.attrs),p.attrs!==null&&ZC(p,p.attrs,!1),p.mergedAttrs!==null&&ZC(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function E_(n,e){ES(n,e),ev(e)&&n.queries.elementEnd(e)}function w_(n){return DA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function DA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function O2(n,e,t){return n[e]=t}function Ta(n,e,t){if(t===Qr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Tv(n,e,t){return function r(i){let o=Fi(n)?Dn(n.index,e):e;m_(o,5);let s=e[xt],a=tS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=tS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function tS(n,e,t,r){let i=pe(null);try{return xe(6,e,t),t(r)!==!1}catch(o){return e2(n,o),!1}finally{xe(7,e,t),pe(i)}}function F2(n,e,t,r,i,o,s,a){let c=ga(n),l=!1,h=null;if(!r&&c&&(h=L2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Bn(n,t),g=r?r(p):p;XL(t,g,o,a);let y=i.listen(g,o,a),I=r?R=>r(Tn(R[n.index])):n.index;CA(I,e,t,o,a,y,!1)}return l}function L2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[fa],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function CA(n,e,t,r,i,o,s){let a=e.firstCreatePass?fC(e):null,c=hC(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function nS(n,e,t,r,i,o){let s=e[t],a=e[ae],l=a.data[t].outputs[r],p=s[l].subscribe(o);CA(n.index,a,e,i,o,p,!0)}var Hv=Symbol("BINDING");var Qh=class extends Au{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zr(e);return new Jo(t,this.ngModule)}};function V2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&df.SignalBased)!==0};return i&&(o.transform=i),o})}function j2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function B2(n,e,t){let r=e instanceof Be?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $v(t,r):t}function U2(n){let e=n.get(Gr,null);if(e===null)throw new x(407,!1);let t=n.get(wA,null),r=n.get(Hr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function $2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return QS(e,t,t==="svg"?aC:t==="math"?cC:null)}var Jo=class extends pf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=V2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=j2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){xe(22);let a=pe(null);try{let c=this.componentDef,l=H2(r,c,s,o),h=B2(c,i||this.ngModule,e),p=U2(h),g=p.rendererFactory.createRenderer(null,c),y=r?$V(g,r,c.encapsulation,h):$2(c,g),I=s?.some(rS)||o?.some(P=>typeof P!="function"&&P.bindings.some(rS)),R=o_(null,l,null,512|JS(c),null,null,p,g,h,null,BS(y,h,!0));R[Ct]=y,Rh(R);let S=null;try{let P=__(Ct,R,2,"#host",()=>l.directiveRegistry,!0,0);y&&(ZS(g,y,P),wa(y,R)),ff(l,R,P),e_(l,P,R),E_(l,P),t!==void 0&&q2(P,this.ngContentSelectors,t),S=Dn(P.index,R),R[xt]=S[xt],p_(l,R,null)}catch(P){throw S!==null&&xv(S),xv(R),P}finally{xe(23),Nh()}return new Yh(this.componentType,R,!!I)}finally{pe(a)}}};function H2(n,e,t,r){let i=n?["ng-version","20.1.7"]:vV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Hv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Hv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Ky(p);c.push(g)}return i_(0,null,z2(o,s),1,a,c,null,null,null,[i],null)}function z2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function rS(n){let e=n[Hv].kind;return e==="input"||e==="twoWay"}var Yh=class extends EA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Th(t[ae],Ct),this.location=of(this._tNode,t),this.instance=Dn(this._tNode.index,t)[xt],this.hostView=this.changeDetectorRef=new ji(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=f_(r,i[ae],i,e,t);this.previousInputValues.set(e,t);let s=Dn(r.index,i);m_(s,1)}get injector(){return new Yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ts=(()=>{class n{static __NG_ELEMENT_ID__=G2}return n})();function G2(){let n=St();return K2(n,Me())}var W2=ts,SA=class extends W2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return of(this._hostTNode,this._hostLView)}get injector(){return new Yo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yv(this._hostTNode,this._hostLView);if(bS(e)){let t=Hh(e,this._hostLView),r=$h(e),i=t[ae].data[r+8];return new Yo(i,t)}else return new Yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=iS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=YC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,KC(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!DL(e),l;if(c)l=t;else{let S=t||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,a=S.bindings}let h=c?e:new Jo(zr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let P=(c?p:this.parentInjector).get(Be,null);P&&(o=P)}let g=zr(h.componentType??{}),y=YC(this._lContainer,g?.id??null),I=y?.firstChild??null,R=h.create(p,i,I,o,s,a);return this.insertImpl(R.hostView,l,KC(this._hostTNode,y)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(uC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Dt],l=new SA(c,c[In],c[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return v2(s,i,o,r),e.attachToViewContainerRef(),zy(Dv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=iS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bv(this._lContainer,t);r&&(ou(Dv(this._lContainer),t),nA(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bv(this._lContainer,t);return r&&ou(Dv(this._lContainer),t)!=null?new ji(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function iS(n){return n[du]}function Dv(n){return n[du]||(n[du]=[])}function K2(n,e){let t,r=e[n.index];return jn(r)?t=r:(t=yA(r,e,null,n),e[n.index]=t,s_(e,t)),Y2(t,e,n,r),new SA(t,n,e)}function Q2(n,e){let t=n[qe],r=t.createComment(""),i=Bn(e,n),o=t.parentNode(i);return Kh(t,o,r,t.nextSibling(i),!1),r}var Y2=X2,Z2=()=>!1;function J2(n,e,t){return Z2(n,e,t)}function X2(n,e,t,r){if(n[Oi])return;let i;t.type&8?i=Tn(r):i=Q2(e,t),n[Oi]=i}var oS=new Set;function Ui(n){oS.has(n)||(oS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Xo=class{},gf=class{};var Zh=class extends Xo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Qh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Wy(e);this._bootstrapComponents=WS(o.bootstrap),this._r3Injector=gv(e,t,[{provide:Xo,useValue:this},{provide:Au,useValue:this.componentFactoryResolver},...r],$r(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jh=class extends gf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zh(this.moduleType,e,[])}};var bu=class extends Xo{injector;componentFactoryResolver=new Qh(this);instance=null;constructor(e){super();let t=new Bo([...e.providers,{provide:Xo,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],e.parent||au(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Da(n,e,t=null){return new bu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var e4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Qy(!1,t.type),i=r.length>0?Da([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(Y(Be))})}return n})();function qt(n){return ba(()=>{let e=AA(n),t=oe(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(e4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,styles:n.styles||un,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ui("NgStandalone"),RA(t);let r=n.dependencies;return t.directiveDefs=sS(r,t4),t.pipeDefs=sS(r,eC),t.id=i4(t),t})}function t4(n){return zr(n)||Ky(n)}function Cn(n){return ba(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function n4(n,e){if(n==null)return ki;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=df.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function r4(n){if(n==null)return ki;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ge(n){return ba(()=>{let e=AA(n);return RA(e),e})}function I_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function AA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ki,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:n4(n.inputs,e),outputs:r4(n.outputs),debugInfo:null}}function RA(n){n.features?.forEach(e=>e(n))}function sS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function i4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function o4(n){return Object.getPrototypeOf(n.prototype).constructor}function Sn(n){let e=o4(n.type),t=!0,r=[n];for(;e;){let i;if(lr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Cv(n.inputs),s.declaredInputs=Cv(n.declaredInputs),s.outputs=Cv(n.outputs);let a=i.hostBindings;a&&l4(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&c4(n,c),l&&u4(n,l),s4(n,i),WD(n.outputs,i.outputs),lr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Sn&&(t=!1)}}e=Object.getPrototypeOf(e)}a4(r)}function s4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function a4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=wu(i.hostAttrs,t=wu(t,i.hostAttrs))}}function Cv(n){return n===ki?{}:n===un?[]:n}function c4(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function u4(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function l4(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function d4(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=wu(n.mergedAttrs,n.attrs);let h=n.tView=i_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),va(n,!1);let c=f4(t,e,n,r);Ph()&&u_(t,e,c,n),wa(c,e);let l=yA(c,e,c,n);e[r+Ct]=l,s_(e,l),J2(l,n,e)}function h4(n,e,t,r,i,o,s,a,c,l,h){let p=t+Ct,g;return e.firstCreatePass?(g=y_(e,p,4,s||null,a||null),Sh()&&IA(e,n,g,fu(e.consts,l),h_),ES(e,g)):g=e.data[p],d4(g,n,e,t,r,i,o,c),ga(g)&&ff(e,n,g),l!=null&&d_(n,g,h),g}function fn(n,e,t,r,i,o,s,a){let c=Me(),l=Ht(),h=fu(l.consts,o);return h4(c,l,n,e,t,r,i,h,void 0,s,a),fn}var f4=p4;function p4(n,e,t,r){return yu(!0),e[qe].createComment("")}var mf=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(mf||{}),ns=new U(""),NA=!1,zv=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,oC()&&(this.destroyRef=N(Un,{optional:!0})??void 0,this.pendingTasks=N(hr,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ct=zv;function MA(n){let e,t;function r(){n=vu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function aS(n){return queueMicrotask(()=>n()),()=>{n=vu}}var b_="isAngularZone",Xh=b_+"_ID",g4=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ct(!1);onMicrotaskEmpty=new ct(!1);onStable=new ct(!1);onError=new ct(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=NA}=e;if(typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,v4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(b_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,m4,vu,vu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},m4={};function T_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function y4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MA(()=>{n.callbackScheduled=!1,qv(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),qv(n)}function v4(n){let e=()=>{y4(n)},t=g4++;n._inner=n._inner.fork({name:"angular",properties:{[b_]:!0,[Xh]:t,[Xh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(_4(c))return r.invokeTask(o,s,a,c);try{return cS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),uS(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return cS(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!E4(c)&&e(),uS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,qv(n),T_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function qv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uS(n){n._nesting--,T_(n)}var ef=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ct;onMicrotaskEmpty=new ct;onStable=new ct;onError=new ct;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function _4(n){return PA(n,"__ignore_ng_zone__")}function E4(n){return PA(n,"__scheduler_tick__")}function PA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var D_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),kA=[0,1,2,3],xA=(()=>{class n{ngZone=N(Ce);scheduler=N(Hr);errorHandler=N(Fn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(ns,{optional:!0})}execute(){let t=this.sequences.size>0;t&&xe(16),this.executing=!0;for(let r of kA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&xe(17)}register(t){let{view:r}=t;r!==void 0?((r[Wo]??=[]).push(t),ya(r),r[se]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(mf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),tf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Wo];e&&(this.view[Wo]=e.filter(t=>t!==this))}};function Ru(n,e){let t=e?.injector??N(Je);return Ui("NgAfterNextRender"),I4(n,t,e,!0)}function w4(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function I4(n,e,t,r){let i=e.get(D_);i.impl??=e.get(xA);let o=e.get(ns,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Un):null,a=e.get(xh,null,{optional:!0}),c=new tf(i.impl,w4(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var C_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var S_=new U("");function Yr(n){return!!n&&typeof n.then=="function"}function yf(n){return!!n&&typeof n.subscribe=="function"}var A_=new U("");function vf(n){return dn([{provide:A_,multi:!0,useValue:n}])}var R_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(A_,{optional:!0})??[];injector=N(Je);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ue(this.injector,i);if(Yr(o))t.push(o);else if(yf(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nu=new U("");function OA(){ty(()=>{let n="";throw new x(600,n)})}function FA(n){return n.isBoundToModule}var b4=10;var Zr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(zt);afterRenderManager=N(D_);zonelessEnabled=N(kh);rootEffectScheduler=N(Ev);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ot;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(hr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(X(t=>!t))}constructor(){N(ns,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(Be);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Je.NULL){return this._injector.get(Ce).run(()=>{xe(10);let s=t instanceof pf;if(!this._injector.get(R_).done){let I="";throw new x(405,I)}let c;s?c=t:c=this._injector.get(Au).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=FA(c)?void 0:this._injector.get(Xo),h=r||c.selector,p=c.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(S_,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Eu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),xe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(mf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new x(101,!1);let t=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(t),this.afterTick.next(),xe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Gr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<b4;)xe(14),this.synchronizeOnce(),xe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!pu(i))continue;let o=r&&!this.zonelessEnabled?0:1;g_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>pu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Eu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Nu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Eu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ca(n,e,t,r){let i=Me(),o=mu();if(Ta(i,o,e)){let s=Ht(),a=Mh();ZV(a,i,n,e,t,r)}return Ca}function vt(n,e,t){let r=Me(),i=mu();if(Ta(r,i,e)){let o=Ht(),s=Mh();oA(s,r,n,e,r[qe],t)}return vt}function lS(n,e,t,r,i){f_(e,n,t,i?"class":"style",r)}function j(n,e,t,r){let i=Me(),o=i[ae],s=n+Ct,a=o.firstCreatePass?__(s,i,2,e,h_,Sh(),t,r):o.data[s];if(sA(a,i,n,e,T4),ga(a)){let c=i[ae];ff(c,i,a),e_(c,a,i)}return r!=null&&d_(i,a),j}function B(){let n=Ht(),e=St(),t=aA(e);return n.firstCreatePass&&E_(n,t),vC(t)&&_C(),mC(),t.classesWithoutHost!=null&&ML(t)&&lS(n,t,Me(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&PL(t)&&lS(n,t,Me(),t.stylesWithoutHost,!1),B}function en(n,e,t,r){return j(n,e,t,r),B(),en}var T4=(n,e,t,r,i)=>(yu(!0),QS(e[qe],r,xC()));function _f(n,e,t){let r=Me(),i=r[ae],o=n+Ct,s=i.firstCreatePass?__(o,r,8,"ng-container",h_,Sh(),e,t):i.data[o];if(sA(s,r,n,"ng-container",D4),ga(s)){let a=r[ae];ff(a,r,s),e_(a,s,r)}return t!=null&&d_(r,s),_f}function Ef(){let n=Ht(),e=St(),t=aA(e);return n.firstCreatePass&&E_(n,t),Ef}var D4=(n,e,t,r,i)=>(yu(!0),wV(e[qe],""));function zn(){return Me()}var Mu="en-US";var C4=Mu;function LA(n){typeof n=="string"&&(C4=n.toLowerCase().replace(/_/g,"-"))}function ie(n,e,t){let r=Me(),i=Ht(),o=St();return VA(i,r,r[qe],o,n,e,t),ie}function VA(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Tv(r,e,o),F2(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];c??=Tv(r,e,o),nS(r,e,g,y,i,c)}if(l&&l.length)for(let p of l)c??=Tv(r,e,o),nS(r,e,p,i,i,c)}}function We(n=1){return kC(n)}function N_(n){let e=IC();return nv(e,Ct+n)}function Lh(n,e){return n<<17|e<<2}function es(n){return n>>17&32767}function S4(n){return(n&2)==2}function A4(n,e){return n&131071|e<<17}function Gv(n){return n|2}function Ia(n){return(n&131068)>>2}function Sv(n,e){return n&-131069|e<<2}function R4(n){return(n&1)===1}function Wv(n){return n|1}function N4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=es(s),c=Ia(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ha(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let g=es(n[a+1]);n[r+1]=Lh(g,a),g!==0&&(n[g+1]=Sv(n[g+1],r)),n[a+1]=A4(n[a+1],r)}else n[r+1]=Lh(a,0),a!==0&&(n[a+1]=Sv(n[a+1],r)),a=r;else n[r+1]=Lh(c,0),a===0?a=r:n[c+1]=Sv(n[c+1],r),c=r;l&&(n[r+1]=Gv(n[r+1])),dS(n,h,r,!0),dS(n,h,r,!1),M4(e,h,n,r,o),s=Lh(a,c),o?e.classBindings=s:e.styleBindings=s}function M4(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ha(o,e)>=0&&(t[r+1]=Wv(t[r+1]))}function dS(n,e,t,r){let i=n[t+1],o=e===null,s=r?es(i):Ia(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];P4(c,e)&&(a=!0,n[s+1]=r?Wv(l):Gv(l)),s=r?es(l):Ia(l)}a&&(n[t+1]=r?Gv(i):Wv(i))}function P4(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ha(n,e)>=0:!1}function pn(n,e){return k4(n,e,null,!0),pn}function k4(n,e,t,r){let i=Me(),o=Ht(),s=DC(2);if(o.firstUpdatePass&&O4(o,n,s,r),e!==Qr&&Ta(i,s,e)){let a=o.data[Qo()];B4(o,a,i,i[qe],n,i[s+1]=U4(e,t),r,s)}}function x4(n,e){return e>=n.expandoStartIndex}function O4(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Qo()],s=x4(n,t);$4(o,r)&&e===null&&!s&&(e=!1),e=F4(i,o,e,r),N4(i,o,e,t,s,r)}}function F4(n,e,t,r){let i=RC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Av(null,n,e,t,r),t=Tu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Av(i,n,e,t,r),o===null){let c=L4(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Av(null,n,e,c[1],r),c=Tu(c,e.attrs,r),V4(n,e,r,c))}else o=j4(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function L4(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ia(r)!==0)return n[es(r)]}function V4(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[es(i)]=r}function j4(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Tu(r,s,t)}return Tu(r,e.attrs,t)}function Av(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Tu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Tu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),XD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function B4(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=R4(l)?hS(c,e,t,i,Ia(l),s):void 0;if(!nf(h)){nf(o)||S4(l)&&(o=hS(c,null,t,i,a,s));let p=tv(Qo(),t);UV(r,s,p,i,o)}}function hS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=t[i+1];g===Qr&&(g=p?un:void 0);let y=p?Ih(g,r):h===r?g:void 0;if(l&&!nf(y)&&(y=Ih(c,r)),nf(y)&&(a=y,s))return a;let I=n[i+1];i=s?es(I):Ia(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ih(c,r))}return a}function nf(n){return n!==void 0}function U4(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$r(Cu(n)))),n}function $4(n,e){return(n.flags&(e?8:16))!==0}function K(n,e=""){let t=Me(),r=Ht(),i=n+Ct,o=r.firstCreatePass?y_(r,i,1,e,null):r.data[i],s=H4(r,t,o,e,n);t[i]=s,Ph()&&u_(r,t,s,o),va(o,!1)}var H4=(n,e,t,r,i)=>(yu(!0),_V(e[qe],r));function z4(n,e,t,r=""){return Ta(n,mu(),t)?e+iu(t)+r:Qr}function qn(n){return Gn("",n),qn}function Gn(n,e,t){let r=Me(),i=z4(r,n,e,t);return i!==Qr&&q4(r,Qo(),i),Gn}function q4(n,e,t){let r=tv(e,n);EV(n[qe],r,t)}function tn(n,e,t){yv(e)&&(e=e());let r=Me(),i=mu();if(Ta(r,i,e)){let o=Ht(),s=Mh();oA(s,r,n,e,r[qe],t)}return tn}function gn(n,e){let t=yv(n);return t&&n.set(e),t}function nn(n,e){let t=Me(),r=Ht(),i=St();return VA(r,t,t[qe],i,n,e),nn}function G4(n,e,t){let r=Ht();if(r.firstCreatePass){let i=lr(n);Kv(t,r.data,r.blueprint,i,!0),Kv(e,r.data,r.blueprint,i,!1)}}function Kv(n,e,t,r,i){if(n=Tt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Kv(n[o],e,t,r,i);else{let o=Ht(),s=Me(),a=St(),c=jo(n)?n:Tt(n.provide),l=Zy(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(jo(n)||!n.multi){let y=new Zo(l,i,ge,null),I=Nv(c,e,i?h:h+g,p);I===-1?(Pv(qh(a,s),o,c),Rv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=Nv(c,e,h+g,p),I=Nv(c,e,h,h+g),R=y>=0&&t[y],S=I>=0&&t[I];if(i&&!S||!i&&!R){Pv(qh(a,s),o,c);let P=Q4(i?K4:W4,t.length,i,r,l,n);!i&&S&&(t[I].providerFactory=P),Rv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=jA(t[i?I:y],l,!i&&r);Rv(o,n,y>-1?y:I,P)}!i&&r&&S&&t[I].componentProviders++}}}function Rv(n,e,t,r){let i=jo(e),o=iC(e);if(i||o){let c=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function jA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Nv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function W4(n,e,t,r,i){return Qv(this.multi,[])}function K4(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Gh(r,r[ae],this.providerFactory.index,i);s=c.slice(0,a),Qv(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Qv(o,s);return s}function Qv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Q4(n,e,t,r,i,o){let s=new Zo(n,t,ge,null);return s.multi=[],s.index=e,s.componentProviders=0,jA(s,i,r&&!t),s}function $i(n,e=[]){return t=>{t.providersResolver=(r,i)=>G4(r,i?i(n):n,e)}}function Y4(n,e){let t=n[e];return t===Qr?void 0:t}function Z4(n,e,t,r,i,o){let s=e+t;return Ta(n,s,i)?O2(n,s+1,o?r.call(o,i):r(i)):Y4(n,s+1)}function Hi(n,e){let t=Ht(),r,i=n+Ct;t.firstCreatePass?(r=J4(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ni(r.type,!0)),s,a=$t(ge);try{let c=zh(!1),l=o();return zh(c),rv(t,Me(),i,l),l}finally{$t(a)}}function J4(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function zi(n,e,t){let r=n+Ct,i=Me(),o=nv(i,r);return X4(i,r)?Z4(i,bC(),e,o.transform,t,o):o.transform(t)}function X4(n,e){return n[ae].data[e].pure}function M_(n,e){return _A(n,e)}var rf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},P_=(()=>{class n{compileModuleSync(t){return new Jh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Wy(t),o=WS(i.declarations).reduce((s,a)=>{let c=zr(a);return c&&s.push(new Jo(c)),s},[]);return new rf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ej=(()=>{class n{zone=N(Ce);changeDetectionScheduler=N(Hr);applicationRef=N(Zr);applicationErrorHandler=N(zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BA({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(oe(F({},UA()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:xi,multi:!0,useFactory:()=>{let r=N(ej,{optional:!0});return()=>r.initialize()}},{provide:xi,multi:!0,useFactory:()=>{let r=N(tj);return()=>{r.initialize()}}},e===!0?{provide:vv,useValue:!0}:[],{provide:_v,useValue:t??NA},{provide:zt,useFactory:()=>{let r=N(Ce),i=N(Be),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Fn),o.handleError(s))})}}}]}function UA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tj=(()=>{class n{subscription=new Ze;initialized=!1;zone=N(Ce);pendingTasks=N(hr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $A=(()=>{class n{applicationErrorHandler=N(zt);appRef=N(Zr);taskService=N(hr);ngZone=N(Ce);zonelessEnabled=N(kh);tracing=N(ns,{optional:!0});disableScheduling=N(vv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(_v,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ef||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?aS:MA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nj(){return typeof $localize<"u"&&$localize.locale||Mu}var wf=new U("",{providedIn:"root",factory:()=>N(wf,{optional:!0,skipSelf:!0})||nj()});function rn(n){return zD(n)}function Sa(n,e){return Vd(n,e?.equal)}var HA=class{[kt];constructor(e){this[kt]=e}destroy(){this[kt].destroy()}};var KA=Symbol("InputSignalNode#UNSET"),_j=oe(F({},jd),{transformFn:void 0,applyValueToInputSignal(n,e){Ys(n,e)}});function QA(n,e){let t=Object.create(_j);t.value=n,t.transformFn=e?.transform;function r(){if(Ws(t),t.value===KA){let i=null;throw new x(-950,i)}return t.value}return r[kt]=t,r}var bf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Du(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Ej=new U("");Ej.__NG_ELEMENT_ID__=n=>{let e=St();if(e===null)throw new x(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new x(204,!1)};function zA(n,e){return QA(n,e)}function wj(n){return QA(KA,n)}var YA=(zA.required=wj,zA);var rs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ZA=new rs("20.1.7");var k_=new U(""),Ij=new U("");function Pu(n){return!n.moduleRef}function bj(n){let e=Pu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{Pu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(k_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(k_);s.add(o),n.moduleRef.onDestroy(()=>{Eu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Dj(r,t,()=>{let o=e.get(hr),s=o.add(),a=e.get(R_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(wf,Mu);if(LA(c||Mu),!e.get(Ij,!0))return Pu(n)?e.get(Zr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pu(n)){let h=e.get(Zr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Tj?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Tj;function Dj(n,e,t){try{let r=t();return Yr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var If=null;function Cj(n=[],e){return Je.create({name:e,providers:[{provide:su,useValue:"platform"},{provide:k_,useValue:new Set([()=>If=null])},...n]})}function Sj(n=[]){if(If)return If;let e=Cj(n);return If=e,OA(),Aj(e),e}function Aj(n){let e=n.get(af,null);Ue(n,()=>{e?.forEach(t=>t())})}function V_(){return!1}var Jr=(()=>{class n{static __NG_ELEMENT_ID__=Rj}return n})();function Rj(n){return Nj(St(),Me(),(n&16)===16)}function Nj(n,e,t){if(Fi(n)&&!t){let r=Dn(n.index,e);return new ji(r,r)}else if(n.type&175){let r=e[bn];return new ji(r,e)}return null}var x_=class{constructor(){}supports(e){return w_(e)}create(e){return new O_(e)}},Mj=(n,e)=>e,O_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Mj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<qA(r,i,o)?t:r,a=qA(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;h<=I&&I<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!w_(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,TA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new F_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Tf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Tf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},F_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},L_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Tf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new L_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function GA(){return new j_([new x_])}var j_=(()=>{class n{factories;static \u0275prov=$({token:n,providedIn:"root",factory:GA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||GA()),deps:[[n,new gS,new Xt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new x(901,!1)}}return n})();function JA(n){xe(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Sj(r),o=[BA({}),{provide:Hr,useExisting:$A},FC,...t||[]],s=new bu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return bj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{xe(9)}}function qi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function XA(n){let e=zr(n);if(!e)return null;let t=new Jo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var nR=null;function An(){return nR}function B_(n){nR??=n}var ku=class{},xu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(rR),providedIn:"platform"})}return n})(),U_=new U(""),rR=(()=>{class n extends xu{_location;_history;_doc=N($e);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return An().getBaseHref(this._doc)}onPopState(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Df(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function eR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Wn(n){return n&&n[0]!=="?"?`?${n}`:n}var Kn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(Sf),providedIn:"root"})}return n})(),Cf=new U(""),Sf=(()=>{class n extends Kn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Df(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(xu),Y(Cf,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gi=(()=>{class n{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=xj(eR(tR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wn(r))}normalize(t){return n.stripTrailingSlash(kj(this._basePath,tR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wn;static joinWithSlash=Df;static stripTrailingSlash=eR;static \u0275fac=function(r){return new(r||n)(Y(Kn))};static \u0275prov=$({token:n,factory:()=>Pj(),providedIn:"root"})}return n})();function Pj(){return new Gi(Y(Kn))}function kj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function tR(n){return n.replace(/\/index.html$/,"")}function xj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var z_=(()=>{class n extends Kn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Df(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(xu),Y(Cf,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var Af=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ra=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Af(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),iR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);iR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ge(ts),ge(Su),ge(j_))};static \u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function iR(n,e){n.context.$implicit=e.item}var Ou=(()=>{class n{_viewContainer;_context=new Rf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ge(ts),ge(Su))};static \u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Rf=class{$implicit=null;ngIf=null};function oR(n,e){if(n&&!n.createEmbeddedView)throw new x(2020,!1)}function Oj(n,e){return new x(2100,!1)}var $_=class{createSubscription(e,t,r){return rn(()=>e.subscribe({next:t,error:r}))}dispose(e){rn(()=>e.unsubscribe())}},H_=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Fj=new H_,Lj=new $_,q_=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=N(zt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Yr(t))return Fj;if(yf(t))return Lj;throw Oj(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ge(Jr,16))};static \u0275pipe=I_({name:"async",type:n,pure:!1})}return n})();var Rn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cn({type:n});static \u0275inj=ln({})}return n})();function Fu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var is=class{};var sR="browser";var aR=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new G_(N($e),window)})}return n})(),G_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(oe(F({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Vj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Pi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(oe(F({},t),{left:i-s[0],top:o-s[1]}))}};function Vj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Mf=new U(""),J_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Y(Mf),Y(Ce))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Lu=class{_doc;constructor(e){this._doc=e}manager},K_="ng-app-id";function cR(n){for(let e of n)e.remove()}function uR(n,e){let t=e.createElement("style");return t.textContent=n,t}function jj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${K_}="${e}"],link[${K_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(K_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Y_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var X_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,jj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,uR);r?.forEach(i=>this.addUsage(i,this.external,Y_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(cR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])cR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,uR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Y_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Y($e),Y(sf),Y(uf,8),Y(Bi))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Q_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},eE=/%COMP%/g;var dR="%COMP%",Bj=`_nghost-${dR}`,Uj=`_ngcontent-${dR}`,$j=!0,Hj=new U("",{providedIn:"root",factory:()=>$j});function zj(n){return Uj.replace(eE,n)}function qj(n){return Bj.replace(eE,n)}function hR(n,e){return e.map(t=>t.replace(eE,n))}var Bu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Vu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Nf?i.applyToHost(t):i instanceof ju&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case qr.Emulated:o=new Nf(c,l,r,this.appId,h,s,a,p,g);break;case qr.ShadowDom:return new Z_(c,l,t,r,s,a,this.nonce,p,g);default:o=new ju(c,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Y(J_),Y(X_),Y(sf),Y(Hj),Y($e),Y(Bi),Y(Ce),Y(uf),Y(ns,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Vu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Q_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Q_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Q_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pr.DashCase|pr.Important)?e.style.setProperty(t,r,i&pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new x(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function lR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Z_=class extends Vu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=hR(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Y_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ju=class extends Vu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?hR(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Nf=class extends ju{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,l,h),this.contentAttr=zj(h),this.hostAttr=qj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Pf=class n extends ku{supportsDOMEvents=!0;static makeCurrent(){B_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Gj();return t==null?null:Wj(t)}resetBaseElement(){Uu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fu(document.cookie,e)}},Uu=null;function Gj(){return Uu=Uu||document.head.querySelector("base"),Uu?Uu.getAttribute("href"):null}function Wj(n){return new URL(n,document.baseURI).pathname}var Kj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),pR=(()=>{class n extends Lu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Y($e))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),fR=["alt","control","meta","shift"],Qj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gR=(()=>{class n extends Lu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),fR.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Qj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fR.forEach(s=>{if(s!==i){let a=Yj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Y($e))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function tE(n,e){let t=F({rootComponent:n},Zj(e));return JA(t)}function Zj(n){return{appProviders:[...nB,...n?.providers??[]],platformProviders:tB}}function Jj(){Pf.makeCurrent()}function Xj(){return new Fn}function eB(){return Jv(document),document}var tB=[{provide:Bi,useValue:sR},{provide:af,useValue:Jj,multi:!0},{provide:$e,useFactory:eB}];var nB=[{provide:su,useValue:"root"},{provide:Fn,useFactory:Xj},{provide:Mf,useClass:pR,multi:!0,deps:[$e]},{provide:Mf,useClass:gR,multi:!0,deps:[$e]},Bu,X_,J_,{provide:Gr,useExisting:Bu},{provide:is,useClass:Kj},[]];var Ma=class{},zu=class{},os=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var xf=class{encodeKey(e){return mR(e)}encodeValue(e){return mR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var iB=/%(\d[a-f0-9])/gi,oB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mR(n){return encodeURIComponent(n).replace(iB,(e,t)=>oB[t]??e)}function kf(n){return`${n}`}var Wi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new xf,e.fromString){if(e.fromObject)throw new x(2805,!1);this.map=rB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(kf):[kf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(kf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(kf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Of=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function yR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vR(n){return typeof Blob<"u"&&n instanceof Blob}function _R(n){return typeof FormData<"u"&&n instanceof FormData}function aB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ER="Content-Type",wR="Accept",IR="X-Request-URL",bR="text/plain",TR="application/json",cB=`${TR}, ${bR}, */*`,$u=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(sB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new os,this.context??=new Of,!this.params)this.params=new Wi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||yR(this.body)||vR(this.body)||_R(this.body)||aB(this.body)?this.body:this.body instanceof Wi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||_R(this.body)?null:vR(this.body)?this.body.type||null:yR(this.body)?null:typeof this.body=="string"?bR:this.body instanceof Wi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?TR:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.transferCache??this.transferCache,g=e.timeout??this.timeout,y=e.body!==void 0?e.body:this.body,I=e.withCredentials??this.withCredentials,R=e.reportProgress??this.reportProgress,S=e.headers||this.headers,P=e.params||this.params,V=e.context??this.context;return e.setHeaders!==void 0&&(S=Object.keys(e.setHeaders).reduce((q,G)=>q.set(G,e.setHeaders[G]),S)),e.setParams&&(P=Object.keys(e.setParams).reduce((q,G)=>q.set(G,e.setParams[G]),P)),new n(t,r,y,{params:P,headers:S,context:V,reportProgress:R,responseType:i,withCredentials:I,transferCache:p,keepalive:o,cache:a,priority:s,timeout:g,mode:c,redirect:l,credentials:h})}},Na=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Na||{}),Pa=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new os,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ff=class n extends Pa{constructor(e={}){super(e)}type=Na.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Lf=class n extends Pa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Na.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Hu=class extends Pa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},uB=200,lB=204;function nE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect}}var dB=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof $u)o=t;else{let c;i.headers instanceof os?c=i.headers:c=new os(i.headers);let l;i.params&&(i.params instanceof Wi?l=i.params:l=new Wi({fromObject:i.params})),o=new $u(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=Z(o).pipe(ar(c=>this.handler.handle(c)));if(t instanceof $u||i.observe==="events")return s;let a=s.pipe(bt(c=>c instanceof Lf));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new x(2806,!1);return c.body}));case"blob":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new x(2807,!1);return c.body}));case"text":return a.pipe(X(c=>{if(c.body!==null&&typeof c.body!="string")throw new x(2808,!1);return c.body}));case"json":default:return a.pipe(X(c=>c.body))}case"response":return a;default:throw new x(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Wi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,nE(i,r))}post(t,r,i={}){return this.request("POST",t,nE(i,r))}put(t,r,i={}){return this.request("PUT",t,nE(i,r))}static \u0275fac=function(r){return new(r||n)(Y(Ma))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var hB=new U("");function fB(n,e){return e(n)}function pB(n,e,t){return(r,i)=>Ue(t,()=>e(r,o=>n(o,i)))}var DR=new U(""),gB=new U(""),CR=new U("",{providedIn:"root",factory:()=>!0});var Vf=(()=>{class n extends Ma{backend;injector;chain=null;pendingTasks=N(Vi);contributeToStability=N(CR);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(DR),...this.injector.get(gB,[])]));this.chain=r.reduceRight((i,o)=>pB(i,o,this.injector),fB)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Fo(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(Y(zu),Y(Be))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var mB=/^\)\]\}',?\n/,yB=RegExp(`^${IR}:`,"m");function vB(n){return"responseURL"in n&&n.responseURL?n.responseURL:yB.test(n.getAllResponseHeaders())?n.getResponseHeader(IR):null}var rE=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new x(-2800,!1);let r=this.xhrFactory;return Z(null).pipe(rt(()=>new re(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((S,P)=>s.setRequestHeader(S,P.join(","))),t.headers.has(wR)||s.setRequestHeader(wR,cB),!t.headers.has(ER)){let S=t.detectContentTypeHeader();S!==null&&s.setRequestHeader(ER,S)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let S=t.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let S=s.statusText||"OK",P=new os(s.getAllResponseHeaders()),V=vB(s)||t.url;return c=new Ff({headers:P,status:s.status,statusText:S,url:V}),c},h=()=>{let{headers:S,status:P,statusText:V,url:q}=l(),G=null;P!==lB&&(G=typeof s.response>"u"?s.responseText:s.response),P===0&&(P=G?uB:0);let Fe=P>=200&&P<300;if(t.responseType==="json"&&typeof G=="string"){let he=G;G=G.replace(mB,"");try{G=G!==""?JSON.parse(G):null}catch(b){G=he,Fe&&(Fe=!1,G={error:b,text:G})}}Fe?(o.next(new Lf({body:G,headers:S,status:P,statusText:V,url:q||void 0})),o.complete()):o.error(new Hu({error:G,headers:S,status:P,statusText:V,url:q||void 0}))},p=S=>{let{url:P}=l(),V=new Hu({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:P||void 0});o.error(V)},g=p;t.timeout&&(g=S=>{let{url:P}=l(),V=new Hu({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:P||void 0});o.error(V)});let y=!1,I=S=>{y||(o.next(l()),y=!0);let P={type:Na.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),t.responseType==="text"&&s.responseText&&(P.partialText=s.responseText),o.next(P)},R=S=>{let P={type:Na.UploadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),o.next(P)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",R)),s.send(a),o.next({type:Na.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",R)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(Y(is))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),SR=new U(""),_B="XSRF-TOKEN",EB=new U("",{providedIn:"root",factory:()=>_B}),wB="X-XSRF-TOKEN",IB=new U("",{providedIn:"root",factory:()=>wB}),qu=class{},bB=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(Y($e),Y(EB))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function TB(n,e){let t=n.url.toLowerCase();if(!N(SR)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=N(qu).getToken(),i=N(IB);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function iE(...n){let e=[dB,rE,Vf,{provide:Ma,useExisting:Vf},{provide:zu,useFactory:()=>N(hB,{optional:!0})??N(rE)},{provide:DR,useValue:TB,multi:!0},{provide:SR,useValue:!0},{provide:qu,useClass:bB}];for(let t of n)e.push(...t.\u0275providers);return dn(e)}var AR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Y($e))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",il=Symbol("RouteTitle"),uE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function cs(n){return new uE(n)}function FR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function CB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mr(n[t],e[t]))return!1;return!0}function mr(n,e){let t=n?lE(n):void 0,r=e?lE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!LR(n[i],e[i]))return!1;return!0}function lE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function VR(n){return n.length>0?n[n.length-1]:null}function Xr(n){return gy(n)?n:Yr(n)?ke(Promise.resolve(n)):Z(n)}var SB={exact:BR,subset:UR},jR={exact:AB,subset:RB,ignored:()=>!0};function RR(n,e,t){return SB[t.paths](n.root,e.root,t.matrixParams)&&jR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AB(n,e){return mr(n,e)}function BR(n,e,t){if(!ss(n.segments,e.segments)||!Uf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!BR(n.children[r],e.children[r],t))return!1;return!0}function RB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LR(n[t],e[t]))}function UR(n,e,t){return $R(n,e,e.segments,t)}function $R(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ss(i,t)||e.hasChildren()||!Uf(i,t,r))}else if(n.segments.length===t.length){if(!ss(n.segments,t)||!Uf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!UR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ss(n.segments,i)||!Uf(n.segments,i,r)||!n.children[fe]?!1:$R(n.children[fe],e,o,r)}}function Uf(n,e,t){return e.every((r,i)=>jR[t](n[i].parameters,r.parameters))}var vr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){return PB.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $f(this)}},Ki=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=cs(this.parameters),this._parameterMap}toString(){return zR(this)}};function NB(n,e){return ss(n,e)&&n.every((t,r)=>mr(t.parameters,e[r].parameters))}function ss(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function MB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var us=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new Qi,providedIn:"root"})}return n})(),Qi=class{parse(e){let t=new hE(e);return new vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gu(e.root,!0)}`,r=OB(e.queryParams),i=typeof e.fragment=="string"?`#${kB(e.fragment)}`:"";return`${t}${r}${i}`}},PB=new Qi;function $f(n){return n.segments.map(e=>zR(e)).join("/")}function Gu(n,e){if(!n.hasChildren())return $f(n);if(e){let t=n.children[fe]?Gu(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${Gu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=MB(n,(r,i)=>i===fe?[Gu(n.children[fe],!1)]:[`${i}:${Gu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${$f(n)}/${t[0]}`:`${$f(n)}/(${t.join("//")})`}}function HR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jf(n){return HR(n).replace(/%3B/gi,";")}function kB(n){return encodeURI(n)}function dE(n){return HR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hf(n){return decodeURIComponent(n)}function NR(n){return Hf(n.replace(/\+/g,"%20"))}function zR(n){return`${dE(n.path)}${xB(n.parameters)}`}function xB(n){return Object.entries(n).map(([e,t])=>`;${dE(e)}=${dE(t)}`).join("")}function OB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${jf(t)}=${jf(i)}`).join("&"):`${jf(t)}=${jf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var FB=/^[^\/()?;#]+/;function oE(n){let e=n.match(FB);return e?e[0]:""}var LB=/^[^\/()?;=#]+/;function VB(n){let e=n.match(LB);return e?e[0]:""}var jB=/^[^=?&#]+/;function BB(n){let e=n.match(jB);return e?e[0]:""}var UB=/^[^&#]+/;function $B(n){let e=n.match(UB);return e?e[0]:""}var hE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Re(e,t)),r}parseSegment(){let e=oE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new Ki(Hf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=VB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=oE(this.remaining);i&&(r=i,this.capture(r))}e[Hf(t)]=Hf(r)}parseQueryParam(e){let t=BB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=$B(this.remaining);s&&(r=s,this.capture(r))}let i=NR(t),o=NR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=oE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Re([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function qR(n){return n.segments.length>0?new Re([],{[fe]:n}):n}function GR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=GR(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Re(n.segments,e);return HB(t)}function HB(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Re(n.segments.concat(e.segments),e.children)}return n}function Yi(n){return n instanceof vr}function WR(n,e,t=null,r=null){let i=KR(n);return QR(i,e,t,r)}function KR(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Re(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=qR(r);return e??i}function QR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return sE(i,i,i,t,r);let o=zB(e);if(o.toRoot())return sE(i,i,new Re([],{}),t,r);let s=qB(o,i,n),a=s.processChildren?Ku(s.segmentGroup,s.index,o.commands):ZR(s.segmentGroup,s.index,o.commands);return sE(i,s.segmentGroup,a,t,r)}function zf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yu(n){return typeof n=="object"&&n!=null&&n.outlets}function sE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=YR(n,e,t);let a=qR(GR(s));return new vr(a,o,i)}function YR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=YR(o,e,t)}),new Re(n.segments,r)}var qf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zf(r[0]))throw new x(4003,!1);let i=r.find(Yu);if(i&&i!==VR(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new qf(t,e,r)}var Oa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function qB(n,e,t){if(n.isAbsolute)return new Oa(e,!0,0);if(!t)return new Oa(e,!1,NaN);if(t.parent===null)return new Oa(t,!0,0);let r=zf(n.commands[0])?0:1,i=t.segments.length-1+r;return GB(t,i,n.numberOfDoubleDots)}function GB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new Oa(r,!1,i-o)}function WB(n){return Yu(n[0])?n[0].outlets:{[fe]:n}}function ZR(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return Ku(n,e,t);let r=KB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Re(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Re(n.segments.slice(r.pathIndex),n.children),Ku(o,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?fE(n,e,t):r.match?Ku(n,0,i):fE(n,e,t)}function Ku(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=WB(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=Ku(n.children[fe],e,t);return new Re(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ZR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Re(n.segments,i)}}function KB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Yu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!PR(c,l,s))return o;r+=2}else{if(!PR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Yu(o)){let c=QB(o.outlets);return new Re(r,c)}if(i===0&&zf(t[0])){let c=n.segments[e];r.push(new Ki(c.path,MR(t[0]))),i++;continue}let s=Yu(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&zf(a)?(r.push(new Ki(s,MR(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new Re(r,{})}function QB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=fE(new Re([],{}),0,r))}),e}function MR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function PR(n,e,t){return n==t.path&&mr(e,t.parameters)}var Fa="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),yn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Zi=class extends yn{type=gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nn=class extends yn{urlAfterRedirects;type=gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Gt||{}),Va=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Va||{}),yr=class extends yn{reason;code;type=gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_r=class extends yn{reason;code;type=gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ja=class extends yn{error;target;type=gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zu=class extends yn{urlAfterRedirects;state;type=gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gf=class extends yn{urlAfterRedirects;state;type=gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wf=class extends yn{urlAfterRedirects;state;shouldActivate;type=gt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kf=class extends yn{urlAfterRedirects;state;type=gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qf=class extends yn{urlAfterRedirects;state;type=gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class{route;type=gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zf=class{route;type=gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jf=class{snapshot;type=gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xf=class{snapshot;type=gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ep=class{snapshot;type=gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tp=class{snapshot;type=gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ba=class{routerEvent;position;anchor;type=gt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ju=class{},Ua=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function YB(n){return!(n instanceof Ju)&&!(n instanceof Ua)}function ZB(n,e){return n.providers&&!n._injector&&(n._injector=Da(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qn(n){return n.outlet||fe}function JB(n,e){let t=n.filter(r=>Qn(r)===e);return t.push(...n.filter(r=>Qn(r)!==e)),t}function za(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var np=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return za(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ls(this.rootInjector)}},ls=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new np(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Y(Be))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=pE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=pE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=gE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gE(e,this._root).map(t=>t.value)}};function pE(n,e){if(n===e.value)return e;for(let t of e.children){let r=pE(n,t);if(r)return r}return null}function gE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=gE(n,t);if(r.length)return r.unshift(e),r}return[]}var mn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xu=class extends rp{snapshot;constructor(e,t){super(e),this.snapshot=t,bE(this,e)}toString(){return this.snapshot.toString()}};function JR(n){let e=XB(n),t=new st([new Ki("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Er(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new Xu(new mn(a,[]),e)}function XB(n){let e={},t={},r={},i="",o=new as([],e,r,i,t,fe,n,null,{});return new el("",new mn(o,[]))}var Er=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(X(l=>l[il]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>cs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>cs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ip(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&eN(i)&&(r.resolve[il]=i.title),r}var as=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[il]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},el=class extends rp{url;constructor(e,t){super(t),this.url=e,bE(this,t)}toString(){return XR(this._root)}};function bE(n,e){e.value._routerState=n,e.children.forEach(t=>bE(n,t))}function XR(n){let e=n.children.length>0?` { ${n.children.map(XR).join(", ")} } `:"";return`${n.value}${e}`}function aE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),mr(e.params,t.params)||n.paramsSubject.next(t.params),CB(e.url,t.url)||n.urlSubject.next(t.url),mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mE(n,e){let t=mr(n.params,e.params)&&NB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||mE(n.parent,e.parent))}function eN(n){return typeof n.title=="string"||n.title===null}var tN=new U(""),ol=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new ct;deactivateEvents=new ct;attachEvents=new ct;detachEvents=new ct;routerOutletData=YA(void 0);parentContexts=N(ls);location=N(ts);changeDetector=N(Jr);inputBinder=N(sl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new yE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wr]})}return n})(),yE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Er?this.route:e===ls?this.childContexts:e===tN?this.outletData:this.parent.get(e,t)}},sl=new U(""),TE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Oo([r.queryParams,r.params,r.data]).pipe(rt(([o,s,a],c)=>(a=F(F(F({},o),s),a),c===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=XA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),DE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&en(0,"router-outlet")},dependencies:[ol],encapsulation:2})}return n})();function CE(n){let e=n.children&&n.children.map(CE),t=e?oe(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=DE),t}function eU(n,e,t){let r=tl(n,e._root,t?t._root:void 0);return new Xu(r,e)}function tl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=tU(n,e,t);return new mn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tl(n,a)),s}}let r=nU(e.value),i=e.children.map(o=>tl(n,o));return new mn(r,i)}}function tU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tl(n,r,i);return tl(n,r)})}function nU(n){return new Er(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var $a=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},nN="ngNavigationCancelingError";function op(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rN(!1,Gt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function rN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[nN]=!0,t.cancellationCode=e,t}function rU(n){return iN(n)&&Yi(n.url)}function iN(n){return!!n&&n[nN]}var iU=(n,e,t,r)=>X(i=>(new vE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),vE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),aE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new tp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(aE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),aE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},sp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},La=class{component;route;constructor(e,t){this.component=e,this.route=t}};function oU(n,e,t){let r=n._root,i=e?e._root:null;return Wu(r,i,t,[r.value])}function sU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xy(n)?n:e.get(n):r}function Wu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xa(e);return n.children.forEach(s=>{aU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qu(a,t.getContext(s),i)),i}function aU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=cU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new sp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Wu(n,e,a?a.children:null,r,i):Wu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new La(a.outlet.component,s))}else s&&Qu(e,a,i),i.canActivateChecks.push(new sp(r)),o.component?Wu(n,null,a?a.children:null,r,i):Wu(n,null,t,r,i);return i}function cU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ss(n.url,e.url)||!mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mE(n,e)||!mr(n.queryParams,e.queryParams);case"paramsChange":default:return!mE(n,e)}}function Qu(n,e,t){let r=xa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Qu(s,e.children.getContext(o),t):Qu(s,null,t):Qu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new La(e.outlet.component,i)):t.canDeactivateChecks.push(new La(null,i)):t.canDeactivateChecks.push(new La(null,i))}function al(n){return typeof n=="function"}function uU(n){return typeof n=="boolean"}function lU(n){return n&&al(n.canLoad)}function dU(n){return n&&al(n.canActivate)}function hU(n){return n&&al(n.canActivateChild)}function fU(n){return n&&al(n.canDeactivate)}function pU(n){return n&&al(n.canMatch)}function oN(n){return n instanceof On||n?.name==="EmptyError"}var Bf=Symbol("INITIAL_VALUE");function Ha(){return rt(n=>Oo(n.map(e=>e.pipe(jr(1),hh(Bf)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===Bf)return Bf;if(t===!1||gU(t))return t}return!0}),bt(e=>e!==Bf),jr(1)))}function gU(n){return Yi(n)||n instanceof $a}function mU(n,e){return nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(oe(F({},t),{guardsResult:!0})):yU(s,r,i,n).pipe(nt(a=>a&&uU(a)?vU(r,o,n,e):Z(a)),X(a=>oe(F({},t),{guardsResult:a})))})}function yU(n,e,t,r){return ke(n).pipe(nt(i=>bU(i.component,i.route,t,e,r)),Br(i=>i!==!0,!0))}function vU(n,e,t,r){return ke(e).pipe(ar(i=>ua(EU(i.route.parent,r),_U(i.route,r),IU(n,i.path,t),wU(n,i.route,t))),Br(i=>i!==!0,!0))}function _U(n,e){return n!==null&&e&&e(new ep(n)),Z(!0)}function EU(n,e){return n!==null&&e&&e(new Jf(n)),Z(!0)}function wU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Zc(()=>{let s=za(e)??t,a=qa(o,s),c=dU(a)?a.canActivate(e,n):Ue(s,()=>a(e,n));return Xr(c).pipe(Br())}));return Z(i).pipe(Ha())}function IU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sU(s)).filter(s=>s!==null).map(s=>Zc(()=>{let a=s.guards.map(c=>{let l=za(s.node)??t,h=qa(c,l),p=hU(h)?h.canActivateChild(r,n):Ue(l,()=>h(r,n));return Xr(p).pipe(Br())});return Z(a).pipe(Ha())}));return Z(o).pipe(Ha())}function bU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let c=za(e)??i,l=qa(a,c),h=fU(l)?l.canDeactivate(n,e,t,r):Ue(c,()=>l(n,e,t,r));return Xr(h).pipe(Br())});return Z(s).pipe(Ha())}function TU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=qa(s,n),c=lU(a)?a.canLoad(e,t):Ue(n,()=>a(e,t));return Xr(c)});return Z(o).pipe(Ha(),sN(r))}function sN(n){return zd(yt(e=>{if(typeof e!="boolean")throw op(n,e)}),X(e=>e===!0))}function DU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=qa(s,n),c=pU(a)?a.canMatch(e,t):Ue(n,()=>a(e,t));return Xr(c)});return Z(o).pipe(Ha(),sN(r))}var nl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},rl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ka(n){return sa(new nl(n))}function CU(n){return sa(new x(4e3,!1))}function SU(n){return sa(rN(!1,Gt.GuardRejected))}var _E=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[fe])return CU(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){return AU(t,i,o).pipe(X(s=>{if(s instanceof vr)throw new rl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new rl(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new vr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Re(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function AU(n,e,t){if(typeof n=="string")return Z(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:h,title:p}=e;return Xr(Ue(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var EE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RU(n,e,t,r,i){let o=aN(n,e,t);return o.matched?(r=ZB(e,r),DU(r,e,t,i).pipe(X(s=>s===!0?o:F({},EE)))):Z(o)}function aN(n,e,t){if(e.path==="**")return NU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},EE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||FR)(t,n,e);if(!i)return F({},EE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function NU(n){return{matched:!0,parameters:n.length>0?VR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kR(n,e,t,r){return t.length>0&&kU(n,t,r)?{segmentGroup:new Re(e,PU(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&xU(n,t,r)?{segmentGroup:new Re(n.segments,MU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function MU(n,e,t,r){let i={};for(let o of t)if(cp(n,e,o)&&!r[Qn(o)]){let s=new Re([],{});i[Qn(o)]=s}return F(F({},r),i)}function PU(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&Qn(r)!==fe){let i=new Re([],{});t[Qn(r)]=i}return t}function kU(n,e,t){return t.some(r=>cp(n,e,r)&&Qn(r)!==fe)}function xU(n,e,t){return t.some(r=>cp(n,e,r))}function cp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function OU(n,e,t){return e.length===0&&!n.children[t]}var wE=class{};function FU(n,e,t,r,i,o,s="emptyOnly"){return new IE(n,e,t,r,i,s,o).recognize()}var LU=31,IE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _E(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}recognize(){let e=kR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new mn(r,t),o=new el("",i),s=WR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new as([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(X(r=>({children:r,rootSnapshot:t})),Zt(r=>{if(r instanceof rl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof mn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ke(o).pipe(ar(s=>{let a=r.children[s],c=JB(t,s);return this.processSegmentGroup(e,c,a,s,i)}),dh((s,a)=>(s.push(...a),s)),Ri(null),vy(),nt(s=>{if(s===null)return ka(r);let a=cN(s);return VU(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ke(t).pipe(ar(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Zt(l=>{if(l instanceof nl)return Z(null);throw l}))),Br(c=>!!c),Zt(c=>{if(oN(c))return OU(r,i,o)?Z(new wE):ka(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Qn(r)!==s&&(s===fe||!cp(i,o,r))?ka(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ka(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=aN(t,i,o);if(!c)return ka(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LU&&(this.allowRedirects=!1));let y=new as(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,xR(i),Qn(i),i.component??i._loadedComponent??null,i,OR(i)),I=ip(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(rt(S=>this.applyRedirects.lineralizeSegments(i,S)),nt(S=>this.processSegment(e,r,t,S.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=RU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(rt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(rt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,I=new as(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,xR(r),Qn(r),r.component??r._loadedComponent??null,r,OR(r)),R=ip(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=kR(t,g,y,l);if(P.length===0&&S.hasChildren())return this.processChildren(h,l,S,I).pipe(X(q=>new mn(I,q)));if(l.length===0&&P.length===0)return Z(new mn(I,[]));let V=Qn(r)===o;return this.processSegment(h,l,S,P,V?fe:o,!0,I).pipe(X(q=>new mn(I,q instanceof mn?[q]:[])))}))):ka(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):TU(e,t,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,t).pipe(yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):SU(t))):Z({routes:[],injector:e})}};function VU(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function jU(n){let e=n.value.routeConfig;return e&&e.path===""}function cN(n){let e=[],t=new Set;for(let r of n){if(!jU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=cN(r.children);e.push(new mn(r.value,i))}return e.filter(r=>!t.has(r))}function xR(n){return n.data||{}}function OR(n){return n.resolve||{}}function BU(n,e,t,r,i,o){return nt(s=>FU(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:c})=>oe(F({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function UU(n,e){return nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of uN(c))s.add(l);let a=0;return ke(s).pipe(ar(c=>o.has(c)?$U(c,r,n,e):(c.data=ip(c,c.parent,n).resolve,Z(void 0))),yt(()=>a++),la(1),nt(c=>a===s.size?Z(t):Qt))})}function uN(n){let e=n.children.map(t=>uN(t)).flat();return[n,...e]}function $U(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!eN(i)&&(o[il]=i.title),Zc(()=>(n.data=ip(n,n.parent,t).resolve,HU(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function HU(n,e,t,r){let i=lE(n);if(i.length===0)return Z({});let o={};return ke(i).pipe(nt(s=>zU(n[s],e,t,r).pipe(Br(),yt(a=>{if(a instanceof $a)throw op(new Qi,a);o[s]=a}))),la(1),X(()=>o),Zt(s=>oN(s)?Qt:sa(s)))}function zU(n,e,t,r){let i=za(e)??r,o=qa(n,i),s=o.resolve?o.resolve(e,t):Ue(i,()=>o(e,t));return Xr(s)}function cE(n){return rt(e=>{let t=n(e);return t?ke(t).pipe(X(()=>e)):Z(e)})}var SE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[il]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(lN),providedIn:"root"})}return n})(),lN=(()=>{class n extends SE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Y(AR))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ji=new U("",{providedIn:"root",factory:()=>({})}),ds=new U(""),up=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(P_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Xr(Ue(t,()=>r.loadComponent())).pipe(X(hN),rt(fN),yt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Fo(()=>{this.componentLoaders.delete(r)})),o=new na(i,()=>new ot).pipe(ta());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=dN(r,this.compiler,t,this.onLoadEndListener).pipe(Fo(()=>{this.childrenLoaders.delete(r)})),s=new na(o,()=>new ot).pipe(ta());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dN(n,e,t,r){return Xr(Ue(t,()=>n.loadChildren())).pipe(X(hN),rt(fN),nt(i=>i instanceof gf||Array.isArray(i)?Z(i):ke(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ds,[],{optional:!0,self:!0}).flat()),{routes:s.map(CE),injector:o}}))}function qU(n){return n&&typeof n=="object"&&"default"in n}function hN(n){return qU(n)?n.default:n}function fN(n){return Z(n)}var lp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(GU),providedIn:"root"})}return n})(),GU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AE=new U(""),RE=new U("");function pN(n,e,t){let r=n.get(RE),i=n.get($e);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),WU(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&Ue(n,()=>c({transition:a,from:e,to:t})),s}function WU(n){return new Promise(e=>{Ru({read:()=>setTimeout(e)},{injector:n})})}var NE=new U(""),dp=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortWithErrorSubject=new ot;configLoader=N(up);environmentInjector=N(Be);destroyRef=N(Un);urlSerializer=N(us);rootContexts=N(ls);location=N(Gi);inputBindingEnabled=N(sl,{optional:!0})!==null;titleStrategy=N(SE);options=N(Ji,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(lp);createViewTransition=N(AE,{optional:!0});navigationErrorHandler=N(NE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Yf(i)),r=i=>this.events.next(new Zf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new st(null),this.transitions.pipe(bt(r=>r!==null),rt(r=>{let i=!1;return Z(r).pipe(rt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),Qt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?oe(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new _r(o.id,this.urlSerializer.serialize(o.rawUrl),c,Va.IgnoredSameUrlNavigation)),o.resolve(!1),Qt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Z(o).pipe(rt(c=>(this.events.next(new Zi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Qt:Promise.resolve(c))),BU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=oe(F({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Zu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Zi(c,this.urlSerializer.serialize(l),h,p);this.events.next(y);let I=JR(this.rootComponentType).snapshot;return this.currentTransition=r=oe(F({},o),{targetSnapshot:I,urlAfterRedirects:l,extras:oe(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Z(r)}else{let c="";return this.events.next(new _r(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Va.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Qt}}),yt(o=>{let s=new Gf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),X(o=>(this.currentTransition=r=oe(F({},o),{guards:oU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),mU(this.environmentInjector,o=>this.events.next(o)),yt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw op(this.urlSerializer,o.guardsResult);let s=new Wf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),bt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Gt.GuardRejected),!1)),cE(o=>{if(o.guards.canActivateChecks.length!==0)return Z(o).pipe(yt(s=>{let a=new Kf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),rt(s=>{let a=!1;return Z(s).pipe(UU(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Gt.NoDataFromResolver)}}))}),yt(s=>{let a=new Qf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),cE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=za(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(yt(h=>{a.component=h}),X(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Oo(s(o.targetSnapshot.root)).pipe(Ri(null),jr(1))}),cE(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ke(a).pipe(X(()=>r)):Z(r)}),X(o=>{let s=eU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(F({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),yt(()=>{this.events.next(new Ju)}),iU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),jr(1),fh(new re(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(bt(()=>!i&&!r.targetRouterState),yt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Gt.Aborted)}))),yt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),fh(this.transitionAbortWithErrorSubject.pipe(yt(o=>{throw o}))),Fo(()=>{i||this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zt(o=>{if(this.destroyed)return r.resolve(!1),Qt;if(i=!0,iN(o))this.events.next(new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),rU(o)?this.events.next(new Ua(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ja(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ue(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof $a){let{message:c,cancellationCode:l}=op(this.urlSerializer,a);this.events.next(new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ua(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let o=new yr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KU(n){return n!==Fa}var gN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(QU),providedIn:"root"})}return n})(),ap=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},QU=(()=>{class n extends ap{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mN=(()=>{class n{urlSerializer=N(us);options=N(Ji,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(Gi);urlHandlingStrategy=N(lp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof vr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=JR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>N(YU),providedIn:"root"})}return n})(),YU=(()=>{class n extends mN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Zi?this.updateStateMemento():t instanceof _r?this.commitTransition(r):t instanceof Zu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ju?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof yr&&t.code!==Gt.SupersededByNewNavigation&&t.code!==Gt.Redirect?this.restoreHistory(r):t instanceof ja?this.restoreHistory(r,!0):t instanceof Nn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hp(n,e){n.events.pipe(bt(t=>t instanceof Nn||t instanceof yr||t instanceof ja||t instanceof _r),X(t=>t instanceof Nn||t instanceof _r?0:(t instanceof yr?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?2:1),bt(t=>t!==2),jr(1)).subscribe(()=>{e()})}var ZU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ot=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(C_);stateManager=N(mN);options=N(Ji,{optional:!0})||{};pendingTasks=N(hr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(dp);urlSerializer=N(us);location=N(Gi);urlHandlingStrategy=N(lp);injector=N(Be);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(gN);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(ds,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(sl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof yr&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nn)this.navigated=!0;else if(r instanceof Ua){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||KU(i.source)},s);this.scheduleNavigation(a,Fa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(zt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(CE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=KR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return QR(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Yi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fa,null,r)}navigate(t,r={skipLocationChange:!1}){return XU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},ZU):r===!1?i=F({},JU):i=r,Yi(t))return RR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return RR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return hp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new x(4008,!1)}var fp=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=dr(null);get href(){return rn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;applicationErrorHandler=N(zt);options=N(Ji,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(N(new bf("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Nn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Yi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ge(Ot),ge(Er),Du("tabindex"),ge(gr),ge(Hn),ge(Kn))};static \u0275dir=Ge({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ie("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ca("href",i.reactiveHref(),n_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",qi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",qi],replaceUrl:[2,"replaceUrl","replaceUrl",qi],routerLink:"routerLink"},features:[Wr]})}return n})();var cl=class{};var yN=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bt(t=>t instanceof Nn),ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Da(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ke(i).pipe(ca())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(nt(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return ke([o,s]).pipe(ca())}else return o})}static \u0275fac=function(r){return new(r||n)(Y(Ot),Y(Be),Y(cl),Y(up))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vN=new U(""),e3=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Fa;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _r&&t.code===Va.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ba&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ba(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){v_()};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function PE(n,...e){return dn([{provide:ds,multi:!0,useValue:n},[],{provide:Er,useFactory:_N,deps:[Ot]},{provide:Nu,multi:!0,useFactory:EN},e.map(t=>t.\u0275providers)])}function _N(n){return n.routerState.root}function ul(n,e){return{\u0275kind:n,\u0275providers:e}}function EN(){let n=N(Je);return e=>{let t=n.get(Zr);if(e!==t.components[0])return;let r=n.get(Ot),i=n.get(wN);n.get(kE)===1&&r.initialNavigation(),n.get(TN,null,{optional:!0})?.setUpPreloading(),n.get(vN,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wN=new U("",{factory:()=>new ot}),kE=new U("",{providedIn:"root",factory:()=>1});function IN(){let n=[{provide:kE,useValue:0},vf(()=>{let e=N(Je);return e.get(U_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ot),o=e.get(wN);hp(i,()=>{r(!0)}),e.get(dp).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))})];return ul(2,n)}function bN(){let n=[vf(()=>{N(Ot).setUpLocationChangeListener()}),{provide:kE,useValue:2}];return ul(3,n)}var TN=new U("");function DN(n){return ul(0,[{provide:TN,useExisting:yN},{provide:cl,useExisting:n}])}function CN(){return ul(8,[TE,{provide:sl,useExisting:TE}])}function SN(n){Ui("NgRouterViewTransitions");let e=[{provide:AE,useValue:pN},{provide:RE,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return ul(9,e)}var AN=[Gi,{provide:us,useClass:Qi},Ot,ls,{provide:Er,useFactory:_N,deps:[Ot]},up,[]],xE=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[AN,[],{provide:ds,multi:!0,useValue:t},[],r?.errorHandler?{provide:NE,useValue:r.errorHandler}:[],{provide:Ji,useValue:r||{}},r?.useHash?n3():r3(),t3(),r?.preloadingStrategy?DN(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?i3(r):[],r?.bindToComponentInputs?CN().\u0275providers:[],r?.enableViewTransitions?SN().\u0275providers:[],o3()]}}static forChild(t){return{ngModule:n,providers:[{provide:ds,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cn({type:n});static \u0275inj=ln({})}return n})();function t3(){return{provide:vN,useFactory:()=>{let n=N(aR),e=N(Ce),t=N(Ji),r=N(dp),i=N(us);return t.scrollOffset&&n.setOffset(t.scrollOffset),new e3(i,r,n,e,t)}}}function n3(){return{provide:Kn,useClass:z_}}function r3(){return{provide:Kn,useClass:Sf}}function i3(n){return[n.initialNavigation==="disabled"?bN().\u0275providers:[],n.initialNavigation==="enabledBlocking"?IN().\u0275providers:[]]}var ME=new U("");function o3(){return[{provide:ME,useFactory:EN},{provide:Nu,multi:!0,useExisting:ME}]}var pp=class n{title="course-work";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&en(0,"router-outlet")},dependencies:[ol],encapsulation:2})};var ye=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ye||{}),Yn="*";function RN(n,e=null){return{type:ye.Sequence,steps:n,options:e}}function OE(n){return{type:ye.Style,styles:n,offset:null}}var ei=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ga=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ll="!";function NN(n){return new x(3e3,!1)}function a3(){return new x(3100,!1)}function c3(){return new x(3101,!1)}function u3(n){return new x(3001,!1)}function l3(n){return new x(3003,!1)}function d3(n){return new x(3004,!1)}function PN(n,e){return new x(3005,!1)}function kN(){return new x(3006,!1)}function xN(){return new x(3007,!1)}function ON(n,e){return new x(3008,!1)}function FN(n){return new x(3002,!1)}function LN(n,e,t,r,i){return new x(3010,!1)}function VN(){return new x(3011,!1)}function jN(){return new x(3012,!1)}function BN(){return new x(3200,!1)}function UN(){return new x(3202,!1)}function $N(){return new x(3013,!1)}function HN(n){return new x(3014,!1)}function zN(n){return new x(3015,!1)}function qN(n){return new x(3016,!1)}function GN(n,e){return new x(3404,!1)}function h3(n){return new x(3502,!1)}function WN(n){return new x(3503,!1)}function KN(){return new x(3300,!1)}function QN(n){return new x(3504,!1)}function YN(n){return new x(3301,!1)}function ZN(n,e){return new x(3302,!1)}function JN(n){return new x(3303,!1)}function XN(n,e){return new x(3400,!1)}function eM(n){return new x(3401,!1)}function tM(n){return new x(3402,!1)}function nM(n,e){return new x(3505,!1)}function ti(n){switch(n.length){case 0:return new ei;case 1:return n[0];default:return new Ga(n)}}function jE(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),h=l==s,p=h&&a||new Map;c.forEach((g,y)=>{let I=y,R=g;if(y!=="offset")switch(I=n.normalizePropertyName(I,i),R){case ll:R=t.get(y);break;case Yn:R=r.get(y);break;default:R=n.normalizeStyleValue(y,I,R,i);break}p.set(I,R)}),h||o.push(p),a=p,s=l}),i.length)throw h3(i);return o}function gp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&FE(t,"start",n)));break;case"done":n.onDone(()=>r(t&&FE(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&FE(t,"destroy",n)));break}}function FE(n,e,t){let r=t.totalTime,i=!!t.disabled,o=mp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function mp(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function on(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function BE(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var f3=typeof document>"u"?null:document.documentElement;function yp(n){let e=n.parentNode||n.host||null;return e===f3?null:e}function p3(n){return n.substring(1,6)=="ebkit"}var hs=null,MN=!1;function rM(n){hs||(hs=g3()||{},MN=hs.style?"WebkitAppearance"in hs.style:!1);let e=!0;return hs.style&&!p3(n)&&(e=n in hs.style,!e&&MN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in hs.style)),e}function g3(){return typeof document<"u"?document.body:null}function UE(n,e){for(;e;){if(e===n)return!0;e=yp(e)}return!1}function $E(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var m3=1e3,HE="{{",y3="}}",zE="ng-enter",vp="ng-leave",dl="ng-trigger",hl=".ng-trigger",qE="ng-animating",_p=".ng-animating";function wr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:LE(parseFloat(e[1]),e[2])}function LE(n,e){switch(e){case"s":return n*m3;default:return n}}function fl(n,e,t){return n.hasOwnProperty("duration")?n:_3(n,e,t)}var v3=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function _3(n,e,t){let r,i=0,o="";if(typeof n=="string"){let s=n.match(v3);if(s===null)return e.push(NN(n)),{duration:0,delay:0,easing:""};r=LE(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=LE(parseFloat(a),s[4]));let c=s[5];c&&(o=c)}else r=n;if(!t){let s=!1,a=e.length;r<0&&(e.push(a3()),s=!0),i<0&&(e.push(c3()),s=!0),s&&e.splice(a,0,NN(n))}return{duration:r,delay:i,easing:o}}function iM(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Zn(n,e,t){e.forEach((r,i)=>{let o=Ep(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Xi(n,e){e.forEach((t,r)=>{let i=Ep(r);n.style[i]=""})}function Wa(n){return Array.isArray(n)?n.length==1?n[0]:RN(n):n}function oM(n,e,t){let r=e.params||{},i=GE(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(u3(o))})}var VE=new RegExp(`${HE}\\s*(.+?)\\s*${y3}`,"g");function GE(n){let e=[];if(typeof n=="string"){let t;for(;t=VE.exec(n);)e.push(t[1]);VE.lastIndex=0}return e}function Ka(n,e,t){let r=`${n}`,i=r.replace(VE,(o,s)=>{let a=e[s];return a==null&&(t.push(l3(s)),a=""),a.toString()});return i==r?n:i}var E3=/-+([a-z0-9])/g;function Ep(n){return n.replace(E3,(...e)=>e[1].toUpperCase())}function sM(n,e){return n===0||e===0}function aM(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,wp(n,a)))}}return e}function sn(n,e,t){switch(e.type){case ye.Trigger:return n.visitTrigger(e,t);case ye.State:return n.visitState(e,t);case ye.Transition:return n.visitTransition(e,t);case ye.Sequence:return n.visitSequence(e,t);case ye.Group:return n.visitGroup(e,t);case ye.Animate:return n.visitAnimate(e,t);case ye.Keyframes:return n.visitKeyframes(e,t);case ye.Style:return n.visitStyle(e,t);case ye.Reference:return n.visitReference(e,t);case ye.AnimateChild:return n.visitAnimateChild(e,t);case ye.AnimateRef:return n.visitAnimateRef(e,t);case ye.Query:return n.visitQuery(e,t);case ye.Stagger:return n.visitStagger(e,t);default:throw d3(e.type)}}function wp(n,e){return window.getComputedStyle(n)[e]}var uw=(()=>{class n{validateStyleProperty(t){return rM(t)}containsElement(t,r){return UE(t,r)}getParentElement(t){return yp(t)}query(t,r,i){return $E(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new ei(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),ps=class{static NOOP=new uw},gs=class{};var w3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Cp=class extends gs{normalizePropertyName(e,t){return Ep(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(w3.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(PN(e,r))}return s+o}};var Sp="*";function I3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>b3(r,t,e)):t.push(n),t}function b3(n,e,t){if(n[0]==":"){let c=T3(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(zN(n)),e;let i=r[1],o=r[2],s=r[3];e.push(cM(i,s));let a=i==Sp&&s==Sp;o[0]=="<"&&!a&&e.push(cM(s,i))}function T3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(qN(n)),"* => *"}}var Ip=new Set(["true","1"]),bp=new Set(["false","0"]);function cM(n,e){let t=Ip.has(n)||bp.has(n),r=Ip.has(e)||bp.has(e);return(i,o)=>{let s=n==Sp||n==i,a=e==Sp||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Ip.has(n):bp.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Ip.has(e):bp.has(e)),s&&a}}var vM=":self",D3=new RegExp(`s*${vM}s*,?`,"g");function _M(n,e,t,r){return new JE(n).build(e,t,r)}var uM="",JE=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new XE(t);return this._resetContextStyleTimingState(i),sn(this,Wa(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=uM,e.collectedStyles=new Map,e.collectedStyles.set(uM,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(kN()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ye.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=l}else if(a.type==ye.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(xN())}),{type:ye.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{GE(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&t.errors.push(ON(e.name,[...o.values()]))}return{type:ye.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=sn(this,Wa(e.animation),t),i=I3(e.expr,t.errors);return{type:ye.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:fs(e.options)}}visitSequence(e,t){return{type:ye.Sequence,steps:e.steps.map(r=>sn(this,r,t)),options:fs(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=sn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:ye.Group,steps:o,options:fs(e.options)}}visitAnimate(e,t){let r=R3(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:OE({});if(o.type==ye.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};r.easing&&(l.easing=r.easing),s=OE(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:ye.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Yn?r.push(a):t.errors.push(FN(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(HE)>=0){o=!0;break}}}),{type:ye.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c),p=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(LN(c,h.startTime,h.endTime,o,i)),p=!1),o=h.startTime),p&&l.set(c,{startTime:o,endTime:i}),t.options&&oM(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:ye.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(VN()),r;let i=1,o=0,s=[],a=!1,c=!1,l=0,h=e.steps.map(P=>{let V=this._makeStyleAst(P,t),q=V.offset!=null?V.offset:A3(V.styles),G=0;return q!=null&&(o++,G=V.offset=q),c=c||G<0||G>1,a=a||G<l,l=G,s.push(G),V});c&&t.errors.push(jN()),a&&t.errors.push(BN());let p=e.steps.length,g=0;o>0&&o<p?t.errors.push(UN()):o==0&&(g=i/(p-1));let y=p-1,I=t.currentTime,R=t.currentAnimateTimings,S=R.duration;return h.forEach((P,V)=>{let q=g>0?V==y?1:g*V:s[V],G=q*S;t.currentTime=I+R.delay+G,R.duration=G,this._validateStyleAst(P,t),P.offset=q,r.styles.push(P)}),r}visitReference(e,t){return{type:ye.Reference,animation:sn(this,Wa(e.animation),t),options:fs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ye.AnimateChild,options:fs(e.options)}}visitAnimateRef(e,t){return{type:ye.AnimateRef,animation:this.visitReference(e.animation,t),options:fs(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=C3(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,on(t.collectedStyles,t.currentQuerySelector,new Map);let a=sn(this,Wa(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:ye.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:fs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push($N());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:fl(e.timings,t.errors,!0);return{type:ye.Stagger,animation:sn(this,Wa(e.animation),t),timings:r,options:null}}};function C3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==vM);return e&&(n=n.replace(D3,"")),n=n.replace(/@\*/g,hl).replace(/@\w+/g,t=>hl+"-"+t.slice(1)).replace(/:animating/g,_p),[n,e]}function S3(n){return n?F({},n):null}var XE=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function A3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function R3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=fl(n,e).duration;return WE(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=WE(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=fl(t,e);return WE(i.duration,i.delay,i.easing)}function fs(n){return n?(n=F({},n),n.params&&(n.params=S3(n.params))):n={},n}function WE(n,e,t){return{duration:n,delay:e,easing:t}}function lw(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var gl=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},N3=1,M3=":enter",P3=new RegExp(M3,"g"),k3=":leave",x3=new RegExp(k3,"g");function EM(n,e,t,r,i,o=new Map,s=new Map,a,c,l=[]){return new ew().buildKeyframes(n,e,t,r,i,o,s,a,c,l)}var ew=class{buildKeyframes(e,t,r,i,o,s,a,c,l,h=[]){l=l||new gl;let p=new tw(e,t,l,i,o,h,[]);p.options=c;let g=c.delay?wr(c.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([s],null,p.errors,c),sn(this,r,p);let y=p.timelines.filter(I=>I.containsAnimation());if(y.length&&a.size){let I;for(let R=y.length-1;R>=0;R--){let S=y[R];if(S.element===t){I=S;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,p.errors,c)}return y.length?y.map(I=>I.buildKeyframes()):[lw(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:wr(Ka(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?wr(r.duration):null,a=r.delay!=null?wr(r.delay):null;return s!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),sn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==ye.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ap);let s=wr(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>sn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?wr(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),sn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Ka(r,t.params,t.errors):r;return fl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==ye.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?wr(i.delay):0;o&&(t.previousNode.type===ye.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ap);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,l);o&&p.delayNextStep(o),l===t.element&&(c=p.currentTimeline),sn(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let g=p.currentTimeline.currentTime;s=Math.max(s,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let p=h.currentTime;sn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},Ap={},tw=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ap;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new Rp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=wr(r.duration)),r.delay!=null&&(i.delay=wr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Ka(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Ap,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new nw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(P3,"."+this._enterClassName),e=e.replace(x3,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&a.length==0&&s.push(HN(t)),a}},Rp=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=N3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yn),this._currentKeyframe.set(t,Yn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=O3(e,this._globalTimelineStyles);for(let[a,c]of s){let l=Ka(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yn),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((h,p)=>{h===ll?e.add(p):h===Yn&&t.add(p)}),r||l.set("offset",c/this.duration),i.push(l)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return lw(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},nw=class extends Rp{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",lM(a)),o.push(l);let h=e.length-1;for(let p=1;p<=h;p++){let g=new Map(e[p]),y=g.get("offset"),I=t+y*r;g.set("offset",lM(I/s)),o.push(g)}r=s,t=0,i="",e=o}return lw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function lM(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function O3(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Yn)}else for(let[o,s]of i)t.set(o,s)}),t}function dM(n,e,t,r,i,o,s,a,c,l,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:p,errors:g}}var KE={},Np=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return F3(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,l,h){let p=[],g=this.ast.options&&this.ast.options.params||KE,y=a&&a.params||KE,I=this.buildStyles(r,y,p),R=c&&c.params||KE,S=this.buildStyles(i,R,p),P=new Set,V=new Map,q=new Map,G=i==="void",Fe={params:wM(R,g),delay:this.ast.options?.delay},he=h?[]:EM(e,t,this.ast.animation,o,s,I,S,Fe,l,p),b=0;return he.forEach(v=>{b=Math.max(v.duration+v.delay,b)}),p.length?dM(t,this._triggerName,r,i,G,I,S,[],[],V,q,b,p):(he.forEach(v=>{let E=v.element,T=on(V,E,new Set);v.preStyleProps.forEach(A=>T.add(A));let D=on(q,E,new Set);v.postStyleProps.forEach(A=>D.add(A)),E!==t&&P.add(E)}),dM(t,this._triggerName,r,i,G,I,S,he,[...P.values()],V,q,b))}};function F3(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function wM(n,e){let t=F({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var rw=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=wM(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Ka(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function L3(n,e,t){return new iw(n,e,t)}var iw=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new rw(i.style,o,r))}),hM(this.states,"true","1"),hM(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Np(e,i,this.states))}),this.fallbackTransition=V3(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function V3(n,e,t){let r=[(s,a)=>!0],i={type:ye.Sequence,steps:[],options:null},o={type:ye.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Np(n,o,e)}function hM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var j3=new gl,ow=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=_M(this._driver,t,r,i);if(r.length)throw WN(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=jE(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=EM(this._driver,t,o,zE,vp,new Map,new Map,r,j3,i),s.forEach(h=>{let p=on(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(i.push(KN()),s=[]),i.length)throw QN(i);a.forEach((h,p)=>{h.forEach((g,y)=>{h.set(y,this._driver.computeStyle(p,y,Yn))})});let c=s.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),l=ti(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw YN(e);return t}listen(e,t,r,i){let o=mp(t,"","","");return gp(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},fM="ng-animate-queued",B3=".ng-animate-queued",QE="ng-animate-disabled",U3=".ng-animate-disabled",$3="ng-star-inserted",H3=".ng-star-inserted",z3=[],IM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},q3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jn="__ng_removed",ml=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=W3(i),r){let o=e,{value:s}=o,a=Qm(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},pl="void",YE=new ml(pl),sw=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Mn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw ZN(r,t);if(r==null||r.length==0)throw JN(t);if(!K3(r))throw XN(r,t);let o=on(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=on(this._engine.statesByElement,e,new Map);return a.has(t)||(Mn(e,dl),Mn(e,dl+"-"+t),a.set(t,YE)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw eM(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new yl(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Mn(e,dl),Mn(e,dl+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new ml(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=YE),!(l.value===pl)&&c.value===l.value){if(!Z3(c.params,l.params)){let R=[],S=o.matchStyles(c.value,c.params,R),P=o.matchStyles(l.value,l.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Xi(e,S),Zn(e,P)})}return}let g=on(this._engine.playersByElement,e,[]);g.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let y=o.matchTransition(c.value,l.value,e,l.params),I=!1;if(!y){if(!i)return;y=o.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:l,player:s,isFallbackTransition:I}),I||(Mn(e,fM),s.onStart(()=>{Qa(e,fM)})),s.onDone(()=>{let R=this.players.indexOf(s);R>=0&&this.players.splice(R,1);let S=this._engine.playersByElement.get(e);if(S){let P=S.indexOf(s);P>=0&&S.splice(P,1)}}),this.players.push(s),g.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,hl,!0);r.forEach(i=>{if(i[Jn])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let h=this.trigger(e,l,pl,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&ti(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,l=r.get(s)||YE,h=new ml(pl),p=new yl(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Jn];(!o||o===IM)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Mn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=mp(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,gp(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},aw=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new sw(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Tp(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Tp(t))return;let o=t[Jn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mn(e,QE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Qa(e,QE))}removeNode(e,t,r){if(Tp(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Jn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Tp(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,hl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,_p,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ti(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Jn];if(t&&t.setForRemoval){if(e[Jn]=IM,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(QE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,U3,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Mn(i,$3)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?ti(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw tM(e)}_flushAnimations(e,t){let r=new gl,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(W=>{h.add(W);let Q=this.driver.query(W,B3,!0);for(let J=0;J<Q.length;J++)h.add(Q[J])});let p=this.bodyNode,g=Array.from(this.statesByElement.keys()),y=mM(g,this.collectedEnterElements),I=new Map,R=0;y.forEach((W,Q)=>{let J=zE+R++;I.set(Q,J),W.forEach(we=>Mn(we,J))});let S=[],P=new Set,V=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){let Q=this.collectedLeaveElements[W],J=Q[Jn];J&&J.setForRemoval&&(S.push(Q),P.add(Q),J.hasAnimation?this.driver.query(Q,H3,!0).forEach(we=>P.add(we)):V.add(Q))}let q=new Map,G=mM(g,Array.from(P));G.forEach((W,Q)=>{let J=vp+R++;q.set(Q,J),W.forEach(we=>Mn(we,J))}),e.push(()=>{y.forEach((W,Q)=>{let J=I.get(Q);W.forEach(we=>Qa(we,J))}),G.forEach((W,Q)=>{let J=q.get(Q);W.forEach(we=>Qa(we,J))}),S.forEach(W=>{this.processLeaveNode(W)})});let Fe=[],he=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(J=>{let we=J.player,tt=J.element;if(Fe.push(we),this.collectedEnterElements.length){let Qe=tt[Jn];if(Qe&&Qe.setForMove){if(Qe.previousTriggersValues&&Qe.previousTriggersValues.has(J.triggerName)){let Or=Qe.previousTriggersValues.get(J.triggerName),Kt=this.statesByElement.get(J.element);if(Kt&&Kt.has(J.triggerName)){let Fr=Kt.get(J.triggerName);Fr.value=Or,Kt.set(J.triggerName,Fr)}}we.destroy();return}}let En=!p||!this.driver.containsElement(p,tt),Ke=q.get(tt),Le=I.get(tt),Ve=this._buildInstruction(J,r,Le,Ke,En);if(Ve.errors&&Ve.errors.length){he.push(Ve);return}if(En){we.onStart(()=>Xi(tt,Ve.fromStyles)),we.onDestroy(()=>Zn(tt,Ve.toStyles)),i.push(we);return}if(J.isFallbackTransition){we.onStart(()=>Xi(tt,Ve.fromStyles)),we.onDestroy(()=>Zn(tt,Ve.toStyles)),i.push(we);return}let _i=[];Ve.timelines.forEach(Qe=>{Qe.stretchStartingKeyframe=!0,this.disabledNodes.has(Qe.element)||_i.push(Qe)}),Ve.timelines=_i,r.append(tt,Ve.timelines);let Tm={instruction:Ve,player:we,element:tt};s.push(Tm),Ve.queriedElements.forEach(Qe=>on(a,Qe,[]).push(we)),Ve.preStyleProps.forEach((Qe,Or)=>{if(Qe.size){let Kt=c.get(Or);Kt||c.set(Or,Kt=new Set),Qe.forEach((Fr,Ei)=>Kt.add(Ei))}}),Ve.postStyleProps.forEach((Qe,Or)=>{let Kt=l.get(Or);Kt||l.set(Or,Kt=new Set),Qe.forEach((Fr,Ei)=>Kt.add(Ei))})});if(he.length){let W=[];he.forEach(Q=>{W.push(nM(Q.triggerName,Q.errors))}),Fe.forEach(Q=>Q.destroy()),this.reportError(W)}let b=new Map,v=new Map;s.forEach(W=>{let Q=W.element;r.has(Q)&&(v.set(Q,Q),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,b))}),i.forEach(W=>{let Q=W.element;this._getPreviousPlayers(Q,!1,W.namespaceId,W.triggerName,null).forEach(we=>{on(b,Q,[]).push(we),we.destroy()})});let E=S.filter(W=>yM(W,c,l)),T=new Map;gM(T,this.driver,V,l,Yn).forEach(W=>{yM(W,c,l)&&E.push(W)});let A=new Map;y.forEach((W,Q)=>{gM(A,this.driver,new Set(W),c,ll)}),E.forEach(W=>{let Q=T.get(W),J=A.get(W);T.set(W,new Map([...Q?.entries()??[],...J?.entries()??[]]))});let w=[],_n=[],vi={};s.forEach(W=>{let{element:Q,player:J,instruction:we}=W;if(r.has(Q)){if(h.has(Q)){J.onDestroy(()=>Zn(Q,we.toStyles)),J.disabled=!0,J.overrideTotalTime(we.totalTime),i.push(J);return}let tt=vi;if(v.size>1){let Ke=Q,Le=[];for(;Ke=Ke.parentNode;){let Ve=v.get(Ke);if(Ve){tt=Ve;break}Le.push(Ke)}Le.forEach(Ve=>v.set(Ve,tt))}let En=this._buildAnimation(J.namespaceId,we,b,o,A,T);if(J.setRealPlayer(En),tt===vi)w.push(J);else{let Ke=this.playersByElement.get(tt);Ke&&Ke.length&&(J.parentPlayer=ti(Ke)),i.push(J)}}else Xi(Q,we.fromStyles),J.onDestroy(()=>Zn(Q,we.toStyles)),_n.push(J),h.has(Q)&&i.push(J)}),_n.forEach(W=>{let Q=o.get(W.element);if(Q&&Q.length){let J=ti(Q);W.setRealPlayer(J)}}),i.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<S.length;W++){let Q=S[W],J=Q[Jn];if(Qa(Q,vp),J&&J.hasAnimation)continue;let we=[];if(a.size){let En=a.get(Q);En&&En.length&&we.push(...En);let Ke=this.driver.query(Q,_p,!0);for(let Le=0;Le<Ke.length;Le++){let Ve=a.get(Ke[Le]);Ve&&Ve.length&&we.push(...Ve)}}let tt=we.filter(En=>!En.destroyed);tt.length?Q3(this,Q,tt):this.processLeaveNode(Q)}return S.length=0,w.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();let Q=this.players.indexOf(W);this.players.splice(Q,1)}),W.play()}),w}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==pl;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,h=l!==o,p=on(r,l,[]);this._getPreviousPlayers(l,h,s,a,t.toState).forEach(y=>{let I=y.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),y.destroy(),p.push(y)})}Xi(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,l=[],h=new Set,p=new Set,g=t.timelines.map(I=>{let R=I.element;h.add(R);let S=R[Jn];if(S&&S.removedBeforeQueried)return new ei(I.duration,I.delay);let P=R!==c,V=Y3((r.get(R)||z3).map(b=>b.getRealPlayer())).filter(b=>{let v=b;return v.element?v.element===R:!1}),q=o.get(R),G=s.get(R),Fe=jE(this._normalizer,I.keyframes,q,G),he=this._buildPlayer(I,Fe,V);if(I.subTimeline&&i&&p.add(R),P){let b=new yl(e,a,R);b.setRealPlayer(he),l.push(b)}return he});l.forEach(I=>{on(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>G3(this.playersByQueriedElement,I.element,I))}),h.forEach(I=>Mn(I,qE));let y=ti(g);return y.onDestroy(()=>{h.forEach(I=>Qa(I,qE)),Zn(c,t.toStyles)}),p.forEach(I=>{on(i,I,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ei(e.duration,e.delay)}},yl=class{namespaceId;triggerName;element;_player=new ei;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>gp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){on(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function G3(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function W3(n){return n??null}function Tp(n){return n&&n.nodeType===1}function K3(n){return n=="start"||n=="done"}function pM(n,e){let t=n.style.display;return n.style.display=e??"none",t}function gM(n,e,t,r,i){let o=[];t.forEach(c=>o.push(pM(c)));let s=[];r.forEach((c,l)=>{let h=new Map;c.forEach(p=>{let g=e.computeStyle(l,p,i);h.set(p,g),(!g||g.length==0)&&(l[Jn]=q3,s.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>pM(c,o[a++])),s}function mM(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function Mn(n,e){n.classList?.add(e)}function Qa(n,e){n.classList?.remove(e)}function Q3(n,e,t){ti(t).onDone(()=>n.processLeaveNode(e))}function Y3(n){let e=[];return bM(n,e),e}function bM(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Ga?bM(r.players,e):e.push(r)}}function Z3(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function yM(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var Ya=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new aw(e.body,t,r),this._timelineEngine=new ow(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],l=[],h=_M(this._driver,o,c,l);if(c.length)throw GN(i,c);a=L3(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=BE(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=BE(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function J3(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZE(e[0]),e.length>1&&(r=ZE(e[e.length-1]))):e instanceof Map&&(t=ZE(e)),t||r?new X3(n,t,r):null}var X3=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Zn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zn(this._element,this._initialStyles),this._endStyles&&(Zn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xi(this._element,this._endStyles),this._endStyles=null),Zn(this._element,this._initialStyles),this._state=3)}}return n})();function ZE(n){let e=null;return n.forEach((t,r)=>{e$(r)&&(e=e||new Map,e.set(r,t))}),e}function e$(n){return n==="display"||n==="position"}var Mp=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:wp(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Pp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return UE(e,t)}getParentElement(e){return yp(e)}query(e,t,r){return $E(e,t,r)}computeStyle(e,t,r){return wp(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let l=new Map,h=s.filter(y=>y instanceof Mp);sM(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((I,R)=>l.set(R,I))});let p=iM(t).map(y=>new Map(y));p=aM(e,p,l);let g=J3(e,p);return new Mp(e,p,c,g)}};var Dp="@",TM="@.disabled",kp=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Dp&&t==TM?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},cw=class extends kp{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Dp?t.charAt(1)=="."&&t==TM?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Dp){let o=t$(e),s=t.slice(1),a="";return s.charAt(0)!=Dp&&([s,a]=n$(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,r,c)})}return this.delegate.listen(e,t,r,i)}};function t$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function n$(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var xp=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,h=l.get(i);if(!h){let p=()=>l.delete(i);h=new kp(r,i,this.engine,p),l.set(i,h)}return h}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return t.data.animation.forEach(a),new cw(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var i$=(()=>{class n extends Ya{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(Y($e),Y(ps),Y(gs))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function o$(){return new Cp}function s$(n,e,t){return new xp(n,e,t)}var DM=[{provide:gs,useFactory:o$},{provide:Ya,useClass:i$},{provide:Gr,useFactory:s$,deps:[Bu,Ya,Ce]}],cue=[{provide:ps,useClass:uw},{provide:cf,useValue:"NoopAnimations"},...DM],a$=[{provide:ps,useFactory:()=>new Pp},{provide:cf,useFactory:()=>"BrowserAnimations"},...DM];function CM(){return Ui("NgEagerAnimations"),[...a$]}var SM=()=>{};var NM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},c$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Op={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new hw;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},u$=function(n){let e=NM(n);return Op.encodeByteArray(e,!0)},_l=function(n){return u$(n).replace(/\./g,"")},Fp=function(n){try{return Op.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l$=()=>pw().__FIREBASE_DEFAULTS__,d$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Fp(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return SM()||l$()||d$()||h$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gw=n=>{var e,t;return(t=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},MM=n=>{let e=gw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mw=()=>{var n;return(n=Lp())===null||n===void 0?void 0:n.config},yw=n=>{var e;return(e=Lp())===null||e===void 0?void 0:e[`_${n}`]};var ms=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function eo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Vp(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function PM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_l(JSON.stringify(t)),_l(JSON.stringify(s)),""].join(".")}var vl={};function f$(){let n={prod:[],emulator:[]};for(let e of Object.keys(vl))vl[e]?n.emulator.push(e):n.prod.push(e);return n}function p$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var AM=!1;function jp(n,e){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||vl[n]===e||vl[n]||AM)return;vl[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=f$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{AM=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=p$(r),y=t("text"),I=document.getElementById(y)||document.createElement("span"),R=t("learnmore"),S=document.getElementById(R)||document.createElement("a"),P=t("preprendIcon"),V=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let q=g.element;a(q),h(S,R);let G=l();c(V,P),q.append(V,I,S,G),document.body.appendChild(q)}o?(I.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function g$(){var n;let e=(n=Lp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function FM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LM(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VM(){return!g$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function El(){try{return typeof indexedDB=="object"}catch{return!1}}function jM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var m$="FirebaseError",Ft=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=m$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?y$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ft(i,a,r)}};function y$(n,e){return n.replace(v$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var v$=/\{\$([^}]+)}/g;function BM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ir(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(RM(o)&&RM(s)){if(!Ir(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function RM(n){return n!==null&&typeof n=="object"}function wl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Za(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ja(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function UM(n,e){let t=new fw(n,e);return t.subscribe.bind(t)}var fw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dw),i.error===void 0&&(i.error=dw),i.complete===void 0&&(i.complete=dw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dw(){}var hue=4*60*60*1e3;function mt(n){return n&&n._delegate?n._delegate:n}var Wt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ys="[DEFAULT]";var vw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ms;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w$(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:E$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function E$(n){return n===ys?void 0:n}function w$(n){return n.instantiationMode==="EAGER"}var Bp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new vw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var I$=[],Te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Te||{}),b$={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},T$=Te.INFO,D$={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},C$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=D$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},br=class{constructor(e){this.name=e,this._logLevel=T$,this._logHandler=C$,this._userLogHandler=null,I$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var S$=(n,e)=>e.some(t=>n instanceof t),$M,HM;function A$(){return $M||($M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R$(){return HM||(HM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zM=new WeakMap,Ew=new WeakMap,qM=new WeakMap,_w=new WeakMap,Iw=new WeakMap;function N$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Tr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&zM.set(t,n)}).catch(()=>{}),Iw.set(e,n),e}function M$(n){if(Ew.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Ew.set(n,e)}var ww={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ew.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GM(n){ww=n(ww)}function P$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Up(this),e,...t);return qM.set(r,e.sort?e.sort():[e]),Tr(r)}:R$().includes(n)?function(...e){return n.apply(Up(this),e),Tr(zM.get(this))}:function(...e){return Tr(n.apply(Up(this),e))}}function k$(n){return typeof n=="function"?P$(n):(n instanceof IDBTransaction&&M$(n),S$(n,A$())?new Proxy(n,ww):n)}function Tr(n){if(n instanceof IDBRequest)return N$(n);if(_w.has(n))return _w.get(n);let e=k$(n);return e!==n&&(_w.set(n,e),Iw.set(e,n)),e}var Up=n=>Iw.get(n);function KM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Tr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Tr(s.result),c.oldVersion,c.newVersion,Tr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var x$=["get","getKey","getAll","getAllKeys","count"],O$=["put","add","delete","clear"],bw=new Map;function WM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bw.get(e))return bw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=O$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||x$.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return bw.set(e,o),o}GM(n=>oe(F({},n),{get:(e,t,r)=>WM(e,t)||n.get(e,t,r),has:(e,t)=>!!WM(e,t)||n.has(e,t)}));var Dw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function F$(n){let e=n.getComponent();return e?.type==="VERSION"}var Cw="@firebase/app",QM="0.13.2";var ni=new br("@firebase/app"),L$="@firebase/app-compat",V$="@firebase/analytics-compat",j$="@firebase/analytics",B$="@firebase/app-check-compat",U$="@firebase/app-check",$$="@firebase/auth",H$="@firebase/auth-compat",z$="@firebase/database",q$="@firebase/data-connect",G$="@firebase/database-compat",W$="@firebase/functions",K$="@firebase/functions-compat",Q$="@firebase/installations",Y$="@firebase/installations-compat",Z$="@firebase/messaging",J$="@firebase/messaging-compat",X$="@firebase/performance",eH="@firebase/performance-compat",tH="@firebase/remote-config",nH="@firebase/remote-config-compat",rH="@firebase/storage",iH="@firebase/storage-compat",oH="@firebase/firestore",sH="@firebase/ai",aH="@firebase/firestore-compat",cH="firebase",uH="11.10.0";var Sw="[DEFAULT]",lH={[Cw]:"fire-core",[L$]:"fire-core-compat",[j$]:"fire-analytics",[V$]:"fire-analytics-compat",[U$]:"fire-app-check",[B$]:"fire-app-check-compat",[$$]:"fire-auth",[H$]:"fire-auth-compat",[z$]:"fire-rtdb",[q$]:"fire-data-connect",[G$]:"fire-rtdb-compat",[W$]:"fire-fn",[K$]:"fire-fn-compat",[Q$]:"fire-iid",[Y$]:"fire-iid-compat",[Z$]:"fire-fcm",[J$]:"fire-fcm-compat",[X$]:"fire-perf",[eH]:"fire-perf-compat",[tH]:"fire-rc",[nH]:"fire-rc-compat",[rH]:"fire-gcs",[iH]:"fire-gcs-compat",[oH]:"fire-fst",[aH]:"fire-fst-compat",[sH]:"fire-vertex","fire-js":"fire-js",[cH]:"fire-js-all"};var Il=new Map,dH=new Map,Aw=new Map;function YM(n,e){try{n.container.addComponent(e)}catch(t){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function er(n){let e=n.name;if(Aw.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Aw.set(e,n);for(let t of Il.values())YM(t,n);for(let t of dH.values())YM(t,n);return!0}function Xa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function an(n){return n==null?!1:n.settings!==void 0}var hH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new Xn("app","Firebase",hH);var Rw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}};var no=uH;function Pw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Sw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw to.create("bad-app-name",{appName:String(i)});if(t||(t=mw()),!t)throw to.create("no-options");let o=Il.get(i);if(o){if(Ir(t,o.options)&&Ir(r,o.config))return o;throw to.create("duplicate-app",{appName:i})}let s=new Bp(i);for(let c of Aw.values())s.addComponent(c);let a=new Rw(t,r,s);return Il.set(i,a),a}function vs(n=Sw){let e=Il.get(n);if(!e&&n===Sw&&mw())return Pw();if(!e)throw to.create("no-app",{appName:n});return e}function $p(){return Array.from(Il.values())}function Xe(n,e,t){var r;let i=(r=lH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(a.join(" "));return}er(new Wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fH="firebase-heartbeat-database",pH=1,bl="firebase-heartbeat-store",Tw=null;function eP(){return Tw||(Tw=KM(fH,pH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bl)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),Tw}function gH(n){return _(this,null,function*(){try{let t=(yield eP()).transaction(bl),r=yield t.objectStore(bl).get(tP(n));return yield t.done,r}catch(e){if(e instanceof Ft)ni.warn(e.message);else{let t=to.create("idb-get",{originalErrorMessage:e?.message});ni.warn(t.message)}}})}function ZM(n,e){return _(this,null,function*(){try{let r=(yield eP()).transaction(bl,"readwrite");yield r.objectStore(bl).put(e,tP(n)),yield r.done}catch(t){if(t instanceof Ft)ni.warn(t.message);else{let r=to.create("idb-set",{originalErrorMessage:t?.message});ni.warn(r.message)}}})}function tP(n){return`${n.name}!${n.options.appId}`}var mH=1024,yH=30,Nw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Mw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=JM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>yH){let s=_H(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ni.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=JM(),{heartbeatsToSend:r,unsentEntries:i}=vH(this._heartbeatsCache.heartbeats),o=_l(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ni.warn(t),""}})}};function JM(){return new Date().toISOString().substring(0,10)}function vH(n,e=mH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Mw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return El()?jM().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield gH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function XM(n){return _l(JSON.stringify({version:2,heartbeats:n})).length}function _H(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function EH(n){er(new Wt("platform-logger",e=>new Dw(e),"PRIVATE")),er(new Wt("heartbeat",e=>new Nw(e),"PRIVATE")),Xe(Cw,QM,n),Xe(Cw,QM,"esm2017"),Xe("fire-js","")}EH("");var wH="firebase",IH="11.10.0";Xe(wH,IH,"app");function nP(n){n===void 0&&(n=N(Je));let e=n.get(Vi);return t=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ro=new rs("ANGULARFIRE2_VERSION");function Tl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var tc=(n,e)=>{let t=e?[e]:$p(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ec=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ec||{}),rP=V_()&&typeof Zone<"u"?ec.WARN:ec.SILENT;var Hp=class{zone;delegate;constructor(e,t=fy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},io=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=N(Ce);this.outsideAngular=t.runOutsideAngular(()=>new Hp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Hp(typeof Zone>"u"?void 0:Zone.current,Yc))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iP=!1;function bH(n,e){!iP&&(rP>ec.SILENT||V_())&&(iP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),rP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function TH(n){let e=N(Ce,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function _s(n){let e=N(Ce,{optional:!0});return e?e.run(()=>n()):n()}var DH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ue(t,()=>_s(()=>n.apply(void 0,r)))),it=(n,e,t)=>(t||=e?ec.WARN:ec.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=N(io),s=N(Vi),a=N(Be)}catch{return bH(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=_s(()=>s.add())),i[l]=DH(i[l],r,a));let c=TH(()=>n.apply(this,i));return e?c instanceof re?c.pipe(Ai(o.outsideAngular),Si(o.insideAngular),nP(a)):c instanceof Promise?_s(()=>{let l=s.add();return new Promise((h,p)=>{c.then(g=>Ue(a,()=>_s(()=>h(g))),g=>Ue(a,()=>_s(()=>p(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:_s(()=>c):c instanceof re?c.pipe(Ai(o.outsideAngular),Si(o.insideAngular)):_s(()=>c)});var ri=class{constructor(e){return e}},Es=class{constructor(){return $p()}};function CH(n){return n&&n.length===1?n[0]:new ri(vs())}var kw=new U("angularfire2._apps"),SH={provide:ri,useFactory:CH,deps:[[new Xt,kw]]},AH={provide:Es,deps:[[new Xt,kw]]};function RH(n){return(e,t)=>{let r=t.get(Bi);Xe("angularfire",ro.full,"core"),Xe("angularfire",ro.full,"app"),Xe("angular",ZA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ri(i)}}function oP(n,...e){return dn([SH,AH,{provide:kw,useFactory:RH(n),multi:!0,deps:[Ce,Je,io,...e]}])}var sP=it(Pw,!0);var NH=new Map,MH={activated:!1,tokenObservers:[]},PH={initialized:!1,enabled:!1};function tr(n){return NH.get(n)||Object.assign({},MH)}function lP(){return PH}var kH="https://content-firebaseappcheck.googleapis.com/v1";var xH="exchangeDebugToken",aP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},gle=24*60*60*1e3;var Fw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new ms,this.pending.promise.catch(t=>{}),yield OH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ms,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function OH(n){return new Promise(e=>{setTimeout(e,n)})}var FH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},oo=new Xn("appCheck","AppCheck",FH);function dP(n){if(!tr(n).activated)throw oo.create("use-before-activation",{appName:n.name})}function hP(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw oo.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw oo.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw oo.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function fP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${kH}/projects/${t}/apps/${r}:${xH}?key=${i}`,body:{debug_token:e}}}var LH="firebase-app-check-database",VH=1,Lw="firebase-app-check-store";var zp=null;function jH(){return zp||(zp=new Promise((n,e)=>{try{let t=indexedDB.open(LH,VH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Lw,{keyPath:"compositeKey"})}}}catch(t){e(oo.create("storage-open",{originalErrorMessage:t?.message}))}}),zp)}function BH(n,e){return UH($H(n),e)}function UH(n,e){return _(this,null,function*(){let r=(yield jH()).transaction(Lw,"readwrite"),o=r.objectStore(Lw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(oo.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function $H(n){return`${n.options.appId}-${n.name}`}var Dl=new br("@firebase/app-check");function xw(n,e){return El()?BH(n,e).catch(t=>{Dl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pP(){return lP().enabled}function gP(){return _(this,null,function*(){let n=lP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var HH={error:"UNKNOWN_ERROR"};function zH(n){return Op.encodeString(JSON.stringify(n),!1)}function Vw(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;dP(r);let i=tr(r),o=i.token,s;if(o&&!Cl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Cl(l)?o=l:yield xw(r,void 0))}if(!e&&o&&Cl(o))return{token:o.token};let a=!1;if(pP())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hP(fP(r,yield gP()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield xw(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Dl.warn(l.message):t&&Dl.error(l),Ow(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Dl.warn(l.message):t&&Dl.error(l),s=l}let c;return o?s?Cl(o)?c={token:o.token,internalError:s}:c=Ow(s):(c={token:o.token},i.token=o,yield xw(r,o)):c=Ow(s),a&&KH(r,c),c})}function qH(n){return _(this,null,function*(){let e=n.app;dP(e);let{provider:t}=tr(e);if(pP()){let r=yield gP(),{token:i}=yield hP(fP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function GH(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Cl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),cP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>cP(n))}function mP(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cP(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=WH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WH(n){let{app:e}=n;return new Fw(()=>_(null,null,function*(){let t=tr(e),r;if(t.token?r=yield Vw(n,!0):r=yield Vw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},aP.RETRIAL_MIN_WAIT,aP.RETRIAL_MAX_WAIT)}function KH(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Cl(n){return n.expireTimeMillis-Date.now()>0}function Ow(n){return{token:zH(HH),error:n}}var jw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)mP(this.app,t.next);return Promise.resolve()}};function QH(n,e){return new jw(n,e)}function YH(n){return{getToken:e=>Vw(n,e),getLimitedUseToken:()=>qH(n),addTokenListener:e=>GH(n,"INTERNAL",e),removeTokenListener:e=>mP(n.app,e)}}var ZH="@firebase/app-check",JH="0.10.1";var XH="app-check",uP="app-check-internal";function ez(){er(new Wt(XH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return QH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uP).initialize()})),er(new Wt(uP,n=>{let e=n.getProvider("app-check").getImmediate();return YH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xe(ZH,JH)}ez();var tz="app-check";var nc=class{constructor(){return tc(tz)}};var nz=["localhost","0.0.0.0","127.0.0.1"],Ale=typeof window<"u"&&nz.includes(window.location.hostname);function PP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kP=PP,xP=new Xn("auth","Firebase",PP());var Yp=new br("@firebase/auth");function rz(n,...e){Yp.logLevel<=Te.WARN&&Yp.warn(`Auth (${no}): ${n}`,...e)}function Gp(n,...e){Yp.logLevel<=Te.ERROR&&Yp.error(`Auth (${no}): ${n}`,...e)}function Cr(n,...e){throw lI(n,...e)}function ws(n,...e){return lI(n,...e)}function OP(n,e,t){let r=Object.assign(Object.assign({},kP()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function si(n){return OP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xP.create(n,...e)}function ne(n,e,...t){if(!n)throw lI(e,...t)}function ii(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gp(e),new Error(e)}function co(n,e){n||ii(e)}function Hw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function iz(){return yP()==="http:"||yP()==="https:"}function yP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function oz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iz()||OM()||"connection"in navigator)?navigator.onLine:!0}function sz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Is=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=kM()||FM()}get(){return oz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dI(n,e){co(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Zp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var az={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uz=new Is(3e4,6e4);function uo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function lo(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return FP(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=wl(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return xM()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&eo(n.emulatorConfig.host)&&(y.credentials="include"),Zp.fetch()(yield LP(n,n.config.apiHost,t,p),y)}))})}function FP(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},az),e);try{let i=new zw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw qp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qp(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw qp(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw qp(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw OP(n,h,l);Cr(n,h)}}catch(i){if(i instanceof Ft)throw i;Cr(n,"network-request-failed",{message:String(i)})}})}function Ol(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield lo(n,e,t,r,i);return"mfaPendingCredential"in l&&Cr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function LP(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?dI(n.config,i):`${n.config.apiScheme}://${i}`;return cz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function lz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),uz.get())})}};function qp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ws(n,e,r);return i.customData._tokenResponse=t,i}function vP(n){return n!==void 0&&n.enterprise!==void 0}var qw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function dz(n,e){return _(this,null,function*(){return lo(n,"GET","/v2/recaptchaConfig",uo(n,e))})}function hz(n,e){return _(this,null,function*(){return lo(n,"POST","/v1/accounts:delete",e)})}function Jp(n,e){return _(this,null,function*(){return lo(n,"POST","/v1/accounts:lookup",e)})}function Al(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hI(n,e=!1){return _(this,null,function*(){let t=mt(n),r=yield t.getIdToken(e),i=fI(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Al(Bw(i.auth_time)),issuedAtTime:Al(Bw(i.iat)),expirationTime:Al(Bw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Bw(n){return Number(n)*1e3}function fI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Fp(t);return i?JSON.parse(i):(Gp("Failed to decode base64 JWT payload"),null)}catch(i){return Gp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _P(n){let e=fI(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Nl(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ft&&fz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function fz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Gw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ml=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Nl(n,Jp(t,{idToken:r}));ne(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VP(o.providerUserInfo):[],a=pz(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=c?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ml(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function pI(n){return _(this,null,function*(){let e=mt(n);yield Xp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VP(n){return n.map(e=>{var{providerId:t}=e,r=py(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gz(n,e){return _(this,null,function*(){let t=yield FP(n,{},()=>_(null,null,function*(){let r=wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield LP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&eo(n.emulatorConfig.host)&&(c.credentials="include"),Zp.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function mz(n,e){return _(this,null,function*(){return lo(n,"POST","/v2/accounts:revokeToken",uo(n,e))})}var Rl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_P(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let t=_P(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield gz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ne(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ne(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ii("not implemented")}};function so(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ao=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ml(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Nl(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return hI(this,e)}reload(){return pI(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Xp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(an(this.auth.app))return Promise.reject(si(this.auth));let e=yield this.getIdToken();return yield Nl(this,hz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,V=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:q,emailVerified:G,isAnonymous:Fe,providerData:he,stsTokenManager:b}=t;ne(q&&b,e,"internal-error");let v=Rl.fromJSON(this.name,b);ne(typeof q=="string",e,"internal-error"),so(p,e.name),so(g,e.name),ne(typeof G=="boolean",e,"internal-error"),ne(typeof Fe=="boolean",e,"internal-error"),so(y,e.name),so(I,e.name),so(R,e.name),so(S,e.name),so(P,e.name),so(V,e.name);let E=new n({uid:q,auth:e,email:g,emailVerified:G,displayName:p,isAnonymous:Fe,photoURL:I,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:V});return he&&Array.isArray(he)&&(E.providerData=he.map(T=>Object.assign({},T))),S&&(E._redirectEventId=S),E}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Rl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Xp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];ne(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Rl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ml(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var EP=new Map;function oi(n){co(n instanceof Function,"Expected a class definition");let e=EP.get(n);return e?(co(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,EP.set(n,e),e)}var yz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ww=yz;function Wp(n,e,t){return`firebase:${n}:${e}:${t}`}var eg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Wp(this.userKey,i.apiKey,o),this.fullPersistenceKey=Wp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Jp(this.auth,{idToken:e}).catch(()=>{});return t?ao._fromGetAccountInfoResponse(this.auth,t,e):null}return ao._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(oi(Ww),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||oi(Ww),s=Wp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Jp(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield ao._fromGetAccountInfoResponse(e,g,h)}else p=ao._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function wP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($P(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zP(e))return"Blackberry";if(qP(e))return"Webos";if(BP(e))return"Safari";if((e.includes("chrome/")||UP(e))&&!e.includes("edge/"))return"Chrome";if(HP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jP(n=_t()){return/firefox\//i.test(n)}function BP(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UP(n=_t()){return/crios\//i.test(n)}function $P(n=_t()){return/iemobile/i.test(n)}function HP(n=_t()){return/android/i.test(n)}function zP(n=_t()){return/blackberry/i.test(n)}function qP(n=_t()){return/webos/i.test(n)}function gI(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vz(n=_t()){var e;return gI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _z(){return LM()&&document.documentMode===10}function GP(n=_t()){return gI(n)||HP(n)||qP(n)||zP(n)||/windows phone/i.test(n)||$P(n)}function WP(n,e=[]){let t;switch(n){case"Browser":t=wP(_t());break;case"Worker":t=`${wP(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${no}/${r}`}var Kw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Ez(t){return _(this,arguments,function*(n,e={}){return lo(n,"GET","/v2/passwordPolicy",uo(n,e))})}var wz=6,Qw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:wz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Yw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tg(this),this.idTokenSubscription=new tg(this),this.beforeStateQueue=new Kw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield eg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Jp(this,{idToken:e}),r=yield ao._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(an(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Xp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=sz()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(an(this.app))return Promise.reject(si(this));let t=e?mt(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return an(this.app)?Promise.reject(si(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return an(this.app)?Promise.reject(si(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Ez(this),t=new Qw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield mz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&oi(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=yield eg.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&rz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ts(n){return mt(n)}var tg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=UM(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cg={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iz(n){cg=n}function KP(n){return cg.loadJS(n)}function bz(){return cg.recaptchaEnterpriseScript}function Tz(){return cg.gapiScript}function QP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Zw=class{constructor(){this.enterprise=new Jw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Jw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Dz="recaptcha-enterprise",YP="NO_RECAPTCHA",Xw=class{constructor(e){this.type=Dz,this.auth=Ts(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){dz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new qw(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;vP(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(YP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&vP(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bz();c.length!==0&&(c+=a),KP(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Sl(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new Xw(n),s;if(i)s=YP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function eI(n,e,t,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Sl(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Sl(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Sl(n,e,t);return r(n,a).catch(c=>_(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Sl(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Sl(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function mI(n,e){let t=Xa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ir(o,e??{}))return i;Cr(i,"already-initialized")}return t.initialize({options:e})}function Cz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(oi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function yI(n,e,t){let r=Ts(n);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=ZP(e),{host:s,port:a}=Sz(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Ir(l,r.config.emulator)&&Ir(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,eo(s)?(Vp(`${o}//${s}${c}`),jp("Auth",!0)):i||Az()}function ZP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Sz(n){let e=ZP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:IP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:IP(s)}}}function IP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Az(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Pl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}};function Rz(n,e){return _(this,null,function*(){return lo(n,"POST","/v1/accounts:signUp",e)})}function Nz(n,e){return _(this,null,function*(){return Ol(n,"POST","/v1/accounts:signInWithPassword",uo(n,e))})}function Mz(n,e){return _(this,null,function*(){return Ol(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))})}function Pz(n,e){return _(this,null,function*(){return Ol(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))})}var kl=class n extends Pl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eI(e,t,"signInWithPassword",Nz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Mz(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eI(e,r,"signUpPassword",Rz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Pz(e,{idToken:t,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Uw(n,e){return _(this,null,function*(){return Ol(n,"POST","/v1/accounts:signInWithIdp",uo(n,e))})}function kz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xz(n){let e=Za(Ja(n)).link,t=e?Za(Ja(e)).deep_link_id:null,r=Za(Ja(n)).deep_link_id;return(r?Za(Ja(r)).link:null)||r||t||e||n}var ng=class n{constructor(e){var t,r,i,o,s,a;let c=Za(Ja(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=kz((i=c.mode)!==null&&i!==void 0?i:null);ne(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=xz(e);try{return new n(t)}catch{return null}}};var JP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return kl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ng.parseLink(r);return ne(i,"argument-error"),kl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var tI=class extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Oz(n,e){return _(this,null,function*(){return Ol(n,"POST","/v1/accounts:signUp",uo(n,e))})}var rc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield ao._fromIdTokenResponse(e,r,i),s=bP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=bP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function bP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var nI=class n extends Ft{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function XP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nI._fromErrorAndOperation(n,o,e,r):o})}function Fz(n,e,t=!1){return _(this,null,function*(){let r=yield Nl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return rc._forOperation(n,"link",r)})}function Lz(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(an(r.app))return Promise.reject(si(r));let i="reauthenticate";try{let o=yield Nl(n,XP(r,i,e,n),t);ne(o.idToken,r,"internal-error");let s=fI(o.idToken);ne(s,r,"internal-error");let{sub:a}=s;return ne(n.uid===a,r,"user-mismatch"),rc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cr(r,"user-mismatch"),o}})}function ek(n,e,t=!1){return _(this,null,function*(){if(an(n.app))return Promise.reject(si(n));let r="signIn",i=yield XP(n,r,e),o=yield rc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function vI(n,e){return _(this,null,function*(){return ek(Ts(n),e)})}function tk(n){return _(this,null,function*(){let e=Ts(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function _I(n,e,t){return _(this,null,function*(){if(an(n.app))return Promise.reject(si(n));let r=Ts(n),s=yield eI(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tk(n),c}),a=yield rc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function EI(n,e,t){return an(n.app)?Promise.reject(si(n)):vI(mt(n),JP.credential(e,t)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&tk(n),r}))}function ug(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function wI(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function lg(n,e,t,r){return mt(n).onAuthStateChanged(e,t,r)}function II(n){return mt(n).signOut()}var ig="__sak";var og=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ig,"1"),this.storage.removeItem(ig),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Vz=1e3,jz=10,Bz=(()=>{class n extends og{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);_z()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,jz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Vz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Ti(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Ti(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Ti(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),nk=Bz;var Uz=(()=>{class n extends og{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),bI=Uz;function $z(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Hz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield $z(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function rk(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var rI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=rk("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Dr(){return window}function zz(n){Dr().location.href=n}function ik(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}function qz(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Gz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Wz(){return ik()?self:null}var ok="firebaseLocalStorageDb",Kz=1,sg="firebaseLocalStorage",sk="fbase_key",bs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dg(n,e){return n.transaction([sg],e?"readwrite":"readonly").objectStore(sg)}function Qz(){let n=indexedDB.deleteDatabase(ok);return new bs(n).toPromise()}function iI(){let n=indexedDB.open(ok,Kz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(sg,{keyPath:sk})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(sg)?e(r):(r.close(),yield Qz(),e(yield iI()))}))})}function TP(n,e,t){return _(this,null,function*(){let r=dg(n,!0).put({[sk]:e,value:t});return new bs(r).toPromise()})}function Yz(n,e){return _(this,null,function*(){let t=dg(n,!1).get(e),r=yield new bs(t).toPromise();return r===void 0?null:r.value})}function DP(n,e){let t=dg(n,!0).delete(e);return new bs(t).toPromise()}var Zz=800,Jz=3,Xz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield iI(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Jz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return ik()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=Hz._getInstance(Wz()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield qz(),!this.activeServiceWorker)return;this.sender=new rI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Gz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield iI();return yield TP(t,ig,"1"),yield DP(t,ig),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>TP(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>Yz(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>DP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=dg(o,!1).getAll();return new bs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),Zz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ak=Xz;var Fle=QP("rcb"),Lle=new Is(3e4,6e4);function eq(n,e){return e?oi(e):(ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var xl=class extends Pl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Uw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Uw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function tq(n){return ek(n.auth,new xl(n),n.bypassAuthState)}function nq(n){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),Lz(t,new xl(n),n.bypassAuthState)}function rq(n){return _(this,null,function*(){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),Fz(t,new xl(n),n.bypassAuthState)})}var oI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tq;case"linkViaPopup":case"linkViaRedirect":return rq;case"reauthViaPopup":case"reauthViaRedirect":return nq;default:Cr(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Vle=new Is(2e3,1e4);var iq="pendingRedirect",Kp=new Map,sI=class n extends oI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Kp.get(this.auth._key());if(!e){try{let r=(yield oq(this.resolver,this.auth))?yield Ti(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Kp.set(this.auth._key(),e)}return this.bypassAuthState||Kp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Ti(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ti(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function oq(n,e){return _(this,null,function*(){let t=cq(e),r=aq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function sq(n,e){Kp.set(n._key(),e)}function aq(n){return oi(n._redirectPersistence)}function cq(n){return Wp(iq,n.config.apiKey,n.name)}function uq(n,e,t=!1){return _(this,null,function*(){if(an(n.app))return Promise.reject(si(n));let r=Ts(n),i=eq(r,e),s=yield new sI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var lq=10*60*1e3,aI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ck(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lq&&this.cachedEventUids.clear(),this.cachedEventUids.has(CP(e))}saveEventToCache(e){this.cachedEventUids.add(CP(e)),this.lastProcessedEventTime=Date.now()}};function CP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ck({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ck(n);default:return!1}}function hq(t){return _(this,arguments,function*(n,e={}){return lo(n,"GET","/v1/projects",e)})}var fq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pq=/^https?/;function gq(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield hq(n);for(let t of e)try{if(mq(t))return}catch{}Cr(n,"unauthorized-domain")})}function mq(n){let e=Hw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!pq.test(t))return!1;if(fq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var yq=new Is(3e4,6e4);function SP(){let n=Dr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vq(n){return new Promise((e,t)=>{var r,i,o;function s(){SP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SP(),t(ws(n,"network-request-failed"))},timeout:yq.get()})}if(!((i=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Dr().gapi)===null||o===void 0)&&o.load)s();else{let a=QP("iframefcb");return Dr()[a]=()=>{gapi.load?s():t(ws(n,"network-request-failed"))},KP(`${Tz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Qp=null,e})}var Qp=null;function _q(n){return Qp=Qp||vq(n),Qp}var Eq=new Is(5e3,15e3),wq="__/auth/iframe",Iq="emulator/auth/iframe",bq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dq(n){let e=n.config;ne(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?dI(e,Iq):`https://${n.config.authDomain}/${wq}`,r={apiKey:e.apiKey,appName:n.name,v:no},i=Tq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wl(r).slice(1)}`}function Cq(n){return _(this,null,function*(){let e=yield _q(n),t=Dr().gapi;return ne(t,n,"internal-error"),e.open({where:document.body,url:Dq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bq,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ws(n,"network-request-failed"),a=Dr().setTimeout(()=>{o(s)},Eq.get());function c(){Dr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var Sq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Aq=500,Rq=600,Nq="_blank",Mq="http://localhost",ag=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Pq(n,e,t,r=Aq,i=Rq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Sq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=_t().toLowerCase();t&&(a=UP(l)?Nq:t),jP(l)&&(e=e||Mq,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,I])=>`${g}${y}=${I},`,"");if(vz(l)&&a!=="_self")return kq(e||"",a),new ag(null);let p=window.open(e||"",a,h);ne(p,n,"popup-blocked");try{p.focus()}catch{}return new ag(p)}function kq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var xq="__/auth/handler",Oq="emulator/auth/handler",Fq=encodeURIComponent("fac");function AP(n,e,t,r,i,o){return _(this,null,function*(){ne(n.config.authDomain,n,"auth-domain-config-required"),ne(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:no,eventId:i};if(e instanceof rg){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",BM(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof tI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${Fq}=${encodeURIComponent(c)}`:"";return`${Lq(n)}?${wl(a).slice(1)}${l}`})}function Lq({config:n}){return n.emulator?dI(n,Oq):`https://${n.authDomain}/${xq}`}var $w="webStorageSupport",cI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bI,this._completeRedirectFn=uq,this._overrideRedirectResult=sq}_openPopup(e,t,r,i){return _(this,null,function*(){var o;co((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield AP(e,t,r,Hw(),i);return Pq(e,s,rk())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield AP(e,t,r,Hw(),i);return zz(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(co(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Cq(e),r=new aI(e);return t.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($w,{type:$w},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[$w];s!==void 0&&t(!!s),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GP()||BP()||gI()}},uk=cI;var RP="@firebase/auth",NP="1.10.8";var uI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Vq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jq(n){er(new Wt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ne(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WP(n)},l=new Yw(r,i,o,c);return Cz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),er(new Wt("auth-internal",e=>{let t=Ts(e.getProvider("auth").getImmediate());return(r=>new uI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(RP,NP,Vq(n)),Xe(RP,NP,"esm2017")}var Bq=5*60,Uq=yw("authIdTokenMaxAge")||Bq,MP=null,$q=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Uq)return;let i=t?.token;MP!==i&&(MP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function TI(n=vs()){let e=Xa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=mI(n,{popupRedirectResolver:uk,persistence:[ak,nk,bI]}),r=yw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=$q(o.toString());wI(t,s,()=>s(t.currentUser)),ug(t,a=>s(a))}}let i=gw("auth");return i&&yI(t,`http://${i}`),t}function Hq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Iz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ws("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Hq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jq("Browser");function dk(n){return new re(function(e){var t=lg(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var hk="auth",nr=class{constructor(e){return e}},Fl=class{constructor(){return tc(hk)}};var DI=new U("angularfire2.auth-instances");function N8(n,e){let t=Tl(hk,n,e);return t&&new nr(t)}function M8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nr(r)}}var P8={provide:Fl,deps:[[new Xt,DI]]},k8={provide:nr,useFactory:N8,deps:[[new Xt,DI],ri]};function fk(n,...e){return Xe("angularfire",ro.full,"auth"),dn([k8,P8,{provide:DI,useFactory:M8(n),multi:!0,deps:[Ce,Je,io,Es,[new Xt,nc],...e]}])}var pk=it(dk,!0);var gk=it(_I,!0,2);var mk=it(TI,!0);var yk=it(EI,!0,2);var vk=it(II,!0,2);var _k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ek={};var ai,CI;(function(){var n;function e(b,v){function E(){}E.prototype=v.prototype,b.D=v.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(T,D,A){for(var w=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)w[_n-2]=arguments[_n];return v.prototype[D].apply(T,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,E){E||(E=0);var T=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)T[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)T[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=b.g[0],E=b.g[1],D=b.g[2];var A=b.g[3],w=v+(A^E&(D^A))+T[0]+3614090360&4294967295;v=E+(w<<7&4294967295|w>>>25),w=A+(D^v&(E^D))+T[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(E^A&(v^E))+T[2]+606105819&4294967295,D=A+(w<<17&4294967295|w>>>15),w=E+(v^D&(A^v))+T[3]+3250441966&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(A^E&(D^A))+T[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(D^v&(E^D))+T[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(E^A&(v^E))+T[6]+2821735955&4294967295,D=A+(w<<17&4294967295|w>>>15),w=E+(v^D&(A^v))+T[7]+4249261313&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(A^E&(D^A))+T[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(D^v&(E^D))+T[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(E^A&(v^E))+T[10]+4294925233&4294967295,D=A+(w<<17&4294967295|w>>>15),w=E+(v^D&(A^v))+T[11]+2304563134&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(A^E&(D^A))+T[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(D^v&(E^D))+T[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(E^A&(v^E))+T[14]+2792965006&4294967295,D=A+(w<<17&4294967295|w>>>15),w=E+(v^D&(A^v))+T[15]+1236535329&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(D^A&(E^D))+T[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^D&(v^E))+T[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(A^v))+T[11]+643717713&4294967295,D=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(D^A))+T[0]+3921069994&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(E^D))+T[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^D&(v^E))+T[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(A^v))+T[15]+3634488961&4294967295,D=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(D^A))+T[4]+3889429448&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(E^D))+T[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^D&(v^E))+T[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(A^v))+T[3]+4107603335&4294967295,D=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(D^A))+T[8]+1163531501&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(E^D))+T[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^D&(v^E))+T[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(A^v))+T[7]+1735328473&4294967295,D=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(D^A))+T[12]+2368359562&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(E^D^A)+T[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^D)+T[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^E)+T[11]+1839030562&4294967295,D=A+(w<<16&4294967295|w>>>16),w=E+(D^A^v)+T[14]+4259657740&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^A)+T[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^D)+T[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^E)+T[7]+4139469664&4294967295,D=A+(w<<16&4294967295|w>>>16),w=E+(D^A^v)+T[10]+3200236656&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^A)+T[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^D)+T[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^E)+T[3]+3572445317&4294967295,D=A+(w<<16&4294967295|w>>>16),w=E+(D^A^v)+T[6]+76029189&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^A)+T[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^D)+T[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^E)+T[15]+530742520&4294967295,D=A+(w<<16&4294967295|w>>>16),w=E+(D^A^v)+T[2]+3299628645&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(D^(E|~A))+T[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~D))+T[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~E))+T[14]+2878612391&4294967295,D=A+(w<<15&4294967295|w>>>17),w=E+(A^(D|~v))+T[5]+4237533241&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~A))+T[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~D))+T[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~E))+T[10]+4293915773&4294967295,D=A+(w<<15&4294967295|w>>>17),w=E+(A^(D|~v))+T[1]+2240044497&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~A))+T[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~D))+T[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~E))+T[6]+2734768916&4294967295,D=A+(w<<15&4294967295|w>>>17),w=E+(A^(D|~v))+T[13]+1309151649&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~A))+T[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~D))+T[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~E))+T[2]+718787259&4294967295,D=A+(w<<15&4294967295|w>>>17),w=E+(A^(D|~v))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+A&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var E=v-this.blockSize,T=this.B,D=this.h,A=0;A<v;){if(D==0)for(;A<=E;)i(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<v;)if(T[D++]=b.charCodeAt(A++),D==this.blockSize){i(this,T),D=0;break}}else for(;A<v;)if(T[D++]=b[A++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var E=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=E&255,E/=256;for(this.u(b),b=Array(16),v=E=0;4>v;++v)for(var T=0;32>T;T+=8)b[E++]=this.g[v]>>>T&255;return b};function o(b,v){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=v(b)}function s(b,v){this.h=v;for(var E=[],T=!0,D=b.length-1;0<=D;D--){var A=b[D]|0;T&&A==v||(E[D]=A,T=!1)}this.g=E}var a={};function c(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return S(l(-b));for(var v=[],E=1,T=0;b>=E;T++)v[T]=b/E|0,E*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return S(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),T=p,D=0;D<b.length;D+=8){var A=Math.min(8,b.length-D),w=parseInt(b.substring(D,D+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(w))):(T=T.j(E),T=T.add(l(w)))}return T}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(R(this))return-S(this).m();for(var b=0,v=1,E=0;E<this.g.length;E++){var T=this.i(E);b+=(0<=T?T:4294967296+T)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(R(this))return"-"+S(this).toString(b);for(var v=l(Math.pow(b,6)),E=this,T="";;){var D=G(E,v).g;E=P(E,D.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=D,I(E))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function R(b){return b.h==-1}n.l=function(b){return b=P(this,b),R(b)?-1:I(b)?0:1};function S(b){for(var v=b.g.length,E=[],T=0;T<v;T++)E[T]=~b.g[T];return new s(E,~b.h).add(g)}n.abs=function(){return R(this)?S(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0,D=0;D<=v;D++){var A=T+(this.i(D)&65535)+(b.i(D)&65535),w=(A>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);T=w>>>16,A&=65535,w&=65535,E[D]=w<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function P(b,v){return b.add(S(v))}n.j=function(b){if(I(this)||I(b))return p;if(R(this))return R(b)?S(this).j(S(b)):S(S(this).j(b));if(R(b))return S(this.j(S(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,E=[],T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<b.g.length;D++){var A=this.i(T)>>>16,w=this.i(T)&65535,_n=b.i(D)>>>16,vi=b.i(D)&65535;E[2*T+2*D]+=w*vi,V(E,2*T+2*D),E[2*T+2*D+1]+=A*vi,V(E,2*T+2*D+1),E[2*T+2*D+1]+=w*_n,V(E,2*T+2*D+1),E[2*T+2*D+2]+=A*_n,V(E,2*T+2*D+2)}for(T=0;T<v;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=v;T<2*v;T++)E[T]=0;return new s(E,0)};function V(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function q(b,v){this.g=b,this.h=v}function G(b,v){if(I(v))throw Error("division by zero");if(I(b))return new q(p,p);if(R(b))return v=G(S(b),v),new q(S(v.g),S(v.h));if(R(v))return v=G(b,S(v)),new q(S(v.g),v.h);if(30<b.g.length){if(R(b)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,T=v;0>=T.l(b);)E=Fe(E),T=Fe(T);var D=he(E,1),A=he(T,1);for(T=he(T,2),E=he(E,2);!I(T);){var w=A.add(T);0>=w.l(b)&&(D=D.add(E),A=w),T=he(T,1),E=he(E,1)}return v=P(b,D.j(v)),new q(D,v)}for(D=p;0<=b.l(v);){for(E=Math.max(1,Math.floor(b.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(E),w=A.j(v);R(w)||0<w.l(b);)E-=T,A=l(E),w=A.j(v);I(A)&&(A=g),D=D.add(A),b=P(b,w)}return new q(D,b)}n.A=function(b){return G(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)&b.i(T);return new s(E,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)|b.i(T);return new s(E,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)^b.i(T);return new s(E,this.h^b.h)};function Fe(b){for(var v=b.g.length+1,E=[],T=0;T<v;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new s(E,b.h)}function he(b,v){var E=v>>5;v%=32;for(var T=b.g.length-E,D=[],A=0;A<T;A++)D[A]=0<v?b.i(A+E)>>>v|b.i(A+E+1)<<32-v:b.i(A+E);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CI=Ek.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ai=Ek.Integer=s}).apply(typeof _k<"u"?_k:typeof self<"u"?self:typeof window<"u"?window:{});var hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var SI,x8,ic,AI,Ll,fg,RI,NI,MI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hg=="object"&&hg];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var C=u[m];if(!(C in f))break e;f=f[C]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,m=!1,C={next:function(){if(!m&&f<u.length){var M=f++;return{value:d(M,u[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,C,M){for(var L=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)L[Oe-2]=arguments[Oe];return d.prototype[C].apply(m,L)}}function R(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function S(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let C=u.length||0,M=m.length||0;u.length=C+M;for(let L=0;L<M;L++)u[C+L]=m[L]}else u.push(m)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(u){return/^[\s\xa0]*$/.test(u)}function q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var Fe=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function he(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function b(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)u[f]=m[f];for(let M=0;M<E.length;M++)f=E[M],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function w(){var u=we;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class _n{constructor(){this.h=this.g=null}add(d,f){let m=vi.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var vi=new P(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,we=new _n,tt=()=>{let u=a.Promise.resolve(void 0);Q=()=>{u.then(En)}};var En=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){A(f)}var d=vi;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}J=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function _i(u,d){if(Le.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Fe){e:{try{G(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Tm[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&_i.aa.h.call(this)}}I(_i,Le);var Tm={2:"touch",3:"pen",4:"mouse"};_i.prototype.h=function(){_i.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Or=0;function Kt(u,d,f,m,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Or,this.da=this.fa=!1}function Fr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ei(u){this.src=u,this.g={},this.h=0}Ei.prototype.add=function(u,d,f,m,C){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var L=Cm(u,d,m,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new Kt(d,this.src,M,!!m,C),d.fa=f,u.push(d)),d};function Dm(u,d){var f=d.type;if(f in u.g){var m=u.g[f],C=Array.prototype.indexOf.call(m,d,void 0),M;(M=0<=C)&&Array.prototype.splice.call(m,C,1),M&&(Fr(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Cm(u,d,f,m){for(var C=0;C<u.length;++C){var M=u[C];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==m)return C}return-1}var Sm="closure_lm_"+(1e6*Math.random()|0),Am={};function dT(u,d,f,m,C){if(m&&m.once)return fT(u,d,f,m,C);if(Array.isArray(d)){for(var M=0;M<d.length;M++)dT(u,d[M],f,m,C);return null}return f=Pm(f),u&&u[Qe]?u.K(d,f,l(m)?!!m.capture:!!m,C):hT(u,d,f,!1,m,C)}function hT(u,d,f,m,C,M){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Oe=Nm(u);if(Oe||(u[Sm]=Oe=new Ei(u)),f=Oe.add(d,f,m,L,M),f.proxy)return f;if(m=V1(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Ve||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),m,C);else if(u.attachEvent)u.attachEvent(gT(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function V1(){function u(f){return d.call(u.src,u.listener,f)}let d=j1;return u}function fT(u,d,f,m,C){if(Array.isArray(d)){for(var M=0;M<d.length;M++)fT(u,d[M],f,m,C);return null}return f=Pm(f),u&&u[Qe]?u.L(d,f,l(m)?!!m.capture:!!m,C):hT(u,d,f,!0,m,C)}function pT(u,d,f,m,C){if(Array.isArray(d))for(var M=0;M<d.length;M++)pT(u,d[M],f,m,C);else m=l(m)?!!m.capture:!!m,f=Pm(f),u&&u[Qe]?(u=u.i,d=String(d).toString(),d in u.g&&(M=u.g[d],f=Cm(M,f,m,C),-1<f&&(Fr(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete u.g[d],u.h--)))):u&&(u=Nm(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Cm(d,f,m,C)),(f=-1<u?d[u]:null)&&Rm(f))}function Rm(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Qe])Dm(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(gT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Nm(d))?(Dm(f,u),f.h==0&&(f.src=null,d[Sm]=null)):Fr(u)}}}function gT(u){return u in Am?Am[u]:Am[u]="on"+u}function j1(u,d){if(u.da)u=!0;else{d=new _i(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&Rm(u),u=f.call(m,d)}return u}function Nm(u){return u=u[Sm],u instanceof Ei?u:null}var Mm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pm(u){return typeof u=="function"?u:(u[Mm]||(u[Mm]=function(d){return u.handleEvent(d)}),u[Mm])}function Rt(){Ke.call(this),this.i=new Ei(this),this.M=this,this.F=null}I(Rt,Ke),Rt.prototype[Qe]=!0,Rt.prototype.removeEventListener=function(u,d,f,m){pT(this,u,d,f,m)};function jt(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new Le(d,u);else if(d instanceof Le)d.target=d.target||u;else{var C=d;d=new Le(m,u),T(d,C)}if(C=!0,f)for(var M=f.length-1;0<=M;M--){var L=d.g=f[M];C=fd(L,m,!0,d)&&C}if(L=d.g=u,C=fd(L,m,!0,d)&&C,C=fd(L,m,!1,d)&&C,f)for(M=0;M<f.length;M++)L=d.g=f[M],C=fd(L,m,!1,d)&&C}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)Fr(f[m]);delete u.g[d],u.h--}}this.F=null},Rt.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},Rt.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function fd(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,M=0;M<d.length;++M){var L=d[M];if(L&&!L.da&&L.capture==f){var Oe=L.listener,It=L.ha||L.src;L.fa&&Dm(u.i,L),C=Oe.call(It,m)!==!1&&C}}return C&&!m.defaultPrevented}function mT(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function yT(u){u.g=mT(()=>{u.g=null,u.i&&(u.i=!1,yT(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class B1 extends Ke{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mc(u){Ke.call(this),this.h=u,this.g={}}I(Mc,Ke);var vT=[];function _T(u){he(u.g,function(d,f){this.g.hasOwnProperty(f)&&Rm(d)},u),u.g={}}Mc.prototype.N=function(){Mc.aa.N.call(this),_T(this)},Mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=a.JSON.stringify,U1=a.JSON.parse,$1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function xm(){}xm.prototype.h=null;function ET(u){return u.h||(u.h=u.i())}function wT(){}var Pc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Om(){Le.call(this,"d")}I(Om,Le);function Fm(){Le.call(this,"c")}I(Fm,Le);var Do={},IT=null;function pd(){return IT=IT||new Rt}Do.La="serverreachability";function bT(u){Le.call(this,Do.La,u)}I(bT,Le);function kc(u){let d=pd();jt(d,new bT(d))}Do.STAT_EVENT="statevent";function TT(u,d){Le.call(this,Do.STAT_EVENT,u),this.stat=d}I(TT,Le);function Bt(u){let d=pd();jt(d,new TT(d,u))}Do.Ma="timingevent";function DT(u,d){Le.call(this,Do.Ma,u),this.size=d}I(DT,Le);function xc(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Oc(){this.g=!0}Oc.prototype.xa=function(){this.g=!1};function H1(u,d,f,m,C,M){u.info(function(){if(u.g)if(M)for(var L="",Oe=M.split("&"),It=0;It<Oe.length;It++){var Ae=Oe[It].split("=");if(1<Ae.length){var Nt=Ae[0];Ae=Ae[1];var Mt=Nt.split("_");L=2<=Mt.length&&Mt[1]=="type"?L+(Nt+"="+Ae+"&"):L+(Nt+"=redacted&")}}else L=null;else L=M;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function z1(u,d,f,m,C,M,L){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+M+" "+L})}function $s(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+G1(u,f)+(m?" "+m:"")})}function q1(u,d){u.info(function(){return"TIMEOUT: "+d})}Oc.prototype.info=function(){};function G1(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return km(f)}catch{return d}}var gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},CT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lm;function md(){}I(md,xm),md.prototype.g=function(){return new XMLHttpRequest},md.prototype.i=function(){return{}},Lm=new md;function wi(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new Mc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ST}function ST(){this.i=null,this.g="",this.h=!1}var AT={},Vm={};function jm(u,d,f){u.L=1,u.v=Ed(Lr(d)),u.m=f,u.P=!0,RT(u,null)}function RT(u,d){u.F=Date.now(),yd(u),u.A=Lr(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),HT(f.i,"t",m),u.C=0,f=u.j.J,u.h=new ST,u.g=aD(u.j,f?d:null,!u.m),0<u.O&&(u.M=new B1(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(vT[0]=C.toString()),C=vT);for(var M=0;M<C.length;M++){var L=dT(f,C[M],m||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),kc(),H1(u.i,u.u,u.A,u.l,u.R,u.m)}wi.prototype.ca=function(u){u=u.target;let d=this.M;d&&Vr(u)==3?d.j():this.Y(u)},wi.prototype.Y=function(u){try{if(u==this.g)e:{let Mt=Vr(this.g);var d=this.g.Ba();let qs=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||YT(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=qs?kc(3):kc(2)),Bm(this);var f=this.g.Z();this.X=f;t:if(NT(this)){var m=YT(this.g);u="";var C=m.length,M=Vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Co(this),Fc(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(M&&d==C-1)});m.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,z1(this.i,this.u,this.A,this.l,this.R,Mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,It=this.g;if((Oe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Oe)){var Ae=Oe;break t}}Ae=null}if(f=Ae)$s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,f);else{this.o=!1,this.s=3,Bt(12),Co(this),Fc(this);break e}}if(this.P){f=!0;let kn;for(;!this.J&&this.C<L.length;)if(kn=W1(this,L),kn==Vm){Mt==4&&(this.s=4,Bt(14),f=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==AT){this.s=4,Bt(15),$s(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else $s(this.i,this.l,kn,null),Um(this,kn);if(NT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||L.length!=0||this.h.h||(this.s=1,Bt(16),f=!1),this.o=this.o&&f,!f)$s(this.i,this.l,L,"[Invalid Chunked Response]"),Co(this),Fc(this);else if(0<L.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Wm(Nt),Nt.M=!0,Bt(11))}}else $s(this.i,this.l,L,null),Um(this,L);Mt==4&&Co(this),this.o&&!this.J&&(Mt==4?rD(this.j,this):(this.o=!1,yd(this)))}else lF(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Co(this),Fc(this)}}}catch{}finally{}};function NT(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function W1(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?Vm:(f=Number(d.substring(f,m)),isNaN(f)?AT:(m+=1,m+f>d.length?Vm:(d=d.slice(m,m+f),u.C=m+f,d)))}wi.prototype.cancel=function(){this.J=!0,Co(this)};function yd(u){u.S=Date.now()+u.I,MT(u,u.I)}function MT(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xc(g(u.ba,u),d)}function Bm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}wi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(q1(this.i,this.A),this.L!=2&&(kc(),Bt(17)),Co(this),this.s=2,Fc(this)):MT(this,this.S-u)};function Fc(u){u.j.G==0||u.J||rD(u.j,u)}function Co(u){Bm(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,_T(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Um(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||$m(f.h,u))){if(!u.K&&$m(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Dd(f),bd(f);else break e;Gm(f),Bt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=xc(g(f.Za,f),6e3));if(1>=xT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ao(f,11)}else if((u.K||f.g==u)&&Dd(f),!V(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ae=C[d];if(f.T=Ae[0],Ae=Ae[1],f.G==2)if(Ae[0]=="c"){f.K=Ae[1],f.ia=Ae[2];let Nt=Ae[3];Nt!=null&&(f.la=Nt,f.j.info("VER="+f.la));let Mt=Ae[4];Mt!=null&&(f.Aa=Mt,f.j.info("SVER="+f.Aa));let qs=Ae[5];qs!=null&&typeof qs=="number"&&0<qs&&(m=1.5*qs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let kn=u.g;if(kn){let Sd=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sd){var M=m.h;M.g||Sd.indexOf("spdy")==-1&&Sd.indexOf("quic")==-1&&Sd.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Hm(M,M.h),M.h=null))}if(m.D){let Km=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Km&&(m.ya=Km,je(m.I,m.D,Km))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=u;if(m.qa=sD(m,m.J?m.ia:null,m.W),L.K){OT(m.h,L);var Oe=L,It=m.L;It&&(Oe.I=It),Oe.B&&(Bm(Oe),yd(Oe)),m.g=L}else tD(m);0<f.i.length&&Td(f)}else Ae[0]!="stop"&&Ae[0]!="close"||Ao(f,7);else f.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ao(f,7):qm(f):Ae[0]!="noop"&&f.l&&f.l.ta(Ae),f.v=0)}}kc(4)}catch{}}var K1=class{constructor(u,d){this.g=u,this.map=d}};function PT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xT(u){return u.h?1:u.g?u.g.size:0}function $m(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Hm(u,d){u.g?u.g.add(d):u.h=d}function OT(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}PT.prototype.cancel=function(){if(this.i=FT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function FT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return R(u.i)}function Q1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function Y1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function LT(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=Y1(u),m=Q1(u),C=m.length,M=0;M<C;M++)d.call(void 0,m[M],f&&f[M],u)}var VT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z1(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),C=null;if(0<=m){var M=u[f].substring(0,m);C=u[f].substring(m+1)}else M=u[f];d(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function So(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof So){this.h=u.h,vd(this,u.j),this.o=u.o,this.g=u.g,_d(this,u.s),this.l=u.l;var d=u.i,f=new jc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),jT(this,f),this.m=u.m}else u&&(d=String(u).match(VT))?(this.h=!1,vd(this,d[1]||"",!0),this.o=Lc(d[2]||""),this.g=Lc(d[3]||"",!0),_d(this,d[4]),this.l=Lc(d[5]||"",!0),jT(this,d[6]||"",!0),this.m=Lc(d[7]||"")):(this.h=!1,this.i=new jc(null,this.h))}So.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Vc(d,BT,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Vc(d,BT,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Vc(f,f.charAt(0)=="/"?eF:X1,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Vc(f,nF)),u.join("")};function Lr(u){return new So(u)}function vd(u,d,f){u.j=f?Lc(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function _d(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function jT(u,d,f){d instanceof jc?(u.i=d,rF(u.i,u.h)):(f||(d=Vc(d,tF)),u.i=new jc(d,u.h))}function je(u,d,f){u.i.set(d,f)}function Ed(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Lc(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vc(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,J1),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function J1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var BT=/[#\/\?@]/g,X1=/[#\?:]/g,eF=/[#\?]/g,tF=/[#\?@]/g,nF=/#/g;function jc(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ii(u){u.g||(u.g=new Map,u.h=0,u.i&&Z1(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=jc.prototype,n.add=function(u,d){Ii(this),this.i=null,u=Hs(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function UT(u,d){Ii(u),d=Hs(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function $T(u,d){return Ii(u),d=Hs(u,d),u.g.has(d)}n.forEach=function(u,d){Ii(this),this.g.forEach(function(f,m){f.forEach(function(C){u.call(d,C,m,this)},this)},this)},n.na=function(){Ii(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=u[m];for(let M=0;M<C.length;M++)f.push(d[m])}return f},n.V=function(u){Ii(this);let d=[];if(typeof u=="string")$T(this,u)&&(d=d.concat(this.g.get(Hs(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Ii(this),this.i=null,u=Hs(this,u),$T(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function HT(u,d,f){UT(u,d),0<f.length&&(u.i=null,u.g.set(Hs(u,d),R(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let M=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=M;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),u.push(C)}}return this.i=u.join("&")};function Hs(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function rF(u,d){d&&!u.j&&(Ii(u),u.i=null,u.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(UT(this,m),HT(this,C,f))},u)),u.j=d}function iF(u,d){let f=new Oc;if(a.Image){let m=new Image;m.onload=y(bi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(bi,f,"TestLoadImage: error",!1,d,m),m.onabort=y(bi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(bi,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function oF(u,d){let f=new Oc,m=new AbortController,C=setTimeout(()=>{m.abort(),bi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(M=>{clearTimeout(C),M.ok?bi(f,"TestPingServer: ok",!0,d):bi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),bi(f,"TestPingServer: error",!1,d)})}function bi(u,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function sF(){this.g=new $1}function aF(u,d,f){let m=f||"";try{LT(u,function(C,M){let L=C;l(C)&&(L=km(C)),d.push(m+M+"="+encodeURIComponent(L))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Bc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Bc,xm),Bc.prototype.g=function(){return new wd(this.l,this.j)},Bc.prototype.i=function(u){return function(){return u}}({});function wd(u,d){Rt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(wd,Rt),n=wd.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,$c(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$c(this)),this.g&&(this.readyState=3,$c(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Uc(this):$c(this),this.readyState==3&&zT(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Uc(this))},n.Qa=function(u){this.g&&(this.response=u,Uc(this))},n.ga=function(){this.g&&Uc(this)};function Uc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,$c(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function $c(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qT(u){let d="";return he(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function zm(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=qT(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):je(u,d,f))}function Ye(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ye,Rt);var cF=/^https?$/i,uF=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lm.g(),this.v=this.o?ET(this.o):ET(Lm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(M){GT(this,M);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())f.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uF,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,L]of f)this.g.setRequestHeader(M,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QT(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){GT(this,M)}};function GT(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,WT(u),Id(u)}function WT(u){u.A||(u.A=!0,jt(u,"complete"),jt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,jt(this,"complete"),jt(this,"abort"),Id(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Id(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?KT(this):this.bb())},n.bb=function(){KT(this)};function KT(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Vr(u)!=4||u.Z()!=2)){if(u.u&&Vr(u)==4)mT(u.Ea,0,u);else if(jt(u,"readystatechange"),Vr(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=L===0){var C=String(u.D).match(VT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!cF.test(C?C.toLowerCase():"")}f=m}if(f)jt(u,"complete"),jt(u,"success");else{u.m=6;try{var M=2<Vr(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",WT(u)}}finally{Id(u)}}}}function Id(u,d){if(u.g){QT(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||jt(u,"ready");try{f.onreadystatechange=m}catch{}}}function QT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Vr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),U1(d)}};function YT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function lF(u){let d={};u=(u.g&&2<=Vr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(V(u[m]))continue;var f=D(u[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[C]||[];d[C]=M,M.push(f)}b(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hc(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function ZT(u){this.Aa=0,this.i=[],this.j=new Oc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hc("baseRetryDelayMs",5e3,u),this.cb=Hc("retryDelaySeedMs",1e4,u),this.Wa=Hc("forwardChannelMaxRetries",2,u),this.wa=Hc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new PT(u&&u.concurrentRequestLimit),this.Da=new sF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ZT.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,m){Bt(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=sD(this,null,this.W),Td(this)};function qm(u){if(JT(u),u.G==3){var d=u.U++,f=Lr(u.I);if(je(f,"SID",u.K),je(f,"RID",d),je(f,"TYPE","terminate"),zc(u,f),d=new wi(u,u.j,d),d.L=2,d.v=Ed(Lr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=aD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),yd(d)}oD(u)}function bd(u){u.g&&(Wm(u),u.g.cancel(),u.g=null)}function JT(u){bd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Dd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Td(u){if(!kT(u.h)&&!u.s){u.s=!0;var d=u.Ga;Q||tt(),J||(Q(),J=!0),we.add(d,u),u.B=0}}function dF(u,d){return xT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xc(g(u.Ga,u,d),iD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new wi(this,this.j,u),M=this.o;if(this.S&&(M?(M=v(M),T(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=eD(this,C,d),f=Lr(this.I),je(f,"RID",u),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),zc(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(qT(M)))+"&"+d:this.m&&zm(f,this.m,M)),Hm(this.h,C),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),C.T=!0,jm(C,f,null)):jm(C,f,d),this.G=2}}else this.G==3&&(u?XT(this,u):this.i.length==0||kT(this.h)||XT(this))};function XT(u,d){var f;d?f=d.l:f=u.U++;let m=Lr(u.I);je(m,"SID",u.K),je(m,"RID",f),je(m,"AID",u.T),zc(u,m),u.m&&u.o&&zm(m,u.m,u.o),f=new wi(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=eD(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hm(u.h,f),jm(f,m,d)}function zc(u,d){u.H&&he(u.H,function(f,m){je(d,m,f)}),u.l&&LT({},function(f,m){je(d,m,f)})}function eD(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let M=-1;for(;;){let L=["count="+f];M==-1?0<f?(M=C[0].g,L.push("ofs="+M)):M=0:L.push("ofs="+M);let Oe=!0;for(let It=0;It<f;It++){let Ae=C[It].g,Nt=C[It].map;if(Ae-=M,0>Ae)M=Math.max(0,C[It].g-100),Oe=!1;else try{aF(Nt,L,"req"+Ae+"_")}catch{m&&m(Nt)}}if(Oe){m=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function tD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Q||tt(),J||(Q(),J=!0),we.add(d,u),u.v=0}}function Gm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xc(g(u.Fa,u),iD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,nD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),bd(this),nD(this))};function Wm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function nD(u){u.g=new wi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Lr(u.qa);je(d,"RID","rpc"),je(d,"SID",u.K),je(d,"AID",u.T),je(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(d,"TO",u.ja),je(d,"TYPE","xmlhttp"),zc(u,d),u.m&&u.o&&zm(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Ed(Lr(d)),f.m=null,f.P=!0,RT(f,u)}n.Za=function(){this.C!=null&&(this.C=null,bd(this),Gm(this),Bt(19))};function Dd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function rD(u,d){var f=null;if(u.g==d){Dd(u),Wm(u),u.g=null;var m=2}else if($m(u.h,d))f=d.D,OT(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;m=pd(),jt(m,new DT(m,f)),Td(u)}else tD(u);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&dF(u,d)||m==2&&Gm(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:Ao(u,5);break;case 4:Ao(u,10);break;case 3:Ao(u,6);break;default:Ao(u,2)}}}function iD(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Ao(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let C=!m;m=new So(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vd(m,"https"),Ed(m),C?iF(m.toString(),f):oF(m.toString(),f)}else Bt(2);u.G=0,u.l&&u.l.sa(d),oD(u),JT(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function oD(u){if(u.G=0,u.ka=[],u.l){let d=FT(u.h);(d.length!=0||u.i.length!=0)&&(S(u.ka,d),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function sD(u,d,f){var m=f instanceof So?Lr(f):new So(f);if(m.g!="")d&&(m.g=d+"."+m.g),_d(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var M=new So(null);m&&vd(M,m),d&&(M.g=d),C&&_d(M,C),f&&(M.l=f),m=M}return f=u.D,d=u.ya,f&&d&&je(m,f,d),je(m,"VER",u.la),zc(u,m),m}function aD(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ye(new Bc({eb:f})):new Ye(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cD(){}n=cD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cd(){}Cd.prototype.g=function(u,d){return new cn(u,d)};function cn(u,d){Rt.call(this),this.g=new ZT(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!V(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new zs(this)}I(cn,Rt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){qm(this.g)},cn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=km(u),u=f);d.i.push(new K1(d.Ya++,u)),d.G==3&&Td(d)},cn.prototype.N=function(){this.g.l=null,delete this.j,qm(this.g),delete this.g,cn.aa.N.call(this)};function uD(u){Om.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}I(uD,Om);function lD(){Fm.call(this),this.status=1}I(lD,Fm);function zs(u){this.g=u}I(zs,cD),zs.prototype.ua=function(){jt(this.g,"a")},zs.prototype.ta=function(u){jt(this.g,new uD(u))},zs.prototype.sa=function(u){jt(this.g,new lD)},zs.prototype.ra=function(){jt(this.g,"b")},Cd.prototype.createWebChannel=Cd.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,MI=ci.createWebChannelTransport=function(){return new Cd},NI=ci.getStatEventTarget=function(){return pd()},RI=ci.Event=Do,fg=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gd.NO_ERROR=0,gd.TIMEOUT=8,gd.HTTP_ERROR=6,Ll=ci.ErrorCode=gd,CT.COMPLETE="complete",AI=ci.EventType=CT,wT.EventType=Pc,Pc.OPEN="a",Pc.CLOSE="b",Pc.ERROR="c",Pc.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,ic=ci.WebChannel=wT,x8=ci.FetchXmlHttpFactory=Bc,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,SI=ci.XhrIo=Ye}).apply(typeof hg<"u"?hg:typeof self<"u"?self:typeof window<"u"?window:{});var wk="@firebase/firestore",Ik="4.8.0";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var Tc="11.10.0";var Ns=new br("@firebase/firestore");function oc(){return Ns.logLevel}function z(n,...e){if(Ns.logLevel<=Te.DEBUG){let t=e.map(_b);Ns.debug(`Firestore (${Tc}): ${n}`,...t)}}function li(n,...e){if(Ns.logLevel<=Te.ERROR){let t=e.map(_b);Ns.error(`Firestore (${Tc}): ${n}`,...t)}}function mo(n,...e){if(Ns.logLevel<=Te.WARN){let t=e.map(_b);Ns.warn(`Firestore (${Tc}): ${n}`,...t)}}function _b(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,px(n,r,t)}function px(n,e,t){let r=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw li(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||px(e,i,r)}function ce(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends Ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ar=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Eg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},LI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VI=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ar,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ar)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Eg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Et(e)}},jI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},BI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},UI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function O8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function gx(){return new TextEncoder}var Hl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=O8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ve(n,e){return n<e?-1:n>e?1:0}function $I(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ve(r,i);{let o=gx(),s=F8(o.encode(bk(n,t)),o.encode(bk(e,t)));return s!==0?s:ve(r,i)}}t+=r>65535?2:1}return ve(n.length,e.length)}function bk(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function F8(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ve(n[t],e[t]);return ve(n.length,e.length)}function hc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tk="__name__",Ig=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ve(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):$I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},ze=class n extends Ig{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},L8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vn=class n extends Ig{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return L8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tk}static keyField(){return new n([Tk])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(ze.fromString(e))}static fromName(e){return new n(ze.fromString(e).popFirst(5))}static empty(){return new n(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ze(e.slice()))}};function mx(n,e,t){if(!t)throw new H(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V8(n,e,t,r){if(e===!0&&r===!0)throw new H(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dk(n){if(!ee.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ck(n){if(ee.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te(12329,{type:typeof n})}function Rr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Xg(n);throw new H(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ht(n,e){let t={typeString:n};return e&&(t.value=e),t}function nd(n,e){if(!yx(n))throw new H(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(k.INVALID_ARGUMENT,t);return!0}var Sk=-62135596800,Ak=1e6,ft=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ak);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sk)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ak}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Sk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:ht("string",ft._jsonSchemaVersion),seconds:ht("number"),nanoseconds:ht("number")};var de=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ft(0,0))}static max(){return new n(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zl=-1,HI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};HI.UNKNOWN_ID=-1;function j8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new Ms(i,ee.empty(),e)}function B8(n){return new Ms(n.readTime,n.key,zl)}var Ms=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(de.min(),ee.empty(),zl)}static max(){return new n(de.max(),ee.empty(),zl)}};function U8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}var $8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Dc(n){return _(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==$8)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function H8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cc(n){return n.name==="IndexedDbTransactionError"}var Eb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),wb=-1;function em(n){return n==null}function ql(n){return n===0&&1/n==-1/0}function z8(n){return typeof n=="number"&&Number.isInteger(n)&&!ql(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var vx="";function q8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rk(e)),e=G8(n.get(t),e);return Rk(e)}function G8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case vx:t+="";break;default:t+=o}}return t}function Rk(n){return n+vx+""}var W8="remoteDocuments",_x="owner";var Ex="mutationQueues";var wx="mutations";var Ix="documentMutations",K8="remoteDocumentsV14";var bx="remoteDocumentGlobal";var Tx="targets";var Dx="targetDocuments";var Cx="targetGlobal",Sx="collectionParents";var Ax="clientMetadata";var Rx="bundles";var Nx="namedQueries";var Q8="indexConfiguration";var Y8="indexState";var Z8="indexEntries";var Mx="documentOverlays";var J8="globals";var X8=[Ex,wx,Ix,W8,Tx,_x,Cx,Dx,Ax,bx,Sx,Rx,Nx],zde=[...X8,Mx],eG=[Ex,wx,Ix,K8,Tx,_x,Cx,Dx,Ax,bx,Sx,Rx,Nx,Mx],tG=eG,nG=[...tG,Q8,Y8,Z8];var qde=[...nG,J8];function Nk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Px(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var et=class n{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}},uc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}};Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wt=class n{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bg(this.data.getIterator())}getIteratorFrom(e){return new bg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},bg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Sr=class n{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new n([])}unionWith(e){let t=new wt(vn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Tg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Vt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Vt.EMPTY_BYTE_STRING=new Vt("");var rG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=rG.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hi(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}var kx="server_timestamp",xx="__type__",Ox="__previous_value__",Fx="__local_write_time__";function Ib(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xx])===null||t===void 0?void 0:t.stringValue)===kx}function tm(n){let e=n.mapValue.fields[Ox];return Ib(e)?tm(e):e}function Gl(n){let e=di(n.mapValue.fields[Fx].timestampValue);return new ft(e.seconds,e.nanos)}var qI=class{constructor(e,t,r,i,o,s,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},Dg="(default)",Cg=class n{constructor(e,t){this.projectId=e,this.database=t||Dg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bb="__type__",Lx="__max__",pg={mapValue:{fields:{__type__:{stringValue:Lx}}}},Tb="__vector__",fc="value";function yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ib(n)?4:jx(n)?9007199254740991:Vx(n)?10:11:te(28295,{value:n})}function kr(n,e){if(n===e)return!0;let t=yo(n);if(t!==yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gl(n).isEqual(Gl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=di(i.timestampValue),a=di(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return hi(i.bytesValue).isEqual(hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?ql(s)===ql(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return hc(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Nk(s)!==Nk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!kr(s[c],a[c])))return!1;return!0}(n,e);default:return te(52216,{left:n})}}function Wl(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function pc(n,e){if(n===e)return 0;let t=yo(n),r=yo(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),c=He(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Mk(n.timestampValue,e.timestampValue);case 4:return Mk(Gl(n),Gl(e));case 5:return $I(n.stringValue,e.stringValue);case 6:return function(o,s){let a=hi(o),c=hi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ve(a[l],c[l]);if(h!==0)return h}return ve(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ve(He(o.latitude),He(s.latitude));return a!==0?a:ve(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Pk(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[fc])===null||a===void 0?void 0:a.arrayValue,I=(c=g[fc])===null||c===void 0?void 0:c.arrayValue,R=ve(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:Pk(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===pg.mapValue&&s===pg.mapValue)return 0;if(o===pg.mapValue)return 1;if(s===pg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=$I(c[p],h[p]);if(g!==0)return g;let y=pc(a[c[p]],l[h[p]]);if(y!==0)return y}return ve(c.length,h.length)}(n.mapValue,e.mapValue);default:throw te(23264,{le:t})}}function Mk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);let t=di(n),r=di(e),i=ve(t.seconds,r.seconds);return i!==0?i:ve(t.nanos,r.nanos)}function Pk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=pc(t[i],r[i]);if(o)return o}return ve(t.length,r.length)}function gc(n){return GI(n)}function GI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=di(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=GI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${GI(t.fields[s])}`;return i+"}"}(n.mapValue):te(61005,{value:n})}function yg(n){switch(yo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=tm(n);return e?16+yg(e):16;case 5:return 2*n.stringValue.length;case 6:return hi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yg(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Vs(r.fields,(o,s)=>{i+=o.length+yg(s)}),i}(n.mapValue);default:throw te(13486,{value:n})}}function kk(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WI(n){return!!n&&"integerValue"in n}function Db(n){return!!n&&"arrayValue"in n}function xk(n){return!!n&&"nullValue"in n}function Ok(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vg(n){return!!n&&"mapValue"in n}function Vx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bb])===null||t===void 0?void 0:t.stringValue)===Tb}function jl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Vs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}var Wde={mapValue:{fields:{[bb]:{stringValue:Tb},[fc]:{arrayValue:{}}}}};var rr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=vn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=jl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(jl(this.value))}};function Bx(n){let e=[];return Vs(n.fields,(t,r)=>{let i=new vn([t]);if(vg(r)){let o=Bx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Sr(e)}var ir=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,de.min(),de.min(),de.min(),rr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,de.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,de.min(),de.min(),rr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,de.min(),de.min(),rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mc=class{constructor(e,t){this.position=e,this.inclusive=t}};function Fk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=pc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}var yc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Sg=class{},dt=class n extends Sg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new QI(e,t,r):t==="array-contains"?new JI(e,r):t==="in"?new XI(e,r):t==="not-in"?new e0(e,r):t==="array-contains-any"?new t0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YI(e,r):new ZI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pc(t,this.value)):t!==null&&yo(this.value)===yo(t)&&this.matchesComparison(pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class n extends Sg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Ux(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Ux(n){return n.op==="and"}function $x(n){return oG(n)&&Ux(n)}function oG(n){for(let e of n.filters)if(e instanceof or)return!1;return!0}function KI(n){if(n instanceof dt)return n.field.canonicalString()+n.op.toString()+gc(n.value);if($x(n))return n.filters.map(e=>KI(e)).join(",");{let e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function Hx(n,e){return n instanceof dt?function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(n,e):n instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Hx(s,i.filters[a]),!0):!1}(n,e):void te(19439)}function zx(n){return n instanceof dt?function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`}(n):n instanceof or?function(t){return t.op.toString()+" {"+t.getFilters().map(zx).join(" ,")+"}"}(n):"Filter"}var QI=class extends dt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},YI=class extends dt{constructor(e,t){super(e,"in",t),this.keys=qx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ZI=class extends dt{constructor(e,t){super(e,"not-in",t),this.keys=qx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var JI=class extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Db(t)&&Wl(t.arrayValue,this.value)}},XI=class extends dt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Wl(this.value.arrayValue,t)}},e0=class extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wl(this.value.arrayValue,t)}},t0=class extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Db(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wl(this.value.arrayValue,r))}};var n0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Vk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new n0(n,e,t,r,i,o,s)}function Cb(n){let e=ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gc(r)).join(",")),e.Pe=t}return e.Pe}function Sb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lk(n.startAt,e.startAt)&&Lk(n.endAt,e.endAt)}function r0(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ps=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function sG(n,e,t,r,i,o,s,a){return new Ps(n,e,t,r,i,o,s,a)}function Ab(n){return new Ps(n)}function jk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gx(n){return n.collectionGroup!==null}function Bl(n){let e=ce(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wt(vn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new yc(o,r))}),t.has(vn.keyField().canonicalString())||e.Te.push(new yc(vn.keyField(),r))}return e.Te}function Mr(n){let e=ce(n);return e.Ie||(e.Ie=aG(e,Bl(n))),e.Ie}function aG(n,e){if(n.limitType==="F")return Vk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new yc(i.field,o)});let t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return Vk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function i0(n,e){let t=n.filters.concat([e]);return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function o0(n,e,t){return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return Sb(Mr(n),Mr(e))&&n.limitType===e.limitType}function Wx(n){return`${Cb(Mr(n))}|lt:${n.limitType}`}function sc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zx(i)).join(", ")}]`),em(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gc(i)).join(",")),`Target(${r})`}(Mr(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Bl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Fk(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Bl(r),i)||r.endAt&&!function(s,a,c){let l=Fk(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Bl(r),i))}(n,e)}function cG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kx(n){return(e,t)=>{let r=!1;for(let i of Bl(n)){let o=uG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uG(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?pc(c,l):te(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:n.dir})}}var fi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Px(this.inner)}size(){return this.innerSize}};var lG=new et(ee.comparator);function pi(){return lG}var Qx=new et(ee.comparator);function Vl(...n){let e=Qx;for(let t of n)e=e.insert(t.key,t);return e}function Yx(n){let e=Qx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ds(){return Ul()}function Zx(){return Ul()}function Ul(){return new fi(n=>n.toString(),(n,e)=>n.isEqual(e))}var dG=new et(ee.comparator),hG=new wt(ee.comparator);function De(...n){let e=hG;for(let t of n)e=e.add(t);return e}var fG=new wt(ve);function pG(){return fG}function Rb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ql(e)?"-0":e}}function Jx(n){return{integerValue:""+n}}function gG(n,e){return z8(e)?Jx(e):Rb(n,e)}var vc=class{constructor(){this._=void 0}};function mG(n,e,t){return n instanceof _c?function(i,o){let s={fields:{[xx]:{stringValue:kx},[Fx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ib(o)&&(o=tm(o)),o&&(s.fields[Ox]=o),{mapValue:s}}(t,e):n instanceof ks?eO(n,e):n instanceof xs?tO(n,e):function(i,o){let s=Xx(i,o),a=Bk(s)+Bk(i.Ee);return WI(s)&&WI(i.Ee)?Jx(a):Rb(i.serializer,a)}(n,e)}function yG(n,e,t){return n instanceof ks?eO(n,e):n instanceof xs?tO(n,e):t}function Xx(n,e){return n instanceof Ec?function(r){return WI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var _c=class extends vc{},ks=class extends vc{constructor(e){super(),this.elements=e}};function eO(n,e){let t=nO(e);for(let r of n.elements)t.some(i=>kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var xs=class extends vc{constructor(e){super(),this.elements=e}};function tO(n,e){let t=nO(e);for(let r of n.elements)t=t.filter(i=>!kr(i,r));return{arrayValue:{values:t}}}var Ec=class extends vc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Bk(n){return He(n.integerValue||n.doubleValue)}function nO(n){return Db(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ks&&i instanceof ks||r instanceof xs&&i instanceof xs?hc(r.elements,i.elements,kr):r instanceof Ec&&i instanceof Ec?kr(r.Ee,i.Ee):r instanceof _c&&i instanceof _c}(n.transform,e.transform)}var s0=class{constructor(e,t){this.version=e,this.transformResults=t}},ui=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _g(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wc=class{};function rO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kl(n.key,ui.none()):new Os(n.key,n.data,ui.none());{let t=n.data,r=rr.empty(),i=new wt(vn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gi(n.key,r,new Sr(i.toArray()),ui.none())}}function _G(n,e,t){n instanceof Os?function(i,o,s){let a=i.value.clone(),c=$k(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gi?function(i,o,s){if(!_g(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$k(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iO(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function $l(n,e,t,r){return n instanceof Os?function(o,s,a,c){if(!_g(o.precondition,s))return a;let l=o.value.clone(),h=Hk(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof gi?function(o,s,a,c){if(!_g(o.precondition,s))return a;let l=Hk(o.fieldTransforms,c,s),h=s.data;return h.setAll(iO(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _g(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function EG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Xx(r.transform,i||null);o!=null&&(t===null&&(t=rr.empty()),t.set(r.field,o))}return t||null}function Uk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hc(r,i,(o,s)=>vG(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Os=class extends wc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gi=class extends wc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $k(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,yG(s,a,t[i]))}return r}function Hk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,mG(o,s,e))}return r}var Kl=class extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},a0=class extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var c0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&_G(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$l(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$l(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Zx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=rO(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(t,r)=>Uk(t,r))&&hc(this.baseMutations,e.baseMutations,(t,r)=>Uk(t,r))}},u0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return dG}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var l0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var d0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ut,Se;function wG(n){switch(n){case k.OK:return te(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return te(15467,{code:n})}}function oO(n){if(n===void 0)return li("GRPC error has no .code"),k.UNKNOWN;switch(n){case ut.OK:return k.OK;case ut.CANCELLED:return k.CANCELLED;case ut.UNKNOWN:return k.UNKNOWN;case ut.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case ut.INTERNAL:return k.INTERNAL;case ut.UNAVAILABLE:return k.UNAVAILABLE;case ut.UNAUTHENTICATED:return k.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case ut.NOT_FOUND:return k.NOT_FOUND;case ut.ALREADY_EXISTS:return k.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return k.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case ut.ABORTED:return k.ABORTED;case ut.OUT_OF_RANGE:return k.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return k.UNIMPLEMENTED;case ut.DATA_LOSS:return k.DATA_LOSS;default:return te(39323,{code:n})}}(Se=ut||(ut={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";var zk=null;var IG=new ai([4294967295,4294967295],0);function qk(n){let e=gx().encode(n),t=new CI;return t.update(e),new Uint8Array(t.digest())}function Gk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,o],0)]}var h0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cs(`Invalid padding: ${t}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ai.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(IG)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=qk(e),[r,i]=Gk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=qk(e),[r,i]=Gk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ag=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(de.min(),i,new et(ve),pi(),De())}},Ql=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,De(),De(),De())}};var lc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Rg=class{constructor(e,t){this.targetId=e,this.De=t}},Ng=class{constructor(e,t,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mg=class{constructor(){this.ve=0,this.Ce=Wk(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),r=De();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:o})}}),new Ql(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Wk()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},f0=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=pi(),this.je=gg(),this.Je=gg(),this.He=new et(ve)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(r0(o))if(r===0){let s=new ee(o.path);this.Xe(t,s,ir.newNoDocument(s,de.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}zk?.ct(function(h,p,g,y,I){var R,S,P,V,q,G;let Fe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},he=p.unchangedNames;return he&&(Fe.bloomFilter={applied:I===0,hashCount:(R=he?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(V=(P=(S=he?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&V!==void 0?V:0,padding:(G=(q=he?.bits)===null||q===void 0?void 0:q.padding)!==null&&G!==void 0?G:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),Fe}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=hi(r).toUint8Array()}catch(c){if(c instanceof Tg)return mo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new h0(s,i,o)}catch(c){return mo(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&r0(a.target)){let c=new ee(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ir.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=De();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Ag(e,t,this.He,this.ze,r);return this.ze=pi(),this.je=gg(),this.Je=gg(),this.He=new et(ve),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Mg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wt(ve),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wt(ve),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function gg(){return new et(ee.comparator)}function Wk(){return new et(ee.comparator)}var bG={asc:"ASCENDING",desc:"DESCENDING"},TG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DG={and:"AND",or:"OR"},p0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function g0(n,e){return n.useProto3Json||em(e)?e:{value:e}}function Pg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CG(n,e){return Pg(n,e.toTimestamp())}function Pr(n){return Pe(!!n,49232),de.fromTimestamp(function(t){let r=di(t);return new ft(r.seconds,r.nanos)}(n))}function Nb(n,e){return m0(n,e).canonicalString()}function m0(n,e){let t=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aO(n){let e=ze.fromString(n);return Pe(hO(e),10190,{key:e.toString()}),e}function y0(n,e){return Nb(n.databaseId,e.path)}function PI(n,e){let t=aO(e);if(t.get(1)!==n.databaseId.projectId)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(uO(t))}function cO(n,e){return Nb(n.databaseId,e)}function SG(n){let e=aO(n);return e.length===4?ze.emptyPath():uO(e)}function v0(n){return new ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uO(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Kk(n,e,t){return{name:y0(n,e),fields:t.value.mapValue.fields}}function AG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Pe(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?k.UNKNOWN:oO(l.code);return new H(h,l.message||"")}(s);t=new Ng(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=PI(n,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):de.min(),a=new rr({mapValue:{fields:r.document.fields}}),c=ir.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new lc(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=PI(n,r.document),o=r.readTime?Pr(r.readTime):de.min(),s=ir.newNoDocument(i,o),a=r.removedTargetIds||[];t=new lc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=PI(n,r.document),o=r.removedTargetIds||[];t=new lc([],o,i,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new d0(i,o),a=r.targetId;t=new Rg(a,s)}}return t}function RG(n,e){let t;if(e instanceof Os)t={update:Kk(n,e.key,e.value)};else if(e instanceof Kl)t={delete:y0(n,e.key)};else if(e instanceof gi)t={update:Kk(n,e.key,e.data),updateMask:VG(e.fieldMask)};else{if(!(e instanceof a0))return te(16599,{Rt:e.type});t={verify:y0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof _c)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ks)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ec)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw te(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te(27497)}(n,e.precondition)),t}function NG(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Pr(i.updateTime):Pr(o);return s.isEqual(de.min())&&(s=Pr(o)),new s0(s,i.transformResults||[])}(t,e))):[]}function MG(n,e){return{documents:[cO(n,e.path)]}}function PG(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cO(n,i);let o=function(l){if(l.length!==0)return dO(or.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ac(g.field),direction:OG(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=g0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function kG(n){let e=SG(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=lO(p);return g instanceof or&&$x(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(I){return new yc(cc(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,em(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new mc(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new mc(y,g)}(t.endAt)),sG(e,i,s,o,a,"F",c,l)}function xG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cc(t.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cc(t.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=cc(t.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=cc(t.unaryFilter.field);return dt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(n):n.fieldFilter!==void 0?function(t){return dt.create(cc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return or.create(t.compositeFilter.filters.map(r=>lO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(t.compositeFilter.op))}(n):te(30097,{filter:n})}function OG(n){return bG[n]}function FG(n){return TG[n]}function LG(n){return DG[n]}function ac(n){return{fieldPath:n.canonicalString()}}function cc(n){return vn.fromServerFormat(n.fieldPath)}function dO(n){return n instanceof dt?function(t){if(t.op==="=="){if(Ok(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NAN"}};if(xk(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ok(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NAN"}};if(xk(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ac(t.field),op:FG(t.op),value:t.value}}}(n):n instanceof or?function(t){let r=t.getFilters().map(i=>dO(i));return r.length===1?r[0]:{compositeFilter:{op:LG(t.op),filters:r}}}(n):te(54877,{filter:n})}function VG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Yl=class n{constructor(e,t,r,i,o=de.min(),s=de.min(),a=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _0=class{constructor(e){this.gt=e}};function jG(n){let e=kG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?o0(e,e.limit,"L"):e}var kg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),ql(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=di(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(hi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?jx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Vx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):te(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=fc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(He(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ee.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};kg.Ut=new kg;var E0=class{constructor(){this.Dn=new w0}addToCollectionParentIndex(e,t){return this.Dn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Ms.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},w0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(ze.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(ze.comparator)).toArray()}};var Kde=new Uint8Array(0);var Qk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fO=41943040,Pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(fO,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var Zl=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Yk="LruGarbageCollector",BG=1048576;function Zk([n,e],[t,r]){let i=ve(n,t);return i===0?ve(e,r):i}var I0=class{constructor(e){this.Tr=e,this.buffer=new wt(Zk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Zk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},b0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){z(Yk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cc(t)?z(Yk,"Ignoring IndexedDB error during garbage collection: ",t):yield Dc(t)}yield this.Rr(3e5)}))}},T0=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Eb.ue);let r=new I0(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Qk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),oc()<=Te.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function UG(n,e){return new T0(n,e)}var D0=class{constructor(){this.changes=new fi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var C0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var S0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$l(r.mutation,i,Sr.empty(),ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,t,r=De()){let i=Ds();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Vl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ds();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,De()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=pi(),s=Ul(),a=function(){return Ul()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof gi)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),$l(h.mutation,l,h.mutation.getFieldMask(),ft.now())):s.set(l.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new C0(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ul(),i=new et((s,a)=>s-a),o=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Sr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||De()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Zx();h.forEach(g=>{if(!o.has(g)){let y=rO(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(Ds()),a=zl,c=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,De())).next(h=>({batchId:a,changes:Yx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=Vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Vl();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,c=>{let l=function(p,g){return new Ps(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ir.newInvalidDocument(h)))});let a=Vl();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&$l(h.mutation,l,Sr.empty(),ft.now()),rm(t,l)&&(a=a.insert(c,l))}),a})}};var A0=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return O.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:jG(i.bundledQuery),readTime:Pr(i.readTime)}}(t)),O.resolve()}};var R0=class{constructor(){this.overlays=new et(ee.comparator),this.kr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ds();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Ds(),o=t.length+1,s=new ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new et((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ds(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ds(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new l0(t,r));let o=this.kr.get(t);o===void 0&&(o=De(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var N0=class{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Jl=class{constructor(){this.qr=new wt(lt.Qr),this.$r=new wt(lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new lt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new lt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ee(new ze([])),r=new lt(t,e),i=new lt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ee(new ze([])),r=new lt(t,e),i=new lt(t,e+1),o=De();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new lt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},lt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ee.comparator(e.key,t.key)||ve(e.Hr,t.Hr)}static Ur(e,t){return ve(e.Hr,t.Hr)||ee.comparator(e.key,t.key)}};var M0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wt(lt.Qr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new c0(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new lt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?wb:this.er-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new lt(t,0),i=new lt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ve);return t.forEach(i=>{let o=new lt(i,0),s=new lt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new lt(new ee(o),0),a=new wt(ve);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),O.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(t.mutations,i=>{let o=new lt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new lt(t,0),i=this.Yr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var P0=class{constructor(e){this.ni=e,this.docs=function(){return new et(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=pi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ir.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=pi(),s=t.path,a=new ee(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||U8(B8(h),r)<=0||(i.has(h.key)||rm(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){te(9500)}ri(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k0(this)}getSize(e){return O.resolve(this.size)}},k0=class extends D0{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var x0=class{constructor(e){this.persistence=e,this.ii=new fi(t=>Cb(t),Sb),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.si=0,this.oi=new Jl,this.targetCount=0,this._i=Zl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),O.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Zl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.hr(t),O.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.oi.containsKey(t))}};var xg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Eb(0),this.ci=!1,this.ci=!0,this.li=new N0,this.referenceDelegate=e(this),this.hi=new x0(this),this.indexManager=new E0,this.remoteDocumentCache=function(i){return new P0(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new _0(t),this.Ti=new A0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new M0(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new O0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},O0=class extends zI{constructor(e){super(),this.currentSequenceNumber=e}},F0=class n{constructor(e){this.persistence=e,this.Ai=new Jl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{let i=ee.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,de.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return O.or([()=>O.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Og=class n{constructor(e,t){this.persistence=e,this.gi=new fi(r=>q8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=UG(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return O.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,de.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yg(e.data.value)),t}Sr(e,t,r){return O.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var L0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=De(),i=De();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var V0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var j0=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return VM()?8:H8(_t())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new V0;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(oc()<=Te.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(oc()<=Te.DEBUG&&z("QueryEngine","Query:",sc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(oc()<=Te.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):O.resolve())}ps(e,t){if(jk(t))return O.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=o0(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=De(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,o0(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return jk(t)||i.isEqual(de.min())?O.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?O.resolve(null):(oc()<=Te.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sc(t)),this.vs(e,s,t,j8(i,zl)).next(a=>a))})}bs(e,t){let r=new wt(Kx(e));return t.forEach((i,o)=>{rm(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return oc()<=Te.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",sc(t)),this.gs.getDocumentsMatchingQuery(e,t,Ms.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Mb="LocalStore",$G=3e8,B0=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new et(ve),this.Ms=new fi(o=>Cb(o),Sb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function HG(n,e,t,r){return new B0(n,e,t,r)}function pO(n,e){return _(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=De();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function zG(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=O.resolve();return g.forEach(I=>{y=y.next(()=>h.getEntry(c,I)).next(R=>{let S=l.docVersions.get(I);Pe(S!==null,48541),R.version.compareTo(S)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=De();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gO(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function qG(n,e){let t=ce(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Vt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=$G?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let c=pi(),l=De();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(GG(o,s,e.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(de.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function GG(n,e,t){let r=De(),i=De();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=pi();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(de.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):z(Mb,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function WG(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KG(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Yl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function U0(n,e,t){return _(this,null,function*(){let r=ce(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Cc(s))throw s;z(Mb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Jk(n,e,t){let r=ce(n),i=de.min(),o=De();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=ce(c),g=p.Ms.get(h);return g!==void 0?O.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,Mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:de.min(),t?o:De())).next(a=>(QG(r,cG(e),a),{documents:a,qs:o})))}function QG(n,e,t){let r=n.xs.get(e)||de.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Fg=class{constructor(){this.activeTargetIds=pG()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $0=class{constructor(){this.Fo=new Fg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var H0=class{xo(e){}shutdown(){}};var Xk="ConnectivityMonitor",Lg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){z(Xk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){z(Xk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mg=null;function z0(){return mg===null?mg=function(){return 268435456+Math.round(2147483648*Math.random())}():mg++,"0x"+mg.toString(16)}var kI="RestConnection",YG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},q0=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Dg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=z0(),a=this.Go(e,t.toUriEncodedString());z(kI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),h=eo(l);return this.jo(e,a,c,r,h).then(p=>(z(kI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw mo(kI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=YG[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var G0=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Lt="WebChannelConnection",W0=class extends q0{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=z0();return new Promise((a,c)=>{let l=new SI;l.setWithCredentials(!0),l.listenOnce(AI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ll.NO_ERROR:let p=l.getResponseJson();z(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ll.TIMEOUT:z(Lt,`RPC '${e}' ${s} timed out`),c(new H(k.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:let g=l.getStatus();if(z(Lt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let R=function(P){let V=P.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(V)>=0?V:k.UNKNOWN}(I.status);c(new H(R,I.message))}else c(new H(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new H(k.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{z(Lt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);z(Lt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=z0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=MI(),a=NI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");z(Lt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let g=!1,y=!1,I=new G0({Ho:S=>{y?z(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(z(Lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),z(Lt,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Yo:()=>p.close()}),R=(S,P,V)=>{S.listen(P,q=>{try{V(q)}catch(G){setTimeout(()=>{throw G},0)}})};return R(p,ic.EventType.OPEN,()=>{y||(z(Lt,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),R(p,ic.EventType.CLOSE,()=>{y||(y=!0,z(Lt,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),R(p,ic.EventType.ERROR,S=>{y||(y=!0,mo(Lt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),I.__(new H(k.UNAVAILABLE,"The operation could not be completed")))}),R(p,ic.EventType.MESSAGE,S=>{var P;if(!y){let V=S.data[0];Pe(!!V,16349);let q=V,G=q?.error||((P=q[0])===null||P===void 0?void 0:P.error);if(G){z(Lt,`RPC '${e}' stream ${i} received error:`,G);let Fe=G.status,he=function(E){let T=ut[E];if(T!==void 0)return oO(T)}(Fe),b=G.message;he===void 0&&(he=k.INTERNAL,b="Unknown error status: "+Fe+" with message "+G.message),y=!0,I.__(new H(he,b)),p.close()}else z(Lt,`RPC '${e}' stream ${i} received:`,V),I.a_(V)}}),R(a,RI.STAT_EVENT,S=>{S.stat===fg.PROXY?z(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===fg.NOPROXY&&z(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function xI(){return typeof document<"u"?document:null}function im(n){return new p0(n,!0)}var Vg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ex="PersistentStream",jg=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Vg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return z(ex,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(z(ex,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},K0=class extends jg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=AG(this.serializer,e),r=function(o){if(!("targetChange"in o))return de.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?de.min():s.readTime?Pr(s.readTime):de.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=v0(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=r0(c)?{documents:MG(o,c)}:{query:PG(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sO(o,s.resumeToken);let l=g0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(de.min())>0){a.readTime=Pg(o,s.snapshotVersion.toTimestamp());let l=g0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=xG(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=v0(this.serializer),t.removeTarget=e,this.k_(t)}},Q0=class extends jg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=NG(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=v0(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>RG(this.serializer,r))};this.k_(t)}};var Y0=class{},Z0=class extends Y0{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,m0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(k.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,m0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},J0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(li(t),this._a=!1):z("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Fs="RemoteStore",X0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){js(this)&&(z(Fs,"Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=ce(c);l.Ia.add(4),yield rd(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield om(l)})}(this))}))}),this.Aa=new J0(r,i)}};function om(n){return _(this,null,function*(){if(js(n))for(let e of n.da)yield e(!0)})}function rd(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function mO(n,e){let t=ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ob(t)?xb(t):Sc(t).x_()&&kb(t,e))}function Pb(n,e){let t=ce(n),r=Sc(t);t.Ta.delete(e),r.x_()&&yO(t,e),t.Ta.size===0&&(r.x_()?r.B_():js(t)&&t.Aa.set("Unknown"))}function kb(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sc(n).H_(e)}function yO(n,e){n.Ra.$e(e),Sc(n).Y_(e)}function xb(n){n.Ra=new f0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Sc(n).start(),n.Aa.aa()}function Ob(n){return js(n)&&!Sc(n).M_()&&n.Ta.size>0}function js(n){return ce(n).Ia.size===0}function vO(n){n.Ra=void 0}function ZG(n){return _(this,null,function*(){n.Aa.set("Online")})}function JG(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{kb(n,e)})})}function XG(n,e){return _(this,null,function*(){vO(n),Ob(n)?(n.Aa.la(e),xb(n)):n.Aa.set("Unknown")})}function e6(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof Ng&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){z(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bg(n,r)}else if(e instanceof lc?n.Ra.Ye(e):e instanceof Rg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(de.min()))try{let r=yield gO(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),yO(o,c);let p=new Yl(h.target,c,l,h.sequenceNumber);kb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z(Fs,"Failed to raise snapshot:",r),yield Bg(n,r)}})}function Bg(n,e,t){return _(this,null,function*(){if(!Cc(e))throw e;n.Ia.add(1),yield rd(n),n.Aa.set("Offline"),t||(t=()=>gO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){z(Fs,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield om(n)}))})}function _O(n,e){return e().catch(t=>Bg(n,t,e))}function sm(n){return _(this,null,function*(){let e=ce(n),t=vo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wb;for(;t6(e);)try{let i=yield WG(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,n6(e,i)}catch(i){yield Bg(e,i)}EO(e)&&wO(e)})}function t6(n){return js(n)&&n.Pa.length<10}function n6(n,e){n.Pa.push(e);let t=vo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function EO(n){return js(n)&&!vo(n).M_()&&n.Pa.length>0}function wO(n){vo(n).start()}function r6(n){return _(this,null,function*(){vo(n).na()})}function i6(n){return _(this,null,function*(){let e=vo(n);for(let t of n.Pa)e.X_(t.mutations)})}function o6(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=u0.from(r,e,t);yield _O(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sm(n)})}function s6(n,e){return _(this,null,function*(){e&&vo(n).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return wG(s)&&s!==k.ABORTED}(i.code)){let o=r.Pa.shift();vo(r).N_(),yield _O(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield sm(r)}})}(n,e)),EO(n)&&wO(n)})}function tx(n,e){return _(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),z(Fs,"RemoteStore received new credentials");let r=js(t);t.Ia.add(3),yield rd(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield om(t)})}function a6(n,e){return _(this,null,function*(){let t=ce(n);e?(t.Ia.delete(2),yield om(t)):e||(t.Ia.add(2),yield rd(t),t.Aa.set("Unknown"))})}function Sc(n){return n.Va||(n.Va=function(t,r,i){let o=ce(t);return o.ia(),new K0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:ZG.bind(null,n),e_:JG.bind(null,n),n_:XG.bind(null,n),J_:e6.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),Ob(n)?xb(n):n.Aa.set("Unknown")):(yield n.Va.stop(),vO(n))}))),n.Va}function vo(n){return n.ma||(n.ma=function(t,r,i){let o=ce(t);return o.ia(),new Q0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:r6.bind(null,n),n_:s6.bind(null,n),ea:i6.bind(null,n),ta:o6.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield sm(n)):(yield n.ma.stop(),n.Pa.length>0&&(z(Fs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var eb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fb(n,e){if(li("AsyncQueue",`${e}: ${n}`),Cc(n))return new H(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Ug=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Vl(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $g=class{constructor(){this.fa=new et(ee.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ic=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ug.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var tb=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},nb=class{constructor(){this.queries=nx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ce(t),o=i.queries;i.queries=nx(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new H(k.ABORTED,"Firestore shutting down"))}};function nx(){return new fi(n=>Wx(n),nm)}function IO(n,e){return _(this,null,function*(){let t=ce(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new tb,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Fb(s,`Initialization of query '${sc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Lb(t)})}function bO(n,e){return _(this,null,function*(){let t=ce(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function c6(n,e){let t=ce(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Lb(t)}function u6(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Lb(n){n.Da.forEach(e=>{e.next()})}var rb,rx;(rx=rb||(rb={})).Fa="default",rx.Cache="cache";var Hg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rb.Cache}};var zg=class{constructor(e){this.key=e}},qg=class{constructor(e){this.key=e}},ib=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=Kx(e),this.eu=new Ug(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new $g,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=rm(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?I!==R&&(r.track({type:3,doc:y}),S=!0):this.iu(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Xa(y,c)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,I){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:S})}};return R(y)-R(I)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ic(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $g,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=De(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new qg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new zg(r))}),t}uu(e){this.Ha=e.qs,this.Za=De();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ic.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Vb="SyncEngine",ob=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sb=class{constructor(e){this.key=e,this.lu=!1}},ab=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new fi(a=>Wx(a),nm),this.Tu=new Map,this.Iu=new Set,this.du=new et(ee.comparator),this.Eu=new Map,this.Au=new Jl,this.Ru={},this.Vu=new Map,this.mu=Zl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function l6(n,e,t=!0){return _(this,null,function*(){let r=RO(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield TO(r,e,t,!0),i})}function d6(n,e){return _(this,null,function*(){let t=RO(n);yield TO(t,e,!0,!1)})}function TO(n,e,t,r){return _(this,null,function*(){let i=yield KG(n.localStore,Mr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield h6(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mO(n.remoteStore,i),a})}function h6(n,e,t,r,i){return _(this,null,function*(){n.gu=(p,g,y)=>function(R,S,P,V){return _(this,null,function*(){let q=S.view.nu(P);q.Ds&&(q=yield Jk(R.localStore,S.query,!1).then(({documents:b})=>S.view.nu(b,q)));let G=V&&V.targetChanges.get(S.targetId),Fe=V&&V.targetMismatches.get(S.targetId)!=null,he=S.view.applyChanges(q,R.isPrimaryClient,G,Fe);return ox(R,S.targetId,he._u),he.snapshot})}(n,p,g,y);let o=yield Jk(n.localStore,e,!0),s=new ib(e,o.qs),a=s.nu(o.documents),c=Ql.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);ox(n,t,l._u);let h=new ob(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function f6(n,e,t){return _(this,null,function*(){let r=ce(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!nm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield U0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pb(r.remoteStore,i.targetId),cb(r,i.targetId)}).catch(Dc))):(cb(r,i.targetId),yield U0(r.localStore,i.targetId,!0))})}function p6(n,e){return _(this,null,function*(){let t=ce(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pb(t.remoteStore,r.targetId))})}function g6(n,e,t){return _(this,null,function*(){let r=I6(n);try{let i=yield function(s,a){let c=ce(s),l=ft.now(),h=a.reduce((y,I)=>y.add(I.key),De()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=pi(),R=De();return c.Os.getEntries(y,h).next(S=>{I=S,I.forEach((P,V)=>{V.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(S=>{p=S;let P=[];for(let V of a){let q=EG(V,p.get(V.key).overlayedDocument);q!=null&&P.push(new gi(V.key,q,Bx(q.value.mapValue),ui.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(y,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:Yx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new et(ve)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield id(r,i.changes),yield sm(r.remoteStore)}catch(i){let o=Fb(i,"Failed to persist write");t.reject(o)}})}function DO(n,e){return _(this,null,function*(){let t=ce(n);try{let r=yield qG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Pe(s.lu,14607):i.removedDocuments.size>0&&(Pe(s.lu,42227),s.lu=!1))}),yield id(t,r,e)}catch(r){yield Dc(r)}})}function ix(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ce(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&Lb(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function m6(n,e,t){return _(this,null,function*(){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new et(ee.comparator);s=s.insert(o,ir.newNoDocument(o,de.min()));let a=De().add(o),c=new Ag(de.min(),new Map,new et(ve),s,a);yield DO(r,c),r.du=r.du.remove(o),r.Eu.delete(e),jb(r)}else yield U0(r.localStore,e,!1).then(()=>cb(r,e,t)).catch(Dc)})}function y6(n,e){return _(this,null,function*(){let t=ce(n),r=e.batch.batchId;try{let i=yield zG(t.localStore,e);SO(t,r,null),CO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield id(t,i)}catch(i){yield Dc(i)}})}function v6(n,e,t){return _(this,null,function*(){let r=ce(n);try{let i=yield function(s,a){let c=ce(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Pe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);SO(r,e,t),CO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield id(r,i)}catch(i){yield Dc(i)}})}function CO(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function SO(n,e,t){let r=ce(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function cb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||AO(n,r)})}function AO(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Pb(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),jb(n))}function ox(n,e,t){for(let r of t)r instanceof zg?(n.Au.addReference(r.key,e),_6(n,r)):r instanceof qg?(z(Vb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||AO(n,r.key)):te(19791,{yu:r})}function _6(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(z(Vb,"New document in limbo: "+t),n.Iu.add(r),jb(n))}function jb(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ee(ze.fromString(e)),r=n.mu.next();n.Eu.set(r,new sb(t)),n.du=n.du.insert(t,r),mO(n.remoteStore,new Yl(Mr(Ab(t.path)),r,"TargetPurposeLimboResolution",Eb.ue))}}function id(n,e,t){return _(this,null,function*(){let r=ce(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=L0.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,l){return _(this,null,function*(){let h=ce(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,g=>O.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>O.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Cc(p))throw p;z(Mb,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),I=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,R)}}})}(r.localStore,o))})}function E6(n,e){return _(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){z(Vb,"User change. New user:",e.toKey());let r=yield pO(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new H(k.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield id(t,r.Bs)}})}function w6(n,e){let t=ce(n),r=t.Eu.get(e);if(r&&r.lu)return De().add(r.key);{let i=De(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function RO(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m6.bind(null,e),e.hu.J_=c6.bind(null,e.eventManager),e.hu.pu=u6.bind(null,e.eventManager),e}function I6(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v6.bind(null,e),e}var NO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=im(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return HG(this.persistence,new j0,t.initialUser,this.serializer)}Du(t){return new xg(F0.Vi,this.serializer)}bu(t){return new $0}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),ub=class extends NO{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Pe(this.persistence.referenceDelegate instanceof Og,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new b0(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new xg(r=>Og.Vi(r,t),this.serializer)}};var b6=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ix(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=E6.bind(null,this.syncEngine),yield a6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new nb}()}createDatastore(t){let r=im(t.databaseInfo.databaseId),i=function(s){return new W0(s)}(t.databaseInfo);return function(s,a,c,l){return new Z0(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new X0(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>ix(this.syncEngine,r,0),function(){return Lg.C()?new Lg:new H0}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let g=new ab(o,s,a,c,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=ce(o);z(Fs,"RemoteStore shutting down."),s.Ia.add(5),yield rd(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Gg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _o="FirestoreClient",lb=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Hl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){z(_o,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(z(_o,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Fb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function OI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z(_o,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield pO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{mo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{z("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function sx(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield T6(n);z(_o,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tx(e.remoteStore,i)),n._onlineComponents=e})}function T6(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(_o,"Using user provided OfflineComponentProvider");try{yield OI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),yield OI(n,new NO)}}else z(_o,"Using default OfflineComponentProvider"),yield OI(n,new ub(void 0));return n._offlineComponents})}function MO(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(_o,"Using user provided OnlineComponentProvider"),yield sx(n,n._uninitializedComponentsProvider._online)):(z(_o,"Using default OnlineComponentProvider"),yield sx(n,new b6))),n._onlineComponents})}function D6(n){return MO(n).then(e=>e.syncEngine)}function db(n){return _(this,null,function*(){let e=yield MO(n),t=e.eventManager;return t.onListen=l6.bind(null,e.syncEngine),t.onUnlisten=f6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=p6.bind(null,e.syncEngine),t})}function C6(n,e,t={}){let r=new Ar;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,c,l){let h=new Gg({next:g=>{h.Ou(),s.enqueueAndForget(()=>bO(o,p)),g.fromCache&&c.source==="server"?l.reject(new H(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Hg(a,h,{includeMetadataChanges:!0,ka:!0});return IO(o,p)}(yield db(n),n.asyncQueue,e,t,r)})),r.promise}function PO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ax=new Map;var kO="firestore.googleapis.com",cx=!0,Wg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kO,this.ssl=cx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BG)throw new H(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new BI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ax.get(t);r&&(z("ComponentProvider","Removing Datastore"),ax.delete(t),r.terminate())}(this),Promise.resolve()}};function xO(n,e,t,r={}){var i;n=Rr(n,bc);let o=eo(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Vp(`https://${c}`),jp("Firestore",!0)),s.host!==kO&&s.host!==c&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Ir(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Et.MOCK_USER;else{h=PM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Et(g)}n._authCredentials=new LI(new Eg(h,p))}}var Ls=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},At=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(nd(t,n._jsonSchema))return new n(e,r||null,new ee(ze.fromString(t.referencePath)))}};At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:ht("string",At._jsonSchemaVersion),referencePath:ht("string")};var ho=class n extends Ls{constructor(e,t,r){super(e,t,Ab(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function OO(n,e,...t){if(n=mt(n),mx("collection","path",e),n instanceof bc){let r=ze.fromString(e,...t);return Ck(r),new ho(n,null,r)}{if(!(n instanceof At||n instanceof ho))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return Ck(r),new ho(n.firestore,null,r)}}function Bb(n,e,...t){if(n=mt(n),arguments.length===1&&(e=Hl.newId()),mx("doc","path",e),n instanceof bc){let r=ze.fromString(e,...t);return Dk(r),new At(n,null,new ee(r))}{if(!(n instanceof At||n instanceof ho))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return Dk(r),new At(n.firestore,n instanceof ho?n.converter:null,new ee(r))}}var ux="AsyncQueue",Kg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Vg(this,"async_queue_retry"),this.oc=()=>{let r=xI();r&&z(ux,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=xI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=xI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ar;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Cc(e))throw e;z(ux,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,li("INTERNAL UNHANDLED ERROR: ",lx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=eb.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&te(47125,{hc:lx(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function lx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var mi=class extends bc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Kg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Kg(e),this._firestoreClient=void 0,yield e}})}};function FO(n,e){let t=typeof n=="object"?n:vs(),r=typeof n=="string"?n:e||Dg,i=Xa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=MM("firestore");o&&xO(i,...o)}return i}function Ub(n){if(n._terminated)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||S6(n),n._firestoreClient}function S6(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new qI(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,PO(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lb(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var fo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Vt.fromBase64String(e))}catch(t){throw new H(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fo._jsonSchemaVersion="firestore/bytes/1.0",fo._jsonSchema={type:ht("string",fo._jsonSchemaVersion),bytes:ht("string")};var Xl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Qg=class{constructor(e){this._methodName=e}};var po=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(nd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};po._jsonSchemaVersion="firestore/geoPoint/1.0",po._jsonSchema={type:ht("string",po._jsonSchemaVersion),latitude:ht("number"),longitude:ht("number")};var go=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};go._jsonSchemaVersion="firestore/vectorValue/1.0",go._jsonSchema={type:ht("string",go._jsonSchemaVersion),vectorValues:ht("object")};var A6=/^__.*__$/,hb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Os(e,this.data,t,this.fieldTransforms)}};function LO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:n})}}var fb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Yg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(LO(this.Ec)&&A6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},pb=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||im(e)}Dc(e,t,r,i=!1){return new fb({Ec:e,methodName:t,bc:r,path:vn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $b(n){let e=n._freezeSettings(),t=im(n._databaseId);return new pb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VO(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);UO("Data must be an object, but it was:",s,r);let a=jO(r,s),c,l;if(o.merge)c=new Sr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=N6(e,p,t);if(!s.contains(g))throw new H(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);P6(h,g)||h.push(g)}c=new Sr(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new hb(new rr(a),c,l)}function R6(n,e,t,r=!1){return Hb(t,n.Dc(r?4:3,e))}function Hb(n,e){if(BO(n=mt(n)))return UO("Unsupported field value:",e,n),jO(n,e);if(n instanceof Qg)return function(r,i){if(!LO(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Hb(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ft.fromDate(r);return{timestampValue:Pg(i.serializer,o)}}if(r instanceof ft){let o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pg(i.serializer,o)}}if(r instanceof po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:sO(i.serializer,r._byteString)};if(r instanceof At){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof go)return function(s,a){return{mapValue:{fields:{[bb]:{stringValue:Tb},[fc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Rb(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Xg(r)}`)}(n,e)}function jO(n,e){let t={};return Px(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(n,(r,i)=>{let o=Hb(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function BO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof po||n instanceof fo||n instanceof At||n instanceof Qg||n instanceof go)}function UO(n,e,t){if(!BO(t)||!yx(t)){let r=Xg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function N6(n,e,t){if((e=mt(e))instanceof Xl)return e._internalPath;if(typeof e=="string")return $O(n,e);throw Yg("Field path arguments must be of type string or ",n,!1,void 0,t)}var M6=new RegExp("[~\\*/\\[\\]]");function $O(n,e,t){if(e.search(M6)>=0)throw Yg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xl(...e.split("."))._internalPath}catch{throw Yg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new H(k.INVALID_ARGUMENT,a+n+c)}function P6(n,e){return n.some(t=>t.isEqual(e))}var Zg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gb=class extends Zg{data(){return super.data()}};function zb(n,e){return typeof e=="string"?$O(n,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}function HO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ed=class{},mb=class extends ed{};function zO(n,e,...t){let r=[];e instanceof ed&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof yb).length,a=o.filter(c=>c instanceof Jg).length;if(s>1||s>0&&a>0)throw new H(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Jg=class n extends mb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return GO(e._query,t),new Ls(e.firestore,e.converter,i0(e._query,t))}_parse(e){let t=$b(e.firestore);return function(o,s,a,c,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fx(p,h);let I=[];for(let R of p)I.push(hx(c,o,R));g={arrayValue:{values:I}}}else g=hx(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fx(p,h),g=R6(a,s,p,h==="in"||h==="not-in");return dt.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function qO(n,e,t){let r=e,i=zb("where",n);return Jg._create(i,r,t)}var yb=class n extends ed{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:or.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)GO(s,c),s=i0(s,c)}(e._query,t),new Ls(e.firestore,e.converter,i0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function hx(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new H(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gx(e)&&t.indexOf("/")!==-1)throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ze.fromString(t));if(!ee.isDocumentKey(r))throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kk(n,new ee(r))}if(t instanceof At)return kk(n,t._key);throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xg(t)}.`)}function fx(n,e){if(!Array.isArray(n)||n.length===0)throw new H(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var vb=class{convertValue(e,t="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Vs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[fc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new go(o)}convertGeoPoint(e){return new po(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){let t=di(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ze.fromString(e);Pe(hO(r),9688,{name:e});let i=new Cg(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||li(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function WO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ss=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},As=class n extends Zg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:ht("string",As._jsonSchemaVersion),bundleSource:ht("string","DocumentSnapshot"),bundleName:ht("string"),bundle:ht("string")};var dc=class extends As{data(e={}){return super.data(e)}},Rs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ss(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dc(this._firestore,this._userDataWriter,r.key,r,new Ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:k6(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function k6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:n})}}Rs._jsonSchemaVersion="firestore/querySnapshot/1.0",Rs._jsonSchema={type:ht("string",Rs._jsonSchemaVersion),bundleSource:ht("string","QuerySnapshot"),bundleName:ht("string"),bundle:ht("string")};var td=class extends vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}};function KO(n){n=Rr(n,Ls);let e=Rr(n.firestore,mi),t=Ub(e),r=new td(e);return HO(n._query),C6(t,n._query).then(i=>new Rs(e,r,n,i))}function QO(n,e,t){n=Rr(n,At);let r=Rr(n.firestore,mi),i=WO(n.converter,e,t);return Gb(r,[VO($b(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ui.none())])}function YO(n){return Gb(Rr(n.firestore,mi),[new Kl(n._key,ui.none())])}function ZO(n,e){let t=Rr(n.firestore,mi),r=Bb(n),i=WO(n.converter,e);return Gb(t,[VO($b(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ui.exists(!1))]).then(()=>r)}function qb(n,...e){var t,r,i;n=mt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof At)l=Rr(n.firestore,mi),h=Ab(n._key.path),c={next:p=>{e[s]&&e[s](x6(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Rr(n,Ls);l=Rr(p.firestore,mi),h=p._query;let g=new td(l);c={next:y=>{e[s]&&e[s](new Rs(l,g,p,y))},error:e[s+1],complete:e[s+2]},HO(n._query)}return function(g,y,I,R){let S=new Gg(R),P=new Hg(y,S,I);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return IO(yield db(g),P)})),()=>{S.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return bO(yield db(g),P)}))}}(Ub(l),h,a,c)}function Gb(n,e){return function(r,i){let o=new Ar;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return g6(yield D6(r),i,o)})),o.promise}(Ub(n),e)}function x6(n,e,t){let r=t.docs.get(e._key),i=new td(n);return new As(n,i,e._key,r,new Ss(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Tc=i})(no),er(new Wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new mi(new VI(r.getProvider("auth-internal")),new UI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cg(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xe(wk,Ik,e),Xe(wk,Ik,"esm2017")})();var am=function(){return am=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},am.apply(this,arguments)};var L6={includeMetadataChanges:!1};function Wb(n,e){return e===void 0&&(e=L6),new re(function(t){var r=qb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function JO(n){return Wb(n,{includeMetadataChanges:!0})}function XO(n,e){return e===void 0&&(e={}),JO(n).pipe(X(function(t){return Kb(t,e)}))}function Kb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:am(am({},r),(t={},t[e.idField]=n.id,t))}function e1(n){return Wb(n,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function t1(n,e){return e===void 0&&(e={}),e1(n).pipe(X(function(t){return t.map(function(r){return Kb(r,e)})}))}var Bs=class{constructor(e){return e}},n1="firestore",Qb=class{constructor(){return tc(n1)}};var Yb=new U("angularfire2.firestore-instances");function V6(n,e){let t=Tl(n1,n,e);return t&&new Bs(t)}function j6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bs(r)}}var B6={provide:Qb,deps:[[new Xt,Yb]]},U6={provide:Bs,useFactory:V6,deps:[[new Xt,Yb],ri]};function r1(n,...e){return Xe("angularfire",ro.full,"fst"),dn([U6,B6,{provide:Yb,useFactory:j6(n),multi:!0,deps:[Ce,Je,io,Es,[new Xt,Fl],[new Xt,nc],...e]}])}var i1=it(t1,!0);var o1=it(XO,!0);var s1=it(ZO,!0,2);var od=it(OO,!0,2);var Zb=it(YO,!0,2);var Us=it(Bb,!0,2);var Jb=it(KO,!0);var a1=it(FO,!0);var Xb=it(zO,!0,2);var sd=it(QO,!0,2);var cm=it(qO,!0,2);var xr=class n{firestore=N(Bs);auth=N(nr);user$=pk(this.auth);mapToBook(e,t){return{id:t??e.id,title:e.title??"",author:e.author??"",genre:e.genre??""}}getAllBooks(){let e=od(this.firestore,"books");return i1(e,{idField:"id"}).pipe(X(t=>t.map(r=>this.mapToBook(r))),Zt(t=>(console.error("Error fetching books:",t),Z([]))))}searchBooks(e){return this.getAllBooks().pipe(X(t=>t.filter(r=>r.title.toLowerCase().includes(e.toLowerCase())||r.author.toLowerCase().includes(e.toLowerCase()))))}getBooksByGenre(e){return this.getAllBooks().pipe(X(t=>t.filter(r=>r.genre===e)))}getBookById(e){let t=Us(this.firestore,`books/${e}`);return o1(t,{idField:"id"}).pipe(X(r=>r?this.mapToBook(r):void 0))}getFavoriteBooks(){return this.user$.pipe(rt(e=>{if(!e)return Z([]);let t=od(this.firestore,"userBookStatus"),r=Xb(t,cm("userId","==",e.uid));return ke(Jb(r)).pipe(rt(i=>{let o=i.docs.map(s=>F({id:s.id},s.data()));return o.length===0?Z([]):this.getAllBooks().pipe(X(s=>s.filter(a=>o.some(c=>c.bookId===a.id)).map(a=>oe(F({},a),{status:o.find(c=>c.bookId===a.id)?.status,rating:o.find(c=>c.bookId===a.id)?.rating}))))}),Zt(i=>(console.error("Error fetching favorite books:",i),Z([]))))}))}updateBookStatus(e,t){return _(this,null,function*(){let r=yield aa(this.user$);if(!r)return;let i=Us(this.firestore,"userBookStatus",`${r.uid}_${e}`);yield sd(i,{bookId:e,userId:r.uid,status:t},{merge:!0})})}updateBookRating(e,t){return _(this,null,function*(){let r=yield aa(this.user$);if(!r)return;let i=Us(this.firestore,"userBookStatus",`${r.uid}_${e}`);yield sd(i,{bookId:e,userId:r.uid,rating:t},{merge:!0})})}addBook(e){let t=od(this.firestore,"books");return ke(s1(t,e)).pipe(X(r=>r.id),Zt(r=>{throw console.error("Error adding book:",r),r}))}addToFavorites(e,t){let r=Us(this.firestore,`favorites/${e.id}`);return sd(r,oe(F({},e),{status:t,rating:null,isFavorite:!0}),{merge:!0})}removeFromFavorites(e){return _(this,null,function*(){let t=yield aa(this.user$);if(!t)return;let r=Us(this.firestore,"userBookStatus",`${t.uid}_${e}`);try{yield Zb(r)}catch(i){throw console.error("Error removing book from favorites:",i),i}})}toggleFavorite(e){return _(this,null,function*(){let t=yield aa(this.user$);if(!t)return;let r=Us(this.firestore,"userBookStatus",`${t.uid}_${e.id}`);(yield Jb(Xb(od(this.firestore,"userBookStatus"),cm("userId","==",t.uid),cm("bookId","==",e.id)))).empty?yield sd(r,{bookId:e.id,userId:t.uid,status:"want-to-read"}):yield Zb(r)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var y1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ge(gr),ge(Hn))};static \u0275dir=Ge({type:n})}return n})(),rT=(()=>{class n extends y1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Ge({type:n,features:[Sn]})}return n})(),mm=new U("");var $6={provide:mm,useExisting:Ln(()=>wo),multi:!0};function H6(){let n=An()?An().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var z6=new U(""),wo=(()=>{class n extends y1{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!H6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ge(gr),ge(Hn),ge(z6,8))};static \u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ie("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[$i([$6]),Sn]})}return n})();function q6(n){return n==null||G6(n)===0}function G6(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var iT=new U(""),v1=new U("");function W6(n){return q6(n.value)?{required:!0}:null}function c1(n){return null}function _1(n){return n!=null}function E1(n){return Yr(n)?ke(n):n}function w1(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function I1(n,e){return e.map(t=>t(n))}function K6(n){return!n.validate}function b1(n){return n.map(e=>K6(e)?e:t=>e.validate(t))}function Q6(n){if(!n)return null;let e=n.filter(_1);return e.length==0?null:function(t){return w1(I1(t,e))}}function oT(n){return n!=null?Q6(b1(n)):null}function Y6(n){if(!n)return null;let e=n.filter(_1);return e.length==0?null:function(t){let r=I1(t,e).map(E1);return my(r).pipe(X(w1))}}function sT(n){return n!=null?Y6(b1(n)):null}function u1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Z6(n){return n._rawValidators}function J6(n){return n._rawAsyncValidators}function eT(n){return n?Array.isArray(n)?n:[n]:[]}function lm(n,e){return Array.isArray(n)?n.includes(e):n===e}function l1(n,e){let t=eT(e);return eT(n).forEach(i=>{lm(t,i)||t.push(i)}),t}function d1(n,e){return eT(e).filter(t=>!lm(n,t))}var dm=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Nc=class extends dm{name;get formDirective(){return null}get path(){return null}},hd=class extends dm{_parent=null;name=null;valueAccessor=null},hm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},X6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ofe=oe(F({},X6),{"[class.ng-submitted]":"isSubmitted"}),Io=(()=>{class n extends hm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ge(hd,2))};static \u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Sn]})}return n})(),T1=(()=>{class n extends hm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ge(Nc,10))};static \u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Sn]})}return n})();var ad="VALID",um="INVALID",Ac="PENDING",cd="DISABLED",Eo=class{},fm=class extends Eo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ld=class extends Eo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dd=class extends Eo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rc=class extends Eo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},tT=class extends Eo{source;constructor(e){super(),this.source=e}},nT=class extends Eo{source;constructor(e){super(),this.source=e}};function D1(n){return(ym(n)?n.validators:n)||null}function e5(n){return Array.isArray(n)?oT(n):n||null}function C1(n,e){return(ym(e)?e.asyncValidators:n)||null}function t5(n){return Array.isArray(n)?sT(n):n||null}function ym(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function n5(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[t])throw new x(1001,"")}function r5(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new x(1002,"")})}var pm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return rn(this.statusReactive)}set status(e){rn(()=>this.statusReactive.set(e))}_status=Sa(()=>this.statusReactive());statusReactive=dr(void 0);get valid(){return this.status===ad}get invalid(){return this.status===um}get pending(){return this.status==Ac}get disabled(){return this.status===cd}get enabled(){return this.status!==cd}errors;get pristine(){return rn(this.pristineReactive)}set pristine(e){rn(()=>this.pristineReactive.set(e))}_pristine=Sa(()=>this.pristineReactive());pristineReactive=dr(!0);get dirty(){return!this.pristine}get touched(){return rn(this.touchedReactive)}set touched(e){rn(()=>this.touchedReactive.set(e))}_touched=Sa(()=>this.touchedReactive());touchedReactive=dr(!1);get untouched(){return!this.touched}_events=new ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(d1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(d1(e,this._rawAsyncValidators))}hasValidator(e){return lm(this._rawValidators,e)}hasAsyncValidator(e){return lm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new dd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ld(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ld(!0,r))}markAsPending(e={}){this.status=Ac;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cd,this.errors=null,this._forEachChild(i=>{i.disable(oe(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fm(this.value,r)),this._events.next(new Rc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ad,this._forEachChild(r=>{r.enable(oe(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ad||this.status===Ac)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fm(this.value,t)),this._events.next(new Rc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cd:ad}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ac,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=E1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?cd:this.errors?um:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ac)?Ac:this._anyControlsHaveStatus(um)?um:ad}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ld(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ym(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=e5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=t5(this._rawAsyncValidators)}},gm=class extends pm{constructor(e,t,r){super(D1(t),C1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){r5(this,!0,e),Object.keys(e).forEach(r=>{n5(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var aT=new U("",{providedIn:"root",factory:()=>cT}),cT="always";function i5(n,e){return[...e.path,n]}function S1(n,e,t=cT){A1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),s5(n,e),c5(n,e),a5(n,e),o5(n,e)}function h1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function o5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function A1(n,e){let t=Z6(n);e.validator!==null?n.setValidators(u1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=J6(n);e.asyncValidator!==null?n.setAsyncValidators(u1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();h1(e._rawValidators,i),h1(e._rawAsyncValidators,i)}function s5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&R1(n,e)})}function a5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&R1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function R1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function c5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function u5(n,e){n==null,A1(n,e)}function l5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function d5(n){return Object.getPrototypeOf(n.constructor)===rT}function h5(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function f5(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wo?t=o:d5(o)?r=o:i=o}),i||r||t||null}var p5={provide:Nc,useExisting:Ln(()=>uT)},ud=Promise.resolve(),uT=(()=>{class n extends Nc{callSetDisabledState;get submitted(){return rn(this.submittedReactive)}_submitted=Sa(()=>this.submittedReactive());submittedReactive=dr(!1);_directives=new Set;form;ngSubmit=new ct;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new gm({},oT(t),sT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ud.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),S1(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ud.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ud.then(()=>{let r=this._findContainer(t.path),i=new gm({});u5(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ud.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ud.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),h5(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new tT(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new nT(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ge(iT,10),ge(v1,10),ge(aT,8))};static \u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ie("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[$i([p5]),Sn]})}return n})();function f1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function p1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var g5=class extends pm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(D1(t),C1(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ym(t)&&(t.nonNullable||t.initialValueIsDefault)&&(p1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){p1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var m5={provide:hd,useExisting:Ln(()=>yi)},g1=Promise.resolve(),yi=(()=>{class n extends hd{_changeDetectorRef;callSetDisabledState;control=new g5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ct;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=f5(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),l5(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){S1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){g1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&qi(r);g1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?i5(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ge(Nc,9),ge(iT,10),ge(v1,10),ge(mm,10),ge(Jr,8),ge(aT,8))};static \u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[$i([m5]),Sn,Wr]})}return n})();var N1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var y5={provide:mm,useExisting:Ln(()=>vm),multi:!0};function M1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function v5(n){return n.split(":")[0]}var vm=(()=>{class n extends rT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=N(Zr).injector;destroyRef=N(Un);cdr=N(Jr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ru({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=M1(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=v5(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ie("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$i([y5]),Sn]})}return n})(),P1=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(M1(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ge(Hn),ge(gr),ge(vm,9))};static \u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),_5={provide:mm,useExisting:Ln(()=>k1),multi:!0};function m1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function E5(n){return n.split(":")[0]}var k1=(()=>{class n extends rT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=E5(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ie("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$i([_5]),Sn]})}return n})(),x1=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(m1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(m1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ge(Hn),ge(gr),ge(k1,9))};static \u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var w5=(()=>{class n{_validator=c1;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):c1,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,features:[Wr]})}return n})();var I5={provide:iT,useExisting:Ln(()=>lT),multi:!0};var lT=(()=>{class n extends w5{required;inputName="required";normalizeInput=qi;createValidator=t=>W6;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ca("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[$i([I5]),Sn]})}return n})();var b5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cn({type:n});static \u0275inj=ln({})}return n})();var bo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:aT,useValue:t.callSetDisabledState??cT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cn({type:n});static \u0275inj=ln({imports:[b5]})}return n})();var To=class n{auth=N(nr);router=N(Ot);injector=N(Be);logout(){return _(this,null,function*(){yield Ue(this.injector,()=>_(this,null,function*(){try{yield vk(this.auth),this.router.navigate(["/auth"])}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430:",e)}}))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-navbar"]],decls:10,vars:0,consts:[[1,"navbar"],["routerLink","/books"],["routerLink","/books/new"],["routerLink","/favorites"],[3,"click"]],template:function(t,r){t&1&&(j(0,"nav",0)(1,"a",1),K(2," \u041D\u0430\u0439\u0442\u0438 \u043A\u043D\u0438\u0433\u0443"),B(),j(3,"a",2),K(4," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043D\u0438\u0433\u0443"),B(),j(5,"a",3),K(6," \u0418\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435"),B(),j(7,"button",4),ie("click",function(){return r.logout()}),K(8," \u0412\u044B\u0439\u0442\u0438"),B()(),en(9,"hr"))},dependencies:[Rn,xE,fp],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:30px;padding:20px;background:#e4d0c7c3;border-bottom:3px solid #ceaea2;box-shadow:0 4px 20px #2c18104d}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#050504;font-weight:700;font-size:18px;padding:12px 25px;border:2px solid transparent;border-radius:8px;transition:all .3s ease;text-transform:uppercase;letter-spacing:1px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:gold;border-color:gold;transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ead681ea;color:#000;padding:12px 25px;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:1px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#e2c852ea,#d4ba44ea);transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:15px;padding:15px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function T5(n,e){if(n&1){let t=zn();j(0,"button",13),ie("click",function(){Ie(t);let i=We();return be(i.onClearSearch())}),K(1,"\xD7"),B()}}function D5(n,e){if(n&1&&(j(0,"div",18),K(1),Hi(2,"async"),B()),n&2){let t=We(2);le(),Gn(" ",t.searchTerm||zi(2,1,t.selectedGenre$)?"\u041A\u043D\u0438\u0433\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B":"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u043A\u043D\u0438\u0433"," ")}}function C5(n,e){if(n&1&&(j(0,"div",19),K(1),B()),n&2){let t=We().ngIf;le(),Gn(" \u041D\u0430\u0439\u0434\u0435\u043D\u043E \u043A\u043D\u0438\u0433: ",t.length," ")}}function S5(n,e){if(n&1){let t=zn();j(0,"div",20)(1,"div",21)(2,"h3",22),K(3),B(),j(4,"div",23)(5,"p",24),K(6),B(),j(7,"button",7),ie("click",function(){let i=Ie(t).$implicit,o=We(2);return be(o.toggleFavorite(i))}),K(8),B()(),j(9,"span",25),K(10),B()()()}if(n&2){let t=e.$implicit,r=We(2);le(3),qn(t.title),le(3),qn(t.author),le(),pn("favorited",t.id&&r.userBookStatuses[t.id]),le(),Gn(" ",t.id&&r.userBookStatuses[t.id]?"\u2764\uFE0F":"\u2661"," "),le(2),qn(t.genre)}}function A5(n,e){if(n&1&&(_f(0),fn(1,D5,3,3,"div",14)(2,C5,2,1,"div",15),j(3,"div",16),fn(4,S5,11,6,"div",17),B(),Ef()),n&2){let t=e.ngIf,r=We();le(),vt("ngIf",t.length===0),le(),vt("ngIf",t.length>0),le(2),vt("ngForOf",t)("ngForTrackBy",r.trackByBookId)}}function R5(n,e){n&1&&(j(0,"div",26),K(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."),B())}var Em=class n{books$;searchTerm="";searchTerm$=new st("");selectedGenre$=new st(null);filteredBooks$;userBookStatuses={};bookService=N(xr);constructor(){this.books$=this.bookService.getAllBooks(),this.filteredBooks$=Oo([this.books$,this.searchTerm$.pipe(yy(300),uh()),this.selectedGenre$]).pipe(X(([e,t,r])=>e.filter(i=>this.filterBook(i,t,r))))}ngOnInit(){this.bookService.getFavoriteBooks().subscribe({next:e=>{this.userBookStatuses={},e.forEach(t=>{t.id&&(this.userBookStatuses[t.id]={bookId:t.id,userId:"",status:t.status||"want-to-read",rating:t.rating})})},error:e=>console.error("Error loading favorites:",e)})}ngOnDestroy(){this.searchTerm$.complete(),this.selectedGenre$.complete()}onSearch(){this.searchTerm$.next(this.searchTerm.trim())}onClearSearch(){this.searchTerm="",this.searchTerm$.next(""),this.selectedGenre$.next(null)}toggleFavorite(e){this.bookService.toggleFavorite(e).then(()=>{e.id&&this.userBookStatuses[e.id]?delete this.userBookStatuses[e.id]:e.id&&(this.userBookStatuses[e.id]={bookId:e.id,userId:"",status:"want-to-read"})}).catch(t=>console.error("Error toggling favorite:",t))}filterByGenre(e){this.selectedGenre$.next(e),this.searchTerm="",this.searchTerm$.next("")}filterBook(e,t,r){let i=!r||e.genre?.toLowerCase()===r.toLowerCase();if(!t.trim())return i;let o=t.toLowerCase(),s=e.title.toLowerCase().includes(o)||e.author.toLowerCase().includes(o);return i&&s}trackByBookId(e,t){return t.id||e.toString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-books-page"]],decls:56,vars:22,consts:[["loading",""],[1,"page-container"],[1,"search-controls"],[1,"search-input-group"],["type","text","placeholder","\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0430\u0432\u0442\u043E\u0440\u0443 \u0438\u043B\u0438 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E",1,"search-input",3,"ngModelChange","input","ngModel"],["class","clear-btn",3,"click",4,"ngIf"],[1,"genre-filters"],[3,"click"],[1,"dropdown"],[1,"dropdown-toggle"],[1,"dropdown-menu"],[1,"books-container"],[4,"ngIf","ngIfElse"],[1,"clear-btn",3,"click"],["class","no-books-message",4,"ngIf"],["class","books-stats",4,"ngIf"],[1,"books-list"],["class","book-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"no-books-message"],[1,"books-stats"],[1,"book-card"],[1,"book-info"],[1,"book-title"],[1,"book-meta"],[1,"book-author"],[1,"book-genre"],[1,"loading"]],template:function(t,r){if(t&1){let i=zn();en(0,"app-navbar"),j(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),nn("ngModelChange",function(s){return Ie(i),gn(r.searchTerm,s)||(r.searchTerm=s),be(s)}),ie("input",function(){return Ie(i),be(r.onSearch())}),B(),fn(5,T5,2,0,"button",5),B(),j(6,"div",6)(7,"span"),K(8,"\u0424\u0438\u043B\u044C\u0442\u0440 \u043F\u043E \u0436\u0430\u043D\u0440\u0443:"),B(),j(9,"button",7),Hi(10,"async"),ie("click",function(){return Ie(i),be(r.filterByGenre(null))}),K(11," \u0412\u0441\u0435 \u0436\u0430\u043D\u0440\u044B "),B(),j(12,"button",7),Hi(13,"async"),ie("click",function(){return Ie(i),be(r.filterByGenre("non-fiction"))}),K(14," Non-fiction "),B(),j(15,"button",7),Hi(16,"async"),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0444\u0430\u043D\u0442\u0430\u0441\u0442\u0438\u043A\u0430"))}),K(17," \u0424\u0430\u043D\u0442\u0430\u0441\u0442\u0438\u043A\u0430 "),B(),j(18,"button",7),Hi(19,"async"),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0434\u0435\u0442\u0435\u043A\u0442\u0438\u0432"))}),K(20," \u0414\u0435\u0442\u0435\u043A\u0442\u0438\u0432\u044B "),B(),j(21,"div",8)(22,"button",9),K(23,"\u0415\u0449\u0451 \u25BE"),B(),j(24,"div",10)(25,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0431\u0438\u0437\u043D\u0435\u0441 \u043A\u043D\u0438\u0433\u0438"))}),K(26,"\u0411\u0438\u0437\u043D\u0435\u0441 \u043A\u043D\u0438\u0433\u0438"),B(),j(27,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0434\u043B\u044F \u0434\u0435\u0442\u0435\u0439"))}),K(28,"\u0414\u043B\u044F \u0434\u0435\u0442\u0435\u0439"),B(),j(29,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0437\u0430\u0440\u0443\u0431\u0435\u0436\u043D\u0430\u044F \u043B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"))}),K(30,"\u0417\u0430\u0440\u0443\u0431\u0435\u0436\u043D\u0430\u044F \u043B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"),B(),j(31,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0437\u0430\u0440\u0443\u0431\u0435\u0436\u043D\u0430\u044F \u043F\u0440\u043E\u0437\u0430"))}),K(32,"\u0417\u0430\u0440\u0443\u0431\u0435\u0436\u043D\u0430\u044F \u043F\u0440\u043E\u0437\u0430"),B(),j(33,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0437\u0434\u043E\u0440\u043E\u0432\u044C\u0435"))}),K(34,"\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435"),B(),j(35,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0438\u0441\u0442\u043E\u0440\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0440\u043E\u043C\u0430\u043D"))}),K(36,"\u0418\u0441\u0442\u043E\u0440\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0440\u043E\u043C\u0430\u043D"),B(),j(37,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u043B\u044E\u0431\u043E\u0432\u043D\u044B\u0439 \u0440\u043E\u043C\u0430\u043D"))}),K(38,"\u041B\u044E\u0431\u043E\u0432\u043D\u044B\u0439 \u0440\u043E\u043C\u0430\u043D"),B(),j(39,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u043D\u0430\u0443\u043A\u0430 \u0438 \u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u043D\u0438\u0435"))}),K(40,"\u041D\u0430\u0443\u043A\u0430 \u0438 \u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u043D\u0438\u0435"),B(),j(41,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u043F\u043E\u044D\u0437\u0438\u044F"))}),K(42,"\u041F\u043E\u044D\u0437\u0438\u044F"),B(),j(43,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u043F\u0441\u0438\u0445\u043E\u043B\u043E\u0433\u0438\u044F"))}),K(44,"\u041F\u0441\u0438\u0445\u043E\u043B\u043E\u0433\u0438\u044F"),B(),j(45,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0440\u0435\u043B\u0438\u0433\u0438\u044F"))}),K(46,"\u0420\u0435\u043B\u0438\u0433\u0438\u044F"),B(),j(47,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0440\u0443\u0441\u0441\u043A\u0430\u044F \u043A\u043B\u0430\u0441\u0441\u0438\u043A\u0430"))}),K(48,"\u0420\u0443\u0441\u0441\u043A\u0430\u044F \u043A\u043B\u0430\u0441\u0441\u0438\u043A\u0430"),B(),j(49,"button",7),ie("click",function(){return Ie(i),be(r.filterByGenre("\u0444\u044D\u043D\u0442\u0435\u0437\u0438"))}),K(50,"\u0424\u044D\u043D\u0442\u0435\u0437\u0438"),B()()()()(),j(51,"div",11),fn(52,A5,5,4,"ng-container",12),Hi(53,"async"),fn(54,R5,2,0,"ng-template",null,0,M_),B()()}if(t&2){let i=N_(55);le(4),tn("ngModel",r.searchTerm),le(),vt("ngIf",r.searchTerm),le(4),pn("active",zi(10,12,r.selectedGenre$)===null),le(3),pn("active",zi(13,14,r.selectedGenre$)==="non-fiction"),le(3),pn("active",zi(16,16,r.selectedGenre$)==="\u0444\u0430\u043D\u0442\u0430\u0441\u0442\u0438\u043A\u0430"),le(3),pn("active",zi(19,18,r.selectedGenre$)==="\u0434\u0435\u0442\u0435\u043A\u0442\u0438\u0432"),le(34),vt("ngIf",zi(53,20,r.filteredBooks$))("ngIfElse",i)}},dependencies:[Rn,Ra,Ou,bo,wo,Io,yi,To,q_],styles:[".search-controls[_ngcontent-%COMP%]{background:#fffffffa;border-radius:16px;padding:25px;margin-bottom:30px;box-shadow:0 4px 20px #8b45131a}.search-input-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding-right:50px;font-size:16px;border:2px solid #d4a76a;border-radius:12px;background:#ffffffe6}.search-input[_ngcontent-%COMP%]:focus{border-color:gold;box-shadow:0 0 0 3px #ffd70033}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:#e74c3c;color:#fff;border:none;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;font-size:18px;padding:0;transition:all .2s ease}.clear-btn[_ngcontent-%COMP%]:hover{background:#c0392b;transform:translateY(-50%) scale(1.1)}.genre-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;align-items:center}.genre-filters[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#8b5a2b;font-size:16px;margin-right:10px}.genre-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff8dc,#fffbeb);border:2px solid #f8e08e;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;color:#8b5a2b;transition:all .2s ease;font-size:15px;min-width:120px}.genre-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#fffbeb,#fff8dc);border-color:gold;transform:translateY(-2px);box-shadow:0 4px 12px #ffd70033}.genre-filters[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:linear-gradient(145deg,gold,#ffed4e);border-color:#d4a76a;color:#8b5a2b}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-toggle[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff8dc,#fffbeb);border:2px solid #f8e08e;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;color:#8b5a2b;transition:all .2s ease;font-size:15px;min-width:120px}.dropdown-toggle[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#fffbeb,#fff8dc);border-color:gold;transform:translateY(-2px)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;border:2px solid #d4a76a;border-radius:12px;padding:15px;z-index:1000;min-width:220px;box-shadow:0 8px 25px #8b5a2b26;display:none;flex-direction:column;gap:8px}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:flex}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff8dc,#fffbeb);border:1px solid #f8e08e;text-align:center;padding:10px 15px;border-radius:8px;color:#8b5a2b;font-weight:500;transition:all .2s ease;font-size:14px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,gold,#ffed4e);transform:translateY(-1px)}.books-container[_ngcontent-%COMP%]{background:#fffffffa;border-radius:16px;padding:25px;box-shadow:0 4px 20px #8b45131a}.books-stats[_ngcontent-%COMP%]{color:#8b5a2b;padding:12px 0;text-align:left;font-weight:600;margin-bottom:20px;font-size:16px}.books-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.book-card[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e8d5b7;border-radius:14px;padding:20px;transition:all .3s ease;display:flex;flex-direction:column;min-height:160px}.book-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 20px #8b5a2b26;border-color:gold}.book-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;gap:8px;position:relative;padding-right:50px}.book-title[_ngcontent-%COMP%]{font-weight:700;color:#8b5a2b;line-height:1.4;flex:1}.book-author[_ngcontent-%COMP%]{color:#a67c52;font-size:16px;font-weight:500;white-space:nowrap;flex-shrink:0}.book-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-bottom:15px}.book-genre[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:linear-gradient(145deg,#ffed4e,gold);color:#8b5a2b;border-radius:20px;font-size:14px;font-weight:600}.book-heart[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:none;border:none;font-size:32px;cursor:pointer;color:#d4a76a;padding:5px;transition:all .2s ease;width:40px;height:40px;display:flex;align-items:center;justify-content:center;z-index:2}.book-heart[_ngcontent-%COMP%]:hover{color:#ff6b6b;transform:scale(1.1)}.book-heart.favorited[_ngcontent-%COMP%]{color:#ff6b6b;background:none!important}.no-books-message[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:18px;color:#a67c52;background:#ffd7001a;border:2px dashed #ffd700;border-radius:12px;grid-column:1 / -1}@media (max-width: 768px){.books-list[_ngcontent-%COMP%]{grid-template-columns:1fr}.genre-filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}.genre-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dropdown-toggle[_ngcontent-%COMP%]{width:100%;min-width:auto}.dropdown[_ngcontent-%COMP%]{width:100%}.dropdown-menu[_ngcontent-%COMP%]{width:100%;left:0}.book-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px;padding-right:50px}.book-author[_ngcontent-%COMP%]{margin-left:0;margin-top:5px;margin-bottom:0;white-space:normal}.book-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px;margin-top:15px}.book-heart[_ngcontent-%COMP%]{top:15px;right:15px}}.book-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.book-header[_ngcontent-%COMP%], .book-footer[_ngcontent-%COMP%]{margin:0}.book-title[_ngcontent-%COMP%], .book-author[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"]})};function N5(n,e){if(n&1){let t=zn();j(0,"button",10),ie("click",function(){Ie(t);let i=We().$implicit,o=We();return be(o.startEditing(i.id))}),K(1,"\u270F\uFE0F"),B()}}function M5(n,e){if(n&1){let t=zn();j(0,"select",12),nn("ngModelChange",function(i){Ie(t);let o=We(2).$implicit;return gn(o.rating,i)||(o.rating=i),be(i)}),ie("ngModelChange",function(i){Ie(t);let o=We(2).$implicit,s=We();return be(s.rateBook(o,i))}),j(1,"option",19),K(2,"1"),B(),j(3,"option",19),K(4,"2"),B(),j(5,"option",19),K(6,"3"),B(),j(7,"option",19),K(8,"4"),B(),j(9,"option",19),K(10,"5"),B()()}if(n&2){let t=We(2).$implicit;tn("ngModel",t.rating),le(),vt("value",1),le(2),vt("value",2),le(2),vt("value",3),le(2),vt("value",4),le(2),vt("value",5)}}function P5(n,e){if(n&1){let t=zn();j(0,"div",11)(1,"select",12),nn("ngModelChange",function(i){Ie(t);let o=We().$implicit;return gn(o.status,i)||(o.status=i),be(i)}),ie("ngModelChange",function(i){Ie(t);let o=We().$implicit,s=We();return be(s.changeStatus(o,i))}),j(2,"option",13),K(3,"\u0425\u043E\u0447\u0443 \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C"),B(),j(4,"option",14),K(5,"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435"),B(),j(6,"option",15),K(7,"\u041F\u0440\u043E\u0447\u0438\u0442\u0430\u043D\u043E"),B()(),fn(8,M5,11,6,"select",16),j(9,"button",17),ie("click",function(){Ie(t);let i=We(2);return be(i.stopEditing())}),K(10,"\u2716\uFE0F"),B(),j(11,"button",18),ie("click",function(){Ie(t);let i=We().$implicit,o=We();return be(o.removeFromFavorites(i))}),K(12,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),B()()}if(n&2){let t=We().$implicit;le(),tn("ngModel",t.status),le(7),vt("ngIf",t.status==="completed")}}function k5(n,e){if(n&1&&(j(0,"div",4)(1,"div",5)(2,"span",6),K(3),B(),K(4," \u2014 "),j(5,"span",7),K(6),B(),fn(7,N5,2,0,"button",8),B(),fn(8,P5,13,2,"div",9),B()),n&2){let t=e.$implicit,r=We();pn("editing",r.editingBookId===t.id),le(3),qn(t.title),le(3),qn(t.author),le(),vt("ngIf",r.editingBookId!==(t.id||"")),le(),vt("ngIf",r.editingBookId===t.id)}}var wm=class n{favoriteBooks=[];filterStatus="all";editingBookId=null;previousFilterStatus=null;bookService=N(xr);ngZone=N(Ce);ngOnInit(){let e=localStorage.getItem("favoritesFilter");this.filterStatus=e||"want-to-read",this.loadFavorites()}changeFilter(e){this.filterStatus=e,localStorage.setItem("favoritesFilter",e)}loadFavorites(){console.log("Loading favorites..."),this.bookService.getFavoriteBooks().subscribe({next:e=>{console.log("Favorites loaded:",e),this.ngZone.run(()=>{this.favoriteBooks=e})},error:e=>{console.error("Error loading favorites:",e),this.ngZone.run(()=>{this.favoriteBooks=[]})}})}startEditing(e){e&&(this.previousFilterStatus=this.filterStatus,this.editingBookId=e)}stopEditing(){this.editingBookId=null,this.previousFilterStatus&&(this.filterStatus=this.previousFilterStatus)}changeStatus(e,t){this.bookService.updateBookStatus(e.id,t).then(()=>{let r=this.favoriteBooks.findIndex(i=>i.id===e.id);r>-1&&(this.favoriteBooks[r].status=t)}).catch(r=>console.error("Error updating status:",r))}rateBook(e,t){this.bookService.updateBookRating(e.id,t).then(()=>this.loadFavorites()).catch(r=>console.error("Error updating rating:",r))}filteredBooks(){return this.filterStatus==="all"?this.favoriteBooks:this.favoriteBooks.filter(e=>e.status===this.filterStatus)}removeFromFavorites(e){this.bookService.removeFromFavorites(e.id).then(()=>this.loadFavorites()).catch(t=>console.error("Error removing book:",t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-favorites-page"]],decls:10,vars:1,consts:[[1,"status-filters"],[3,"click"],[1,"favorites-list"],["class","book-card",3,"editing",4,"ngFor","ngForOf"],[1,"book-card"],[1,"book-info"],[1,"title"],[1,"author"],["class","edit-btn",3,"click",4,"ngIf"],["class","edit-panel",4,"ngIf"],[1,"edit-btn",3,"click"],[1,"edit-panel"],[3,"ngModelChange","ngModel"],["value","want-to-read"],["value","reading"],["value","completed"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"close-btn",3,"click"],[1,"remove-btn",3,"click"],[3,"value"]],template:function(t,r){t&1&&(en(0,"app-navbar"),j(1,"div",0)(2,"button",1),ie("click",function(){return r.changeFilter("want-to-read")}),K(3,"\u0425\u043E\u0447\u0443 \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C"),B(),j(4,"button",1),ie("click",function(){return r.changeFilter("reading")}),K(5,"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435"),B(),j(6,"button",1),ie("click",function(){return r.changeFilter("completed")}),K(7,"\u041F\u0440\u043E\u0447\u0438\u0442\u0430\u043D\u043E"),B()(),j(8,"div",2),fn(9,k5,9,6,"div",3),B()),t&2&&(le(9),vt("ngForOf",r.filteredBooks()))},dependencies:[Rn,Ra,Ou,bo,P1,x1,vm,Io,yi,To],styles:[".status-filters[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:30px;justify-content:center;flex-wrap:wrap}.status-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px;text-align:center;font-weight:700;text-transform:uppercase;letter-spacing:1px}.favorites-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:20px}.book-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #2c1810;border-radius:12px;padding:20px;transition:all .3s ease}.book-card.editing[_ngcontent-%COMP%]{border-color:gold;background:#ffd7001a;transform:scale(1.02)}.book-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap;margin-bottom:15px}.title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#2c1810}.author[_ngcontent-%COMP%]{font-size:16px;color:#6c757d;font-weight:500}.edit-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%], .remove-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:18px;padding:8px;border-radius:6px;transition:all .3s ease}.edit-btn[_ngcontent-%COMP%]:hover{background:gold;transform:scale(1.1)}.close-btn[_ngcontent-%COMP%]:hover, .remove-btn[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;transform:scale(1.1)}.edit-panel[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap;padding:15px;background:#ffffffe6;border:2px solid #ffd700;border-radius:8px;margin-top:15px}.edit-panel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;min-width:150px}.edit-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 15px;font-size:14px}@media (max-width: 768px){.favorites-list[_ngcontent-%COMP%]{grid-template-columns:1fr}.status-filters[_ngcontent-%COMP%]{flex-direction:column}.status-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.edit-panel[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};var Im=class n{book={title:"",author:"",genre:""};bookService=N(xr);router=N(Ot);addBook(){return _(this,null,function*(){if(!this.book.title||!this.book.author||!this.book.genre){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F!");return}try{yield this.bookService.addBook(this.book),alert("\u041A\u043D\u0438\u0433\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430!"),this.router.navigate(["/books"])}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u043A\u043D\u0438\u0433\u0438:",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-add-book"]],decls:16,vars:3,consts:[["bookForm","ngForm"],[3,"ngSubmit"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["type","text","name","author","required","",3,"ngModelChange","ngModel"],["type","text","name","genre","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(t,r){if(t&1){let i=zn();en(0,"app-navbar"),j(1,"h2"),K(2," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043D\u0438\u0433\u0443"),B(),j(3,"form",1,0),ie("ngSubmit",function(){return Ie(i),be(r.addBook())}),j(5,"label"),K(6,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:"),B(),j(7,"input",2),nn("ngModelChange",function(s){return Ie(i),gn(r.book.title,s)||(r.book.title=s),be(s)}),B(),j(8,"label"),K(9,"\u0410\u0432\u0442\u043E\u0440:"),B(),j(10,"input",3),nn("ngModelChange",function(s){return Ie(i),gn(r.book.author,s)||(r.book.author=s),be(s)}),B(),j(11,"label"),K(12,"\u0416\u0430\u043D\u0440:"),B(),j(13,"input",4),nn("ngModelChange",function(s){return Ie(i),gn(r.book.genre,s)||(r.book.genre=s),be(s)}),B(),j(14,"button",5),K(15,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),B()()}t&2&&(le(7),tn("ngModel",r.book.title),le(3),tn("ngModel",r.book.author),le(3),tn("ngModel",r.book.genre))},dependencies:[Rn,bo,N1,wo,Io,T1,lT,yi,uT,To],styles:["form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:0;margin:0;background:none;border:none;box-shadow:none;max-width:none}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:0;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:600;color:#2c3e50;font-size:14px;text-align:left}input[type=text][_ngcontent-%COMP%]{width:200px;padding:10px 12px;font-size:14px;border:2px solid #bdc3c7;border-radius:8px;background:#fff;transition:all .3s ease;box-sizing:border-box}input[type=text][_ngcontent-%COMP%]:focus{border-color:gold;box-shadow:0 0 0 2px #3498db33;outline:none}button[type=submit][_ngcontent-%COMP%]{background:linear-gradient(145deg,gold,#ffed4e);color:#000;border:2px solid #2c1810;padding:10px 20px;font-size:14px;font-weight:600;text-transform:uppercase;border-radius:8px;cursor:pointer;transition:all .3s ease;margin-top:23px;height:40px;white-space:nowrap}button[type=submit][_ngcontent-%COMP%]{position:relative;bottom:12px}button[type=submit][_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#ffed4e,gold);transform:translateY(-2px);box-shadow:0 4px 12px #2c181033}@media (max-width: 768px){form[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:stretch}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}input[type=text][_ngcontent-%COMP%]{width:100%}button[type=submit][_ngcontent-%COMP%]{margin-top:10px;width:100%}}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e74c3c;background-color:#e74c3c0d}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#27ae60}"]})};var bm=class n{email="";password="";isLoginMode=!0;auth=N(nr);router=N(Ot);bookService=N(xr);onSubmit(){this.isLoginMode?this.login():this.register()}login(){return _(this,null,function*(){try{yield yk(this.auth,this.email,this.password),this.router.navigate(["/books"])}catch(e){e instanceof Ft?alert(this.getErrorMessage(e)):alert("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430")}})}register(){return _(this,null,function*(){try{yield gk(this.auth,this.email,this.password),this.router.navigate(["/books"])}catch(e){e instanceof Ft?alert(this.getErrorMessage(e)):alert("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430")}})}toggleMode(){this.isLoginMode=!this.isLoginMode}getErrorMessage(e){switch(e.code){case"auth/email-already-in-use":return"\u042D\u0442\u043E\u0442 email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D";case"auth/invalid-email":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 email";case"auth/weak-password":return"\u041F\u0430\u0440\u043E\u043B\u044C \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u043F\u0440\u043E\u0441\u0442\u043E\u0439 (\u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432)";case"auth/user-not-found":return"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C email \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D";case"auth/wrong-password":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C";default:return`\u041E\u0448\u0438\u0431\u043A\u0430: ${e.message}`}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qt({type:n,selectors:[["app-auth"]],decls:15,vars:6,consts:[[1,"auth-container"],[1,"auth-form"],[1,"form-group"],["placeholder","Email",1,"form-input",3,"ngModelChange","ngModel"],["type","password","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C",1,"form-input",3,"ngModelChange","ngModel"],[1,"auth-button",3,"click"],[1,"auth-toggle"],[1,"auth-link",3,"click"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"h2"),K(3),B(),j(4,"div",2)(5,"input",3),nn("ngModelChange",function(o){return gn(r.email,o)||(r.email=o),o}),B()(),j(6,"div",2)(7,"input",4),nn("ngModelChange",function(o){return gn(r.password,o)||(r.password=o),o}),B()(),j(8,"button",5),ie("click",function(){return r.onSubmit()}),K(9),B(),j(10,"div",6)(11,"span"),K(12),B(),j(13,"button",7),ie("click",function(){return r.toggleMode()}),K(14),B()()()()),t&2&&(le(3),qn(r.isLoginMode?"\u0412\u0445\u043E\u0434":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),le(2),tn("ngModel",r.email),le(2),tn("ngModel",r.password),le(2),Gn(" ",r.isLoginMode?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"," "),le(3),Gn(" ",r.isLoginMode?"\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?":"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?"," "),le(2),Gn(" ",r.isLoginMode?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0412\u043E\u0439\u0442\u0438"," "))},dependencies:[bo,wo,Io,yi,Rn],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f5e6d3,#e8d5b7);padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;border:3px solid #2c1810;border-radius:16px;padding:40px;width:100%;max-width:450px;box-shadow:0 12px 35px #2c18104d;text-align:center}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c1810;font-size:2.8rem;margin-bottom:30px;text-transform:uppercase;letter-spacing:2px}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px;align-items:center}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:18px 20px;font-size:18px;border:2px solid #d4a76a;border-radius:12px;background:#ffffffe6;transition:all .3s ease}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:gold;box-shadow:0 0 0 3px #ffd70033;outline:none}.auth-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(145deg,gold,#ffed4e);color:#000;border:2px solid #2c1810;padding:10px 20px;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-top:10px;border-radius:10px;transition:all .3s ease;height:45px}.auth-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#ffed4e,gold);transform:translateY(-2px);box-shadow:0 4px 15px #2c181033}.auth-toggle[_ngcontent-%COMP%]{margin-top:25px;padding-top:20px;border-top:2px solid #ffd700;align-items:center}.auth-toggle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin-bottom:10px}.auth-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(145deg,gold,#ffed4e);color:#000;border:2px solid #2c1810;padding:8px 16px;font-size:14px;font-weight:700;text-transform:uppercase;border-radius:8px;cursor:pointer;transition:all .3s ease;text-decoration:none;align-items:center}.auth-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#ffed4e,gold);transform:translateY(-1px);box-shadow:0 2px 10px #2c181033}.error-message[_ngcontent-%COMP%]{background:linear-gradient(145deg,#dc3545,#c82333);color:#fff;padding:15px;border-radius:8px;font-weight:600;margin-bottom:20px;border:2px solid #2c1810;font-size:16px}.success-message[_ngcontent-%COMP%]{background:linear-gradient(145deg,#28a745,#20c997);color:#fff;padding:15px;border-radius:8px;font-weight:600;margin-bottom:20px;border:2px solid #2c1810;font-size:14px}@media (max-width: 768px){.auth-card[_ngcontent-%COMP%]{padding:30px 20px;margin:0 15px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:16px 18px;font-size:16px}.auth-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:9px 18px;font-size:15px;height:40px}.auth-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 14px;font-size:13px}}"]})};var O1=[{path:"",redirectTo:"auth",pathMatch:"full"},{path:"auth",component:bm},{path:"books",component:Em},{path:"books/new",component:Im},{path:"favorites",component:wm}];var F1={firebase:{apiKey:"AIzaSyCml1P-cUBsyYsWHwsusivW9Zqpm5E3LRU",authDomain:"kalashnikova-alisa-cour-bf5a1.firebaseapp.com",projectId:"kalashnikova-alisa-cour-bf5a1",storageBucket:"kalashnikova-alisa-cour-bf5a1.firebasestorage.app",messagingSenderId:"281599170680",appId:"1:281599170680:web:71c841122df9712bacf58d"}};var L1={providers:[PE(O1),CM(),iE(),oP(()=>sP(F1.firebase)),fk(()=>mk()),r1(()=>a1())]};tE(pp,L1).catch(n=>console.error(n));
